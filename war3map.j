globals
    // User-defined
location udg_TargetLoc= null
integer udg_Skill_FeralImpact= 0
integer udg_Skill_Bonebreaker= 0
integer udg_Skill_BattleFury= 0
integer udg_Skill_BattleFurrySpeed= 0
integer udg_Skill_Tornado= 0
real udg_g= 0
real udg_FI_DefaultHeight= 0
string udg_FI_EffectA
string udg_FI_EffectB
string udg_FI_Sound
integer udg_BF_DefautInterval= 0
real udg_Shake= 0
integer udg_KB_Max= 0
integer udg_kb= 0
location udg_point= null
unit array udg_KB_Unit
location udg_point2= null
real array udg_KB_Speed
real array udg_KB_Angle
real array udg_KB_Dist
real array udg_KB_MaxDist
integer udg_FI_Max= 0
integer udg_fi= 0
real udg_tmpDiffHeight= 0
real udg_tmpTargetZ= 0
real udg_tmpCasterZ= 0
real udg_tmpHeight= 0
real udg_tmpDistance= 0
unit array udg_FI_Hero
real array udg_FI_z
real array udg_FI_Angle
real array udg_FI_Vz
real array udg_FI_Height
real udg_tmpTime= 0
real array udg_FI_Vp
real array udg_FI_AnimSpeed
sound udg_tmpSound= null
real udg_real2= 0
real udg_real= 0
real udg_FI_FallHeight= 0
group udg_group= null
integer udg_BF_Max= 0
integer udg_bf= 0
unit array udg_BF_Hero
effect array udg_BF_SpecEffect1
effect array udg_BF_SpecEffect2
integer array udg_BF_Time
integer udg_integer= 0
integer udg_TO_Max= 0
unit array udg_TO_Hero
real array udg_TO_Duration
integer udg_to= 0
integer udg_UM_CustomInteger= 0
real array udg_UM_CoreX
real array udg_UM_CoreY
real array udg_UM_Map
real array udg_UM_MaxDistance
effect array udg_UM_MainModelHandler
effect array udg_UM_MatterModelHandler
unit udg_UM_CustomUnit= null
unit array udg_UM_Main
real array udg_UM_MainAngle
real array udg_UM_MatterReturnAngle
integer udg_UM_Ability= 0
integer udg_UM_DummyType= 0
integer udg_UM_AbilityMaxLevel= 0
real array udg_UM_Radius
real array udg_UM_ExplosionRadius
boolean udg_UM_DestroyTrees= false
attacktype udg_UM_AttackType= null
damagetype udg_UM_DamageType= null
real udg_UM_LoopInterval= 0
string array udg_UM_Effect
string array udg_UM_EffectAttach
real array udg_UM_MainSize
real array udg_UM_MainHeight
real array udg_UM_MainSpeed
real udg_UM_MainCreationRange= 0
integer array udg_UM_MatterAmount
real array udg_UM_MatterSize
real array udg_UM_MatterHeight
boolean udg_UM_MatterRotation= false
real array udg_UM_MatterRotationAngleSpeed
real array udg_UM_RevolveDuration
integer udg_UM_MatterMinimumEffect= 0
integer udg_UM_MatterMaximumEffect= 0
string array udg_UM_MatterLightningEffect
integer udg_UM_MatterMinimumLightning= 0
integer udg_UM_MatterMaximumLightning= 0
real array udg_UM_MatterLightningWidth
real array udg_UM_MatterLightningDamage
real array udg_UM_MatterReturnTime
integer udg_UM_MotionEffectChance= 0
boolean udg_UM_MatterCollideExplosion= false
boolean udg_UM_ExplosionOrbsModelSpecific= false
integer array udg_UM_ExplosionOrbsAmount
real array udg_UM_ExplosionOrbsSize
real array udg_UM_ExplosionOrbsMinHeight
real array udg_UM_ExplosionOrbsMaxHeight
real array udg_UM_ExplosionOrbsSpeed
real array udg_UM_ExplosionOrbsCollision
real array udg_UM_ExplosionOrbsDamage
real array udg_UM_ExplosionRadiusDamage
integer udg_UM_ExplosionOrbsArcChance= 0
real array udg_UM_ExplosionOrbsArc
integer udg_UM_EffectsAmount= 0
real array udg_UM_CustomReal
real array udg_UM_CustomReal2
real array udg_UM_CustomReal3
real array udg_UM_CustomReal4
real array udg_UM_CustomReal5
real array udg_UM_CustomReal6
unit array udg_UM_Caster
integer udg_UM_ID= 0
player array udg_UM_CasterPlayer
integer array udg_UM_Level
unit udg_UM_Unit= null
real array udg_UM_CurrentDistance
integer array udg_UM_Phase
group udg_UM_Group= null
real array udg_UM_MatterAngle
integer udg_UM_CustomID= 0
real udg_LH_DurationSet= 0
string udg_LH_LightningNameSet
unit udg_LH_UnitSourceSet= null
unit udg_LH_UnitTargetSet= null
real array udg_UM_MatterRevolveAngle
real array udg_UM_RevolveDurationCounter
real array udg_UM_MatterReturnTimeCounter
real array udg_UM_MatterCurrentDistance
boolean array udg_UM_CustomBoolean
real udg_LSE_Width= 0
trigger udg_LSE_Trigger_GetUnits= null
group udg_LSE_Group= null
unit udg_UM_PickedUnit= null
unit udg_KB3D_Unit= null
real udg_KB3D_Range= 0
real udg_KB3D_Speed= 0
real udg_KB3D_Angle= 0
boolean udg_KB3D_D_ENEMY= false
string udg_KB3D_EndFx
real udg_KB3D_AoEEndDamage= 0
boolean udg_KB3D_EndwhenDead= false
boolean udg_KB3D_KillatEnd= false
real udg_KB3D_AoE= 0
real udg_KB3D_Arc= 0
attacktype udg_KB3D_AttackType= null
damagetype udg_KB3D_DamageType= null
unit udg_KB3D_Damager= null
boolean udg_KB3D_DestroyTree= false
boolean udg_KB3D_DisableUnit= false
boolean udg_KB3D_FaceAngle= false
boolean udg_KB3D_iKB= false
boolean udg_KB3D_JumpOverCliff= false
string udg_KB3D_Attach
string udg_KB3D_TrailFx
boolean udg_KB3D_UnpathableStop= false
real udg_KB3D_Zoffset= 0
real udg_M_Radius= 0
real array udg_M_Damage
real udg_M_Denominator= 0
real udg_M_Numerator= 0
real udg_M_Loops= 0
real udg_M_SpeedBase= 0
real udg_M_Speed= 0
real udg_M_AnglePlus= 0
string udg_M_SuckSFX
real array udg_M_Duration
string udg_M_TornadoSFX
unit udg_M_Caster= null
location udg_M_TargetLoc= null
integer udg_M_Levels= 0
unit udg_M_Tornado= null
location udg_M_SFXOffset= null
integer udg_M_THandle= 0
hashtable udg_M_Hash= null
group udg_M_TornadoGroup= null
unit udg_M_Picked= null
integer udg_M_PickedHandle= 0
location udg_M_PickedLoc= null
group udg_M_VictimGroup= null
unit udg_M_PickedV= null
location udg_M_PickedVLoc= null
real udg_M_DistanceBase= 0
real udg_M_DamageLoop= 0
real udg_M_Angle= 0
location udg_M_SuckOffset= null
integer udg_SD_Ability= 0
integer udg_SD_EvasionDummy= 0
integer udg_SD_Shadow= 0
real udg_SD_Distance= 0
real udg_SD_Speed= 0
real array udg_SD_Damage
damagetype udg_SD_DamageType= null
attacktype udg_SD_AttackType= null
string udg_SD_Animation
real udg_SD_AnimSpeed= 0
real udg_SD_Offset= 0
real udg_SD_Degrees= 0
string udg_SD_SFX1
string udg_SD_SFX2
integer udg_SD_IndexSize= 0
integer array udg_SD_Index
integer udg_SD_MaxIndexSize= 0
integer udg_SD_TempInt= 0
unit array udg_SD_Caster
unit array udg_SD_Target
location array udg_SD_Loc
unit array udg_SD_Shadows
integer array udg_SD_LOA
integer udg_SD_Looper= 0
real array udg_SD_Angle
hashtable udg_hashtable= null
boolean udg_manaburn= false
real array udg_damage
real array udg_areaofeffect
string udg_unitsfx
string udg_orderid
group udg_stormgroup= null
unit udg_caster= null
boolean udg_boolean= false
integer udg_handle= 0
location udg_point1= null
integer udg_level= 0
unit udg_target= null
lightning udg_light= null
force udg_TempGroup= null
unit udg_Caster= null
unit udg_Target= null
location udg_TempLoc= null
location udg_TempLoc2= null
real udg_TempReal= 0
integer udg_TempInt2= 0
unit udg_TempUnit= null
integer udg_TempInt= 0
integer udg_IAIndex= 0
integer udg_IALastRecycled= 0
integer array udg_IARecycledList
integer udg_IAMax= 0
boolean array udg_IAHas
unit array udg_IACaster
location array udg_IATargetPoint
location array udg_IACasterPoint
real array udg_IAMaxDistance
real array udg_IADistance
real array udg_IADamage
integer udg_IACount= 0
real array udg_IAAngle
unit array udg_IAArrow
integer udg_IAInteger= 0
group array udg_IADMGGroup
location udg_TempLoc3= null
integer udg_ARIndex= 0
integer udg_ARLastRecycled= 0
integer array udg_ARRecycledList
integer udg_ARMax= 0
boolean array udg_ARHas
unit array udg_ARCaster
location array udg_ARTargetPoint
real array udg_ARDelay
integer array udg_ARArrows
integer udg_ARCount= 0
real array udg_ARDamage
group array udg_ARArrowsGroup
integer udg_ARInteger= 0
group array udg_ARArrowsGroup2
integer udg_FAIndex= 0
integer udg_FALastRecycled= 0
integer array udg_FARecycledList
integer udg_FAMax= 0
boolean array udg_FAHas
unit array udg_FACaster
integer udg_FACount= 0
location array udg_FATargetPoint
real array udg_FATimer
real array udg_FADelay
integer udg_FAInteger= 0
hashtable udg_SpellHash= null
integer udg_SF_BouncesNumber= 0
real udg_SF_RangeBetweenBounces= 0
real udg_SF_RangeOfSmallMissiles= 0
integer udg_SF_NumberOfSmallMissiles= 0
real udg_SF_DamageBigMissiles= 0
real udg_SF_DamageSmallMissiles= 0
boolean udg_SF_DestroyTrees= false
unit udg_JDA_Caster= null
location array udg_SF_TempPoint
real udg_JDA_JumpHigh_Distance= 0
boolean udg_JDA_DestroyTrees_Dash= false
location udg_JDA_TargetPoint= null
unit udg_JDA_Unit= null
real udg_JDA_Speed= 0
boolean udg_JDA_SmallFalse_BigTrue= false
integer array udg_JD_Integers
location udg_JD_SmallPoint= null
real array udg_JD_Distances
real array udg_JD_ReachedDistance
real array udg_JD_SpeedUnits
unit array udg_JD_Unit
real array udg_JD_Angle
boolean array udg_JD_TreesDestroy
real array udg_JD_HighSettings
boolean array udg_JD_SmallFalse_BigTrue
unit array udg_JD_Owner
real array udg_JD_DamageBig
real array udg_JD_DamageSmall
integer array udg_JD_BouncesMax
integer array udg_JD_BouncesCur
group udg_JD_Group= null
location array udg_JD_TempPoint
group udg_JD_TempGroup= null
real array udg_JD_RealTimer
integer udg_JD_IntegerAVar= 0
real array udg_JD_JumpHigh
unit udg_GushUnit= null
unit udg_GushTarget= null
location udg_GushPoint= null
unit udg_GushDummy= null
group udg_KrakenGroup= null
integer udg_KrakenCount= 0
integer array udg_KrakenCounterStart
real array udg_KrakenTimeCounter
real array udg_KrakenDamageCount
location udg_AnchorPoint= null
group udg_AnchorGroup= null
unit udg_RavageUnit= null
location udg_RavagePoint= null
unit array udg_RavageDummy
location array udg_RavageDummyPoint
group udg_RavageGroup= null
force udg_RavagePlayer= null
unit udg_RavageTarget= null
location udg_RavageTargetPoint= null
unit udg_RavageStunDummy= null
unit udg_SparkyUnit= null
timerdialog udg_TimeWindow= null
timer udg_Timer= null
real udg_Seconds= 0
integer udg_UDex= 0
integer array udg_UnitIndexLock
integer array udg_UDexPrev
integer array udg_UDexNext
real udg_UnitIndexEvent= 0
unit array udg_UDexUnits
integer udg_UDexRecycle= 0
boolean udg_UnitIndexerEnabled= false
integer udg_UDexWasted= 0
integer udg_UDexGen= 0
integer udg_DamageBlockingAbility= 0
integer udg_SpellDamageAbility= 0
integer udg_DamageTypeExplosive= 0
integer udg_DamageTypeCriticalStrike= 0
integer udg_DamageTypeHeal= 0
integer udg_DamageTypeReduced= 0
integer udg_DamageTypeBlocked= 0
integer udg_DmgEvBracers= 0
real udg_DAMAGE_FACTOR_BRACERS= 0
real udg_DAMAGE_FACTOR_ELUNES= 0
real udg_DAMAGE_FACTOR_ETHEREAL= 0
integer udg_DamageEventAOE= 0
integer udg_DamageEventLevel= 0
real udg_AfterDamageEvent= 0
real udg_DamageEvent= 0
real udg_AOEDamageEvent= 0
real udg_DamageModifierEvent= 0
trigger udg_ClearDamageEvent= null
real udg_DamageEventAmount= 0
real udg_DamageEventPrevAmt= 0
boolean udg_DamageEventOverride= false
boolean udg_NextDamageOverride= false
unit udg_DamageEventSource= null
unit udg_DamageEventTarget= null
trigger udg_DamageEventTrigger= null
trigger udg_DmgEvTrig= null
integer udg_DamageEventType= 0
integer array udg_LastDmgPrevType
integer udg_NextDamageType= 0
integer udg_DamageEventsWasted= 0
integer udg_DmgEvRecursionN= 0
boolean udg_DmgEvRunning= false
boolean udg_DmgEvStarted= false
boolean udg_IsDamageSpell= false
boolean array udg_LastDmgWasSpell
real udg_LastDamageHP= 0
timer udg_DmgEvTimer= null
real array udg_LastDmgPrevAmount
real array udg_LastDmgValue
unit array udg_LastDmgSource
unit array udg_LastDmgTarget
boolean array udg_HideDamageFrom
boolean array udg_UnitDamageRegistered
unit udg_EnhancedDamageTarget= null
group udg_DamageEventAOEGroup= null
real array udg_AMSAmount
real udg_DmgEvMana= 0
integer udg_DmgEvMSlvl= 0
real udg_DmgEvManaMult= 0
integer array udg_UMovNext
integer array udg_UMovPrev
boolean array udg_UnitMoving
real array udg_UnitMovingX
real udg_TempX= 0
real array udg_UnitMovingY
real udg_TempY= 0
real udg_UnitMovingEvent= 0
string udg_AOEString
integer udg_gold= 0
integer udg_Lumber= 0
force udg_tempgroup= null
group udg_Tmp_UnitGroup= null
location udg_Tmp_Loc= null
sound array udg_Arthas1
location udg_rainpoint= null
force udg_playercountgroup= null
force udg_damagegroupvar= null
location udg_Pointofdamage= null
string udg_string
unit udg_Building= null
location udg_pointmap= null
group udg_EvasionGroup= null
group udg_NotEvasionGroup= null
integer udg_EvasionLevel= 0
group udg_worker= null
unit udg_Goldmine= null
location udg_Targetspell= null
real udg_Delayed_Duration= 0
effect udg_Delayed_SFX= null
integer udg_VengeanceAura= 0
group udg_VengeanceGroup= null
group udg_NotVengeanceGroup= null
integer udg_Piercechance= 0
location udg_TempPiercePoint= null
location udg_Arsonnew= null
group udg_RecruitGroup= null
integer udg_RecruitLevel= 0
group udg_NotRecruit= null
location udg_Zombietarget= null
real array udg_DamageTaken
integer array udg_DamageTotalWorkfroce
unit udg_ShieldUnit= null
integer udg_Randomweather= 0
weathereffect udg_Weather_effect= null
integer udg_Randomweather2= 0
hashtable udg_WeatherHash= null
integer array udg_Weather
group udg_Satanicgroup= null
group udg_PedGroup= null
group udg_TentacleGroup= null
group udg_TentacleGroup3= null
group udg_TentacleGroup2= null
hashtable udg_HASHTENTACLE= null
integer udg_Tentacleinteger= 0
integer udg_Tentacleinteger2= 0
location array udg_Tentaclepoint
real array udg_TentacleReal
unit array udg_TentacleTemp
location udg_RecruitPoint= null
group array udg_RecruitUndyingGroup
unit udg_Watcherdamaged= null
integer udg_FalsePromise_Ability= 0
integer array udg_FalsePromise_AbilityLvl
integer udg_FalsePromise_AbiLvl= 0
integer udg_FalsePromise_Buff= 0
real array udg_FalsePromise_Counter
real array udg_FalsePromise_CounterDamage
real array udg_FalsePromise_CounterHeal
real array udg_FalsePromise_Damage
unit array udg_FalsePromise_DamageUnit
real array udg_FalsePromise_Duration
real udg_FalsePromise_Event= 0
hashtable udg_FalsePromise_Hash= null
real array udg_FalsePromise_HealMultiplier
real array udg_FalsePromise_HitPoints
integer udg_FalsePromise_LoopInt= 0
integer udg_FalsePromise_MaxIndex= 0
integer array udg_FalsePromise_NodeNext
integer array udg_FalsePromise_NodePrev
real udg_FalsePromise_PeriodicTimer= 0
integer udg_FalsePromise_RecycledSize= 0
integer array udg_FalsePromise_RecycledStack
string udg_FalsePromise_SFXCredit
string udg_FalsePromise_SFXDamage
string udg_FalsePromise_SFXCredit_AP
string udg_FalsePromise_SFXDamage_AP
string udg_FalsePromise_SFXHeal
string udg_FalsePromise_SFXHeal_AP
string udg_FalsePromise_SFXTarget
string udg_FalsePromise_SFXTarget_AP
integer udg_FalsePromise_Spell_ID= 0
integer udg_FalsePromise_SpellCount= 0
integer array udg_FalsePromise_SpellNode
unit array udg_FalsePromise_Target
effect array udg_FalsePromise_TargetSFX
integer udg_FalsePromise_TempInt= 0
real udg_FalsePromise_TempReal= 0
unit udg_FalsePromise_Unit= null
integer udg_FalsePromise_Unit_ID= 0

    // Generated
sound gg_snd_Arthasrecruited= null
sound gg_snd_Cairnerecruited= null
sound gg_snd_Doom= null
sound gg_snd_FurionRecruited= null
sound gg_snd_GromRecruited= null
sound gg_snd_Jainarecruited= null
sound gg_snd_KelThuzadrecruited= null
sound gg_snd_Muradinrecruited= null
sound gg_snd_Sylvanasrecruited= null
sound gg_snd_ThrallRecruited= null
sound gg_snd_TyrandeRecruited= null
sound gg_snd_Utherrecruited= null
sound gg_snd_NecromancerNoGold1= null
trigger gg_trg_Settings= null
trigger gg_trg_Random_Weather= null
trigger gg_trg_____________________________________002_____________________u= null
trigger gg_trg_____________________________________002= null
trigger gg_trg_False_Promise_Config= null
trigger gg_trg_False_Promise_Cast= null
trigger gg_trg_False_Promise_Loop= null
trigger gg_trg_False_Promise_Damage= null
trigger gg_trg_RecruitGroup= null
trigger gg_trg_____________________________________001= null
trigger gg_trg_Ult2= null
trigger gg_trg_Elf_upgrade= null
trigger gg_trg_Ritual= null
trigger gg_trg_PierceIf= null
trigger gg_trg_PierceUp= null
trigger gg_trg_Pierce= null
trigger gg_trg_FEL_ORC= null
trigger gg_trg_VengeanceAura= null
trigger gg_trg_Tranquility_Arson= null
trigger gg_trg_Arson= null
trigger gg_trg_Warden= null
trigger gg_trg_Watchers= null
trigger gg_trg_Evasion_Aura= null
trigger gg_trg_Evasion_Aura_Level= null
trigger gg_trg_gold= null
trigger gg_trg_Infernal_Rain_on_the_map= null
trigger gg_trg_____________________________________009_____________________u= null
trigger gg_trg_Infernal_Rain= null
trigger gg_trg_Yeger= null
trigger gg_trg_Yeger2= null
trigger gg_trg_Shaman= null
trigger gg_trg_Shaman_copy= null
trigger gg_trg_CCairne_copy= null
trigger gg_trg_Thrall_Copy= null
trigger gg_trg_BM_copy= null
trigger gg_trg_Kael_____________________u= null
trigger gg_trg_Cairne= null
trigger gg_trg_Thrall= null
trigger gg_trg_Grom= null
trigger gg_trg_Kael= null
trigger gg_trg_Muradin= null
trigger gg_trg_Muradin_____________________u= null
trigger gg_trg_Archmage= null
trigger gg_trg_Archmage_____________________u= null
trigger gg_trg_Paladin= null
trigger gg_trg_Paladin_____________________u= null
trigger gg_trg_Sylvanas_quote= null
trigger gg_trg_Muradin_quote= null
trigger gg_trg_Archmage_quote= null
trigger gg_trg_Paladin_quote= null
trigger gg_trg_Cairne_quote= null
trigger gg_trg_Thrall_quote= null
trigger gg_trg_Grom_quote= null
trigger gg_trg_Tyrande_quote= null
trigger gg_trg_Maeve_quote= null
trigger gg_trg_Maeve_quote_____________________u= null
trigger gg_trg_illidan= null
trigger gg_trg_illidan_____________________u= null
trigger gg_trg_Tyrande= null
trigger gg_trg_Tyrande_____________________u= null
trigger gg_trg_Furion= null
trigger gg_trg_Furion_____________________u= null
trigger gg_trg_KelThuzad= null
trigger gg_trg_KelThuzad_____________________u= null
trigger gg_trg_Arthas= null
trigger gg_trg_Arthas_____________________u= null
trigger gg_trg_Furion_quote= null
trigger gg_trg_KelThuzad_quote= null
trigger gg_trg_Arthas_quote= null
trigger gg_trg_HuAl= null
trigger gg_trg_HUAL= null
trigger gg_trg_OrcAl= null
trigger gg_trg_ORCAL= null
trigger gg_trg_Neal= null
trigger gg_trg_NEAL= null
trigger gg_trg_Udal= null
trigger gg_trg_UDAL= null
trigger gg_trg_MTWBE= null
trigger gg_trg_Demon_gate= null
trigger gg_trg_Damage_Tag= null
trigger gg_trg_On_Death= null
trigger gg_trg_Life_Drain_Fix= null
trigger gg_trg_Finger_of_Death_Fix= null
trigger gg_trg_Anti_Magic_Shiled_Var= null
trigger gg_trg_Anti_Magic_Shield_Fix= null
trigger gg_trg_Mana_Shield_Fix= null
trigger gg_trg_Unit_Indexer= null
trigger gg_trg_Damage_Engine_Config= null
trigger gg_trg_Damage_Engine= null
trigger gg_trg_Cast= null
trigger gg_trg_Melee_Initialization= null
trigger gg_trg_____________________________________006= null
trigger gg_trg_Speed_Aura= null
trigger gg_trg_Hashtable= null
trigger gg_trg_Elune_Wrath= null
trigger gg_trg_Elune_Wrath_loop= null
trigger gg_trg_Kraken_Learn= null
trigger gg_trg_Kraken= null
trigger gg_trg_Kraken_Time= null
trigger gg_trg_SKF= null
trigger gg_trg_skf= null
trigger gg_trg_SKF3= null
trigger gg_trg_Initialize= null
trigger gg_trg_Shake_Camera= null
trigger gg_trg_Knockback_Index= null
trigger gg_trg_Knockback_Move= null
trigger gg_trg_Feral_Impact_Index= null
trigger gg_trg_Feral_Impact= null
trigger gg_trg_Feral_Impact_Move= null
trigger gg_trg_Bonebreaker= null
trigger gg_trg_Battle_Fury_Index= null
trigger gg_trg_Battle_Fury= null
trigger gg_trg_Battle_Fury_Downgrade= null
trigger gg_trg_Tornado= null
trigger gg_trg_Tornado_Damage= null
trigger gg_trg_Maelstrom_Config= null
trigger gg_trg_Maelstrom_Cast= null
trigger gg_trg_Maelstrom_Loop= null
trigger gg_trg_____________________________________004= null
trigger gg_trg_____________________________________005= null


//JASSHelper struct globals:

endglobals


//===========================================================================
// 
// Мель Пучины
// 
//   Warcraft III map script
//   Generated by the Warcraft III World Editor
//   Date: Sun Nov 27 19:32:06 2022
//   Map Author: Blizzard Entertainment
// 
//===========================================================================

//***************************************************************************
//*
//*  Global Variables
//*
//***************************************************************************


function InitGlobals takes nothing returns nothing
    local integer i= 0
    set udg_g=0
    set udg_FI_DefaultHeight=0
    set udg_FI_EffectA=""
    set udg_FI_EffectB=""
    set udg_FI_Sound=""
    set udg_BF_DefautInterval=0
    set udg_Shake=0
    set udg_KB_Max=0
    set udg_kb=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_KB_Speed[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_KB_Angle[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_KB_Dist[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_KB_MaxDist[i]=0
        set i=i + 1
    endloop

    set udg_FI_Max=0
    set udg_fi=0
    set udg_tmpDiffHeight=0
    set udg_tmpTargetZ=0
    set udg_tmpCasterZ=0
    set udg_tmpHeight=0
    set udg_tmpDistance=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_FI_z[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_FI_Angle[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_FI_Vz[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_FI_Height[i]=0
        set i=i + 1
    endloop

    set udg_tmpTime=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_FI_Vp[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_FI_AnimSpeed[i]=0
        set i=i + 1
    endloop

    set udg_real2=0
    set udg_real=0
    set udg_FI_FallHeight=0
    set udg_group=CreateGroup()
    set udg_BF_Max=0
    set udg_bf=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_BF_Time[i]=0
        set i=i + 1
    endloop

    set udg_integer=0
    set udg_TO_Max=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_TO_Duration[i]=0
        set i=i + 1
    endloop

    set udg_UM_CustomInteger=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_CoreX[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_CoreY[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_Map[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_MaxDistance[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_MainAngle[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_MatterReturnAngle[i]=0
        set i=i + 1
    endloop

    set udg_UM_AbilityMaxLevel=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_Radius[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_ExplosionRadius[i]=0
        set i=i + 1
    endloop

    set udg_UM_DestroyTrees=false
    set udg_UM_LoopInterval=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_Effect[i]=""
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_EffectAttach[i]=""
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_MainSize[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_MainHeight[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_MainSpeed[i]=0
        set i=i + 1
    endloop

    set udg_UM_MainCreationRange=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_MatterAmount[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_MatterSize[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_MatterHeight[i]=0
        set i=i + 1
    endloop

    set udg_UM_MatterRotation=false
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_MatterRotationAngleSpeed[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_RevolveDuration[i]=0
        set i=i + 1
    endloop

    set udg_UM_MatterMinimumEffect=0
    set udg_UM_MatterMaximumEffect=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_MatterLightningEffect[i]=""
        set i=i + 1
    endloop

    set udg_UM_MatterMinimumLightning=0
    set udg_UM_MatterMaximumLightning=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_MatterLightningWidth[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_MatterLightningDamage[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_MatterReturnTime[i]=0
        set i=i + 1
    endloop

    set udg_UM_MotionEffectChance=0
    set udg_UM_MatterCollideExplosion=false
    set udg_UM_ExplosionOrbsModelSpecific=false
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_ExplosionOrbsAmount[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_ExplosionOrbsSize[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_ExplosionOrbsMinHeight[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_ExplosionOrbsMaxHeight[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_ExplosionOrbsSpeed[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_ExplosionOrbsCollision[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_ExplosionOrbsDamage[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_ExplosionRadiusDamage[i]=0
        set i=i + 1
    endloop

    set udg_UM_ExplosionOrbsArcChance=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_ExplosionOrbsArc[i]=0
        set i=i + 1
    endloop

    set udg_UM_EffectsAmount=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_CustomReal[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_CustomReal2[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_CustomReal3[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_CustomReal4[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_CustomReal5[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_CustomReal6[i]=0
        set i=i + 1
    endloop

    set udg_UM_ID=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_Level[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_CurrentDistance[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_Phase[i]=0
        set i=i + 1
    endloop

    set udg_UM_Group=CreateGroup()
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_MatterAngle[i]=0
        set i=i + 1
    endloop

    set udg_UM_CustomID=0
    set udg_LH_DurationSet=0
    set udg_LH_LightningNameSet=""
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_MatterRevolveAngle[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_RevolveDurationCounter[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_MatterReturnTimeCounter[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_MatterCurrentDistance[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UM_CustomBoolean[i]=false
        set i=i + 1
    endloop

    set udg_LSE_Width=0
    set udg_LSE_Group=CreateGroup()
    set udg_KB3D_Range=0
    set udg_KB3D_Speed=0
    set udg_KB3D_Angle=0
    set udg_KB3D_D_ENEMY=false
    set udg_KB3D_EndFx=""
    set udg_KB3D_AoEEndDamage=0
    set udg_KB3D_EndwhenDead=false
    set udg_KB3D_KillatEnd=false
    set udg_KB3D_AoE=0
    set udg_KB3D_Arc=0
    set udg_KB3D_DestroyTree=false
    set udg_KB3D_DisableUnit=false
    set udg_KB3D_FaceAngle=false
    set udg_KB3D_iKB=false
    set udg_KB3D_JumpOverCliff=false
    set udg_KB3D_Attach=""
    set udg_KB3D_TrailFx=""
    set udg_KB3D_UnpathableStop=false
    set udg_KB3D_Zoffset=0
    set udg_M_Radius=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_M_Damage[i]=0
        set i=i + 1
    endloop

    set udg_M_Denominator=0
    set udg_M_Numerator=0
    set udg_M_Loops=0
    set udg_M_SpeedBase=0
    set udg_M_Speed=0
    set udg_M_AnglePlus=0
    set udg_M_SuckSFX=""
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_M_Duration[i]=0
        set i=i + 1
    endloop

    set udg_M_TornadoSFX=""
    set udg_M_Levels=0
    set udg_M_THandle=0
    set udg_M_TornadoGroup=CreateGroup()
    set udg_M_PickedHandle=0
    set udg_M_VictimGroup=CreateGroup()
    set udg_M_DistanceBase=0
    set udg_M_DamageLoop=0
    set udg_M_Angle=0
    set udg_SD_Distance=0
    set udg_SD_Speed=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_SD_Damage[i]=0
        set i=i + 1
    endloop

    set udg_SD_Animation=""
    set udg_SD_AnimSpeed=0
    set udg_SD_Offset=0
    set udg_SD_Degrees=0
    set udg_SD_SFX1=""
    set udg_SD_SFX2=""
    set udg_SD_IndexSize=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_SD_Index[i]=0
        set i=i + 1
    endloop

    set udg_SD_MaxIndexSize=0
    set udg_SD_TempInt=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_SD_LOA[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_SD_Angle[i]=0
        set i=i + 1
    endloop

    set udg_manaburn=false
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_damage[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_areaofeffect[i]=0
        set i=i + 1
    endloop

    set udg_unitsfx=""
    set udg_orderid=""
    set udg_stormgroup=CreateGroup()
    set udg_boolean=false
    set udg_handle=0
    set udg_level=0
    set udg_TempGroup=CreateForce()
    set udg_TempReal=0
    set udg_TempInt2=0
    set udg_TempInt=0
    set udg_IAIndex=0
    set udg_IALastRecycled=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_IARecycledList[i]=0
        set i=i + 1
    endloop

    set udg_IAMax=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_IAHas[i]=false
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_IAMaxDistance[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_IADistance[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_IADamage[i]=0
        set i=i + 1
    endloop

    set udg_IACount=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_IAAngle[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_IADMGGroup[i]=CreateGroup()
        set i=i + 1
    endloop

    set udg_ARIndex=0
    set udg_ARLastRecycled=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_ARRecycledList[i]=0
        set i=i + 1
    endloop

    set udg_ARMax=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_ARHas[i]=false
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_ARDelay[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_ARArrows[i]=0
        set i=i + 1
    endloop

    set udg_ARCount=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_ARDamage[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_ARArrowsGroup[i]=CreateGroup()
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_ARArrowsGroup2[i]=CreateGroup()
        set i=i + 1
    endloop

    set udg_FAIndex=0
    set udg_FALastRecycled=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_FARecycledList[i]=0
        set i=i + 1
    endloop

    set udg_FAMax=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_FAHas[i]=false
        set i=i + 1
    endloop

    set udg_FACount=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_FATimer[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_FADelay[i]=0
        set i=i + 1
    endloop

    set udg_SF_BouncesNumber=0
    set udg_SF_RangeBetweenBounces=0
    set udg_SF_RangeOfSmallMissiles=0
    set udg_SF_NumberOfSmallMissiles=0
    set udg_SF_DamageBigMissiles=0
    set udg_SF_DamageSmallMissiles=0
    set udg_SF_DestroyTrees=false
    set udg_JDA_JumpHigh_Distance=0
    set udg_JDA_DestroyTrees_Dash=false
    set udg_JDA_Speed=0
    set udg_JDA_SmallFalse_BigTrue=false
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_JD_Integers[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_JD_Distances[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_JD_ReachedDistance[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_JD_SpeedUnits[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_JD_Angle[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_JD_TreesDestroy[i]=false
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_JD_HighSettings[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_JD_SmallFalse_BigTrue[i]=false
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_JD_DamageBig[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_JD_DamageSmall[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_JD_BouncesMax[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_JD_BouncesCur[i]=0
        set i=i + 1
    endloop

    set udg_JD_Group=CreateGroup()
    set udg_JD_TempGroup=CreateGroup()
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_JD_RealTimer[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_JD_JumpHigh[i]=0
        set i=i + 1
    endloop

    set udg_KrakenGroup=CreateGroup()
    set udg_KrakenCount=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_KrakenCounterStart[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_KrakenTimeCounter[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_KrakenDamageCount[i]=0
        set i=i + 1
    endloop

    set udg_AnchorGroup=CreateGroup()
    set udg_RavageGroup=CreateGroup()
    set udg_RavagePlayer=CreateForce()
    set udg_Timer=CreateTimer()
    set udg_Seconds=0
    set udg_UDex=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UnitIndexLock[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UDexPrev[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UDexNext[i]=0
        set i=i + 1
    endloop

    set udg_UnitIndexEvent=0
    set udg_UDexRecycle=0
    set udg_UnitIndexerEnabled=false
    set udg_UDexWasted=0
    set udg_UDexGen=0
    set udg_DamageTypeExplosive=0
    set udg_DamageTypeCriticalStrike=0
    set udg_DamageTypeHeal=0
    set udg_DamageTypeReduced=0
    set udg_DamageTypeBlocked=0
    set udg_DAMAGE_FACTOR_BRACERS=0
    set udg_DAMAGE_FACTOR_ELUNES=0
    set udg_DAMAGE_FACTOR_ETHEREAL=0
    set udg_DamageEventAOE=0
    set udg_DamageEventLevel=0
    set udg_AfterDamageEvent=0
    set udg_DamageEvent=0
    set udg_AOEDamageEvent=0
    set udg_DamageModifierEvent=0
    set udg_DamageEventAmount=0
    set udg_DamageEventPrevAmt=0
    set udg_DamageEventOverride=false
    set udg_NextDamageOverride=false
    set udg_DamageEventType=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_LastDmgPrevType[i]=0
        set i=i + 1
    endloop

    set udg_NextDamageType=0
    set udg_DamageEventsWasted=0
    set udg_DmgEvRecursionN=0
    set udg_DmgEvRunning=false
    set udg_DmgEvStarted=false
    set udg_IsDamageSpell=false
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_LastDmgWasSpell[i]=false
        set i=i + 1
    endloop

    set udg_LastDamageHP=0
    set udg_DmgEvTimer=CreateTimer()
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_LastDmgPrevAmount[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_LastDmgValue[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_HideDamageFrom[i]=false
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UnitDamageRegistered[i]=false
        set i=i + 1
    endloop

    set udg_DamageEventAOEGroup=CreateGroup()
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_AMSAmount[i]=0
        set i=i + 1
    endloop

    set udg_DmgEvMana=0
    set udg_DmgEvMSlvl=0
    set udg_DmgEvManaMult=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UMovNext[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UMovPrev[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UnitMoving[i]=false
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UnitMovingX[i]=0
        set i=i + 1
    endloop

    set udg_TempX=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_UnitMovingY[i]=0
        set i=i + 1
    endloop

    set udg_TempY=0
    set udg_UnitMovingEvent=0
    set udg_AOEString=""
    set udg_gold=0
    set udg_Lumber=0
    set udg_tempgroup=CreateForce()
    set udg_Tmp_UnitGroup=CreateGroup()
    set udg_playercountgroup=CreateForce()
    set udg_damagegroupvar=CreateForce()
    set udg_string=""
    set udg_EvasionGroup=CreateGroup()
    set udg_NotEvasionGroup=CreateGroup()
    set udg_EvasionLevel=0
    set udg_worker=CreateGroup()
    set udg_Delayed_Duration=0
    set udg_VengeanceAura=0
    set udg_VengeanceGroup=CreateGroup()
    set udg_NotVengeanceGroup=CreateGroup()
    set udg_Piercechance=0
    set udg_RecruitGroup=CreateGroup()
    set udg_RecruitLevel=0
    set udg_NotRecruit=CreateGroup()
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_DamageTaken[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_DamageTotalWorkfroce[i]=0
        set i=i + 1
    endloop

    set udg_Randomweather=0
    set udg_Randomweather2=0
    set i=0
    loop
        exitwhen ( i > 14 )
        set udg_Weather[i]=0
        set i=i + 1
    endloop

    set udg_Satanicgroup=CreateGroup()
    set udg_PedGroup=CreateGroup()
    set udg_TentacleGroup=CreateGroup()
    set udg_TentacleGroup3=CreateGroup()
    set udg_TentacleGroup2=CreateGroup()
    set udg_Tentacleinteger=0
    set udg_Tentacleinteger2=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_TentacleReal[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_RecruitUndyingGroup[i]=CreateGroup()
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_FalsePromise_AbilityLvl[i]=0
        set i=i + 1
    endloop

    set udg_FalsePromise_AbiLvl=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_FalsePromise_Counter[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_FalsePromise_CounterDamage[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_FalsePromise_CounterHeal[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_FalsePromise_Damage[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_FalsePromise_Duration[i]=0
        set i=i + 1
    endloop

    set udg_FalsePromise_Event=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_FalsePromise_HealMultiplier[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_FalsePromise_HitPoints[i]=0
        set i=i + 1
    endloop

    set udg_FalsePromise_LoopInt=0
    set udg_FalsePromise_MaxIndex=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_FalsePromise_NodeNext[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_FalsePromise_NodePrev[i]=0
        set i=i + 1
    endloop

    set udg_FalsePromise_PeriodicTimer=0
    set udg_FalsePromise_RecycledSize=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_FalsePromise_RecycledStack[i]=0
        set i=i + 1
    endloop

    set udg_FalsePromise_SFXCredit=""
    set udg_FalsePromise_SFXDamage=""
    set udg_FalsePromise_SFXCredit_AP=""
    set udg_FalsePromise_SFXDamage_AP=""
    set udg_FalsePromise_SFXHeal=""
    set udg_FalsePromise_SFXHeal_AP=""
    set udg_FalsePromise_SFXTarget=""
    set udg_FalsePromise_SFXTarget_AP=""
    set udg_FalsePromise_Spell_ID=0
    set udg_FalsePromise_SpellCount=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_FalsePromise_SpellNode[i]=0
        set i=i + 1
    endloop

    set udg_FalsePromise_TempInt=0
    set udg_FalsePromise_TempReal=0
    set udg_FalsePromise_Unit_ID=0
endfunction

//***************************************************************************
//*
//*  Unit Item Tables
//*
//***************************************************************************

function Unit000015_DropItems takes nothing returns nothing
    local widget trigWidget= null
    local unit trigUnit= null
    local integer itemID= 0
    local boolean canDrop= true

    set trigWidget=bj_lastDyingWidget
    if ( trigWidget == null ) then
        set trigUnit=GetTriggerUnit()
    endif

    if ( trigUnit != null ) then
        set canDrop=not IsUnitHidden(trigUnit)
        if ( canDrop and GetChangingUnit() != null ) then
            set canDrop=( GetChangingUnitPrevOwner() == Player(PLAYER_NEUTRAL_AGGRESSIVE) )
        endif
    endif

    if ( canDrop ) then
        // Item set 0
        call RandomDistReset()
        call RandomDistAddItem(ChooseRandomItemEx(ITEM_TYPE_PERMANENT, 3), 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

        // Item set 1
        call RandomDistReset()
        call RandomDistAddItem(ChooseRandomItemEx(ITEM_TYPE_PERMANENT, 1), 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

    endif

    set bj_lastDyingWidget=null
    call DestroyTrigger(GetTriggeringTrigger())
endfunction

function Unit000021_DropItems takes nothing returns nothing
    local widget trigWidget= null
    local unit trigUnit= null
    local integer itemID= 0
    local boolean canDrop= true

    set trigWidget=bj_lastDyingWidget
    if ( trigWidget == null ) then
        set trigUnit=GetTriggerUnit()
    endif

    if ( trigUnit != null ) then
        set canDrop=not IsUnitHidden(trigUnit)
        if ( canDrop and GetChangingUnit() != null ) then
            set canDrop=( GetChangingUnitPrevOwner() == Player(PLAYER_NEUTRAL_AGGRESSIVE) )
        endif
    endif

    if ( canDrop ) then
        // Item set 0
        call RandomDistReset()
        call RandomDistAddItem(ChooseRandomItemEx(ITEM_TYPE_PERMANENT, 3), 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

        // Item set 1
        call RandomDistReset()
        call RandomDistAddItem(ChooseRandomItemEx(ITEM_TYPE_POWERUP, 1), 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

    endif

    set bj_lastDyingWidget=null
    call DestroyTrigger(GetTriggeringTrigger())
endfunction

function Unit000024_DropItems takes nothing returns nothing
    local widget trigWidget= null
    local unit trigUnit= null
    local integer itemID= 0
    local boolean canDrop= true

    set trigWidget=bj_lastDyingWidget
    if ( trigWidget == null ) then
        set trigUnit=GetTriggerUnit()
    endif

    if ( trigUnit != null ) then
        set canDrop=not IsUnitHidden(trigUnit)
        if ( canDrop and GetChangingUnit() != null ) then
            set canDrop=( GetChangingUnitPrevOwner() == Player(PLAYER_NEUTRAL_AGGRESSIVE) )
        endif
    endif

    if ( canDrop ) then
        // Item set 0
        call RandomDistReset()
        call RandomDistAddItem(ChooseRandomItemEx(ITEM_TYPE_PERMANENT, 2), 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

    endif

    set bj_lastDyingWidget=null
    call DestroyTrigger(GetTriggeringTrigger())
endfunction

function Unit000025_DropItems takes nothing returns nothing
    local widget trigWidget= null
    local unit trigUnit= null
    local integer itemID= 0
    local boolean canDrop= true

    set trigWidget=bj_lastDyingWidget
    if ( trigWidget == null ) then
        set trigUnit=GetTriggerUnit()
    endif

    if ( trigUnit != null ) then
        set canDrop=not IsUnitHidden(trigUnit)
        if ( canDrop and GetChangingUnit() != null ) then
            set canDrop=( GetChangingUnitPrevOwner() == Player(PLAYER_NEUTRAL_AGGRESSIVE) )
        endif
    endif

    if ( canDrop ) then
        // Item set 0
        call RandomDistReset()
        call RandomDistAddItem(ChooseRandomItemEx(ITEM_TYPE_PERMANENT, 3), 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

        // Item set 1
        call RandomDistReset()
        call RandomDistAddItem(ChooseRandomItemEx(ITEM_TYPE_POWERUP, 1), 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

    endif

    set bj_lastDyingWidget=null
    call DestroyTrigger(GetTriggeringTrigger())
endfunction

function Unit000033_DropItems takes nothing returns nothing
    local widget trigWidget= null
    local unit trigUnit= null
    local integer itemID= 0
    local boolean canDrop= true

    set trigWidget=bj_lastDyingWidget
    if ( trigWidget == null ) then
        set trigUnit=GetTriggerUnit()
    endif

    if ( trigUnit != null ) then
        set canDrop=not IsUnitHidden(trigUnit)
        if ( canDrop and GetChangingUnit() != null ) then
            set canDrop=( GetChangingUnitPrevOwner() == Player(PLAYER_NEUTRAL_AGGRESSIVE) )
        endif
    endif

    if ( canDrop ) then
        // Item set 0
        call RandomDistReset()
        call RandomDistAddItem(ChooseRandomItemEx(ITEM_TYPE_PERMANENT, 3), 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

        // Item set 1
        call RandomDistReset()
        call RandomDistAddItem(ChooseRandomItemEx(ITEM_TYPE_POWERUP, 1), 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

    endif

    set bj_lastDyingWidget=null
    call DestroyTrigger(GetTriggeringTrigger())
endfunction

function Unit000050_DropItems takes nothing returns nothing
    local widget trigWidget= null
    local unit trigUnit= null
    local integer itemID= 0
    local boolean canDrop= true

    set trigWidget=bj_lastDyingWidget
    if ( trigWidget == null ) then
        set trigUnit=GetTriggerUnit()
    endif

    if ( trigUnit != null ) then
        set canDrop=not IsUnitHidden(trigUnit)
        if ( canDrop and GetChangingUnit() != null ) then
            set canDrop=( GetChangingUnitPrevOwner() == Player(PLAYER_NEUTRAL_AGGRESSIVE) )
        endif
    endif

    if ( canDrop ) then
        // Item set 0
        call RandomDistReset()
        call RandomDistAddItem(ChooseRandomItemEx(ITEM_TYPE_PERMANENT, 3), 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

        // Item set 1
        call RandomDistReset()
        call RandomDistAddItem(ChooseRandomItemEx(ITEM_TYPE_POWERUP, 1), 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

    endif

    set bj_lastDyingWidget=null
    call DestroyTrigger(GetTriggeringTrigger())
endfunction

function Unit000053_DropItems takes nothing returns nothing
    local widget trigWidget= null
    local unit trigUnit= null
    local integer itemID= 0
    local boolean canDrop= true

    set trigWidget=bj_lastDyingWidget
    if ( trigWidget == null ) then
        set trigUnit=GetTriggerUnit()
    endif

    if ( trigUnit != null ) then
        set canDrop=not IsUnitHidden(trigUnit)
        if ( canDrop and GetChangingUnit() != null ) then
            set canDrop=( GetChangingUnitPrevOwner() == Player(PLAYER_NEUTRAL_AGGRESSIVE) )
        endif
    endif

    if ( canDrop ) then
        // Item set 0
        call RandomDistReset()
        call RandomDistAddItem(ChooseRandomItemEx(ITEM_TYPE_PERMANENT, 2), 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

    endif

    set bj_lastDyingWidget=null
    call DestroyTrigger(GetTriggeringTrigger())
endfunction

function Unit000064_DropItems takes nothing returns nothing
    local widget trigWidget= null
    local unit trigUnit= null
    local integer itemID= 0
    local boolean canDrop= true

    set trigWidget=bj_lastDyingWidget
    if ( trigWidget == null ) then
        set trigUnit=GetTriggerUnit()
    endif

    if ( trigUnit != null ) then
        set canDrop=not IsUnitHidden(trigUnit)
        if ( canDrop and GetChangingUnit() != null ) then
            set canDrop=( GetChangingUnitPrevOwner() == Player(PLAYER_NEUTRAL_AGGRESSIVE) )
        endif
    endif

    if ( canDrop ) then
        // Item set 0
        call RandomDistReset()
        call RandomDistAddItem(ChooseRandomItemEx(ITEM_TYPE_PERMANENT, 1), 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

    endif

    set bj_lastDyingWidget=null
    call DestroyTrigger(GetTriggeringTrigger())
endfunction

function Unit000065_DropItems takes nothing returns nothing
    local widget trigWidget= null
    local unit trigUnit= null
    local integer itemID= 0
    local boolean canDrop= true

    set trigWidget=bj_lastDyingWidget
    if ( trigWidget == null ) then
        set trigUnit=GetTriggerUnit()
    endif

    if ( trigUnit != null ) then
        set canDrop=not IsUnitHidden(trigUnit)
        if ( canDrop and GetChangingUnit() != null ) then
            set canDrop=( GetChangingUnitPrevOwner() == Player(PLAYER_NEUTRAL_AGGRESSIVE) )
        endif
    endif

    if ( canDrop ) then
        // Item set 0
        call RandomDistReset()
        call RandomDistAddItem(ChooseRandomItemEx(ITEM_TYPE_PERMANENT, 4), 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

    endif

    set bj_lastDyingWidget=null
    call DestroyTrigger(GetTriggeringTrigger())
endfunction

function Unit000066_DropItems takes nothing returns nothing
    local widget trigWidget= null
    local unit trigUnit= null
    local integer itemID= 0
    local boolean canDrop= true

    set trigWidget=bj_lastDyingWidget
    if ( trigWidget == null ) then
        set trigUnit=GetTriggerUnit()
    endif

    if ( trigUnit != null ) then
        set canDrop=not IsUnitHidden(trigUnit)
        if ( canDrop and GetChangingUnit() != null ) then
            set canDrop=( GetChangingUnitPrevOwner() == Player(PLAYER_NEUTRAL_AGGRESSIVE) )
        endif
    endif

    if ( canDrop ) then
        // Item set 0
        call RandomDistReset()
        call RandomDistAddItem(ChooseRandomItemEx(ITEM_TYPE_PERMANENT, 4), 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

    endif

    set bj_lastDyingWidget=null
    call DestroyTrigger(GetTriggeringTrigger())
endfunction

function Unit000071_DropItems takes nothing returns nothing
    local widget trigWidget= null
    local unit trigUnit= null
    local integer itemID= 0
    local boolean canDrop= true

    set trigWidget=bj_lastDyingWidget
    if ( trigWidget == null ) then
        set trigUnit=GetTriggerUnit()
    endif

    if ( trigUnit != null ) then
        set canDrop=not IsUnitHidden(trigUnit)
        if ( canDrop and GetChangingUnit() != null ) then
            set canDrop=( GetChangingUnitPrevOwner() == Player(PLAYER_NEUTRAL_AGGRESSIVE) )
        endif
    endif

    if ( canDrop ) then
        // Item set 0
        call RandomDistReset()
        call RandomDistAddItem(ChooseRandomItemEx(ITEM_TYPE_PERMANENT, 2), 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

    endif

    set bj_lastDyingWidget=null
    call DestroyTrigger(GetTriggeringTrigger())
endfunction

function Unit000073_DropItems takes nothing returns nothing
    local widget trigWidget= null
    local unit trigUnit= null
    local integer itemID= 0
    local boolean canDrop= true

    set trigWidget=bj_lastDyingWidget
    if ( trigWidget == null ) then
        set trigUnit=GetTriggerUnit()
    endif

    if ( trigUnit != null ) then
        set canDrop=not IsUnitHidden(trigUnit)
        if ( canDrop and GetChangingUnit() != null ) then
            set canDrop=( GetChangingUnitPrevOwner() == Player(PLAYER_NEUTRAL_AGGRESSIVE) )
        endif
    endif

    if ( canDrop ) then
        // Item set 0
        call RandomDistReset()
        call RandomDistAddItem(ChooseRandomItemEx(ITEM_TYPE_PERMANENT, 1), 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

    endif

    set bj_lastDyingWidget=null
    call DestroyTrigger(GetTriggeringTrigger())
endfunction

function Unit000074_DropItems takes nothing returns nothing
    local widget trigWidget= null
    local unit trigUnit= null
    local integer itemID= 0
    local boolean canDrop= true

    set trigWidget=bj_lastDyingWidget
    if ( trigWidget == null ) then
        set trigUnit=GetTriggerUnit()
    endif

    if ( trigUnit != null ) then
        set canDrop=not IsUnitHidden(trigUnit)
        if ( canDrop and GetChangingUnit() != null ) then
            set canDrop=( GetChangingUnitPrevOwner() == Player(PLAYER_NEUTRAL_AGGRESSIVE) )
        endif
    endif

    if ( canDrop ) then
        // Item set 0
        call RandomDistReset()
        call RandomDistAddItem(ChooseRandomItemEx(ITEM_TYPE_PERMANENT, 3), 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

        // Item set 1
        call RandomDistReset()
        call RandomDistAddItem(ChooseRandomItemEx(ITEM_TYPE_PERMANENT, 1), 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

    endif

    set bj_lastDyingWidget=null
    call DestroyTrigger(GetTriggeringTrigger())
endfunction

function Unit000080_DropItems takes nothing returns nothing
    local widget trigWidget= null
    local unit trigUnit= null
    local integer itemID= 0
    local boolean canDrop= true

    set trigWidget=bj_lastDyingWidget
    if ( trigWidget == null ) then
        set trigUnit=GetTriggerUnit()
    endif

    if ( trigUnit != null ) then
        set canDrop=not IsUnitHidden(trigUnit)
        if ( canDrop and GetChangingUnit() != null ) then
            set canDrop=( GetChangingUnitPrevOwner() == Player(PLAYER_NEUTRAL_AGGRESSIVE) )
        endif
    endif

    if ( canDrop ) then
        // Item set 0
        call RandomDistReset()
        call RandomDistAddItem(ChooseRandomItemEx(ITEM_TYPE_PERMANENT, 3), 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

        // Item set 1
        call RandomDistReset()
        call RandomDistAddItem(ChooseRandomItemEx(ITEM_TYPE_PERMANENT, 1), 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

    endif

    set bj_lastDyingWidget=null
    call DestroyTrigger(GetTriggeringTrigger())
endfunction

function Unit000085_DropItems takes nothing returns nothing
    local widget trigWidget= null
    local unit trigUnit= null
    local integer itemID= 0
    local boolean canDrop= true

    set trigWidget=bj_lastDyingWidget
    if ( trigWidget == null ) then
        set trigUnit=GetTriggerUnit()
    endif

    if ( trigUnit != null ) then
        set canDrop=not IsUnitHidden(trigUnit)
        if ( canDrop and GetChangingUnit() != null ) then
            set canDrop=( GetChangingUnitPrevOwner() == Player(PLAYER_NEUTRAL_AGGRESSIVE) )
        endif
    endif

    if ( canDrop ) then
        // Item set 0
        call RandomDistReset()
        call RandomDistAddItem(ChooseRandomItemEx(ITEM_TYPE_PERMANENT, 1), 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

    endif

    set bj_lastDyingWidget=null
    call DestroyTrigger(GetTriggeringTrigger())
endfunction

function Unit000086_DropItems takes nothing returns nothing
    local widget trigWidget= null
    local unit trigUnit= null
    local integer itemID= 0
    local boolean canDrop= true

    set trigWidget=bj_lastDyingWidget
    if ( trigWidget == null ) then
        set trigUnit=GetTriggerUnit()
    endif

    if ( trigUnit != null ) then
        set canDrop=not IsUnitHidden(trigUnit)
        if ( canDrop and GetChangingUnit() != null ) then
            set canDrop=( GetChangingUnitPrevOwner() == Player(PLAYER_NEUTRAL_AGGRESSIVE) )
        endif
    endif

    if ( canDrop ) then
        // Item set 0
        call RandomDistReset()
        call RandomDistAddItem(ChooseRandomItemEx(ITEM_TYPE_PERMANENT, 3), 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

        // Item set 1
        call RandomDistReset()
        call RandomDistAddItem(ChooseRandomItemEx(ITEM_TYPE_POWERUP, 1), 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

    endif

    set bj_lastDyingWidget=null
    call DestroyTrigger(GetTriggeringTrigger())
endfunction

function Unit000090_DropItems takes nothing returns nothing
    local widget trigWidget= null
    local unit trigUnit= null
    local integer itemID= 0
    local boolean canDrop= true

    set trigWidget=bj_lastDyingWidget
    if ( trigWidget == null ) then
        set trigUnit=GetTriggerUnit()
    endif

    if ( trigUnit != null ) then
        set canDrop=not IsUnitHidden(trigUnit)
        if ( canDrop and GetChangingUnit() != null ) then
            set canDrop=( GetChangingUnitPrevOwner() == Player(PLAYER_NEUTRAL_AGGRESSIVE) )
        endif
    endif

    if ( canDrop ) then
        // Item set 0
        call RandomDistReset()
        call RandomDistAddItem(ChooseRandomItemEx(ITEM_TYPE_PERMANENT, 3), 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

        // Item set 1
        call RandomDistReset()
        call RandomDistAddItem(ChooseRandomItemEx(ITEM_TYPE_PERMANENT, 1), 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

    endif

    set bj_lastDyingWidget=null
    call DestroyTrigger(GetTriggeringTrigger())
endfunction

function Unit000098_DropItems takes nothing returns nothing
    local widget trigWidget= null
    local unit trigUnit= null
    local integer itemID= 0
    local boolean canDrop= true

    set trigWidget=bj_lastDyingWidget
    if ( trigWidget == null ) then
        set trigUnit=GetTriggerUnit()
    endif

    if ( trigUnit != null ) then
        set canDrop=not IsUnitHidden(trigUnit)
        if ( canDrop and GetChangingUnit() != null ) then
            set canDrop=( GetChangingUnitPrevOwner() == Player(PLAYER_NEUTRAL_AGGRESSIVE) )
        endif
    endif

    if ( canDrop ) then
        // Item set 0
        call RandomDistReset()
        call RandomDistAddItem(ChooseRandomItemEx(ITEM_TYPE_PERMANENT, 4), 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

    endif

    set bj_lastDyingWidget=null
    call DestroyTrigger(GetTriggeringTrigger())
endfunction

function Unit000102_DropItems takes nothing returns nothing
    local widget trigWidget= null
    local unit trigUnit= null
    local integer itemID= 0
    local boolean canDrop= true

    set trigWidget=bj_lastDyingWidget
    if ( trigWidget == null ) then
        set trigUnit=GetTriggerUnit()
    endif

    if ( trigUnit != null ) then
        set canDrop=not IsUnitHidden(trigUnit)
        if ( canDrop and GetChangingUnit() != null ) then
            set canDrop=( GetChangingUnitPrevOwner() == Player(PLAYER_NEUTRAL_AGGRESSIVE) )
        endif
    endif

    if ( canDrop ) then
        // Item set 0
        call RandomDistReset()
        call RandomDistAddItem(ChooseRandomItemEx(ITEM_TYPE_PERMANENT, 4), 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

    endif

    set bj_lastDyingWidget=null
    call DestroyTrigger(GetTriggeringTrigger())
endfunction

function Unit000119_DropItems takes nothing returns nothing
    local widget trigWidget= null
    local unit trigUnit= null
    local integer itemID= 0
    local boolean canDrop= true

    set trigWidget=bj_lastDyingWidget
    if ( trigWidget == null ) then
        set trigUnit=GetTriggerUnit()
    endif

    if ( trigUnit != null ) then
        set canDrop=not IsUnitHidden(trigUnit)
        if ( canDrop and GetChangingUnit() != null ) then
            set canDrop=( GetChangingUnitPrevOwner() == Player(PLAYER_NEUTRAL_AGGRESSIVE) )
        endif
    endif

    if ( canDrop ) then
        // Item set 0
        call RandomDistReset()
        call RandomDistAddItem(ChooseRandomItemEx(ITEM_TYPE_PERMANENT, 1), 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

    endif

    set bj_lastDyingWidget=null
    call DestroyTrigger(GetTriggeringTrigger())
endfunction

function Unit000126_DropItems takes nothing returns nothing
    local widget trigWidget= null
    local unit trigUnit= null
    local integer itemID= 0
    local boolean canDrop= true

    set trigWidget=bj_lastDyingWidget
    if ( trigWidget == null ) then
        set trigUnit=GetTriggerUnit()
    endif

    if ( trigUnit != null ) then
        set canDrop=not IsUnitHidden(trigUnit)
        if ( canDrop and GetChangingUnit() != null ) then
            set canDrop=( GetChangingUnitPrevOwner() == Player(PLAYER_NEUTRAL_AGGRESSIVE) )
        endif
    endif

    if ( canDrop ) then
        // Item set 0
        call RandomDistReset()
        call RandomDistAddItem(ChooseRandomItemEx(ITEM_TYPE_PERMANENT, 5), 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

    endif

    set bj_lastDyingWidget=null
    call DestroyTrigger(GetTriggeringTrigger())
endfunction

function Unit000140_DropItems takes nothing returns nothing
    local widget trigWidget= null
    local unit trigUnit= null
    local integer itemID= 0
    local boolean canDrop= true

    set trigWidget=bj_lastDyingWidget
    if ( trigWidget == null ) then
        set trigUnit=GetTriggerUnit()
    endif

    if ( trigUnit != null ) then
        set canDrop=not IsUnitHidden(trigUnit)
        if ( canDrop and GetChangingUnit() != null ) then
            set canDrop=( GetChangingUnitPrevOwner() == Player(PLAYER_NEUTRAL_AGGRESSIVE) )
        endif
    endif

    if ( canDrop ) then
        // Item set 0
        call RandomDistReset()
        call RandomDistAddItem('odef', 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

    endif

    set bj_lastDyingWidget=null
    call DestroyTrigger(GetTriggeringTrigger())
endfunction

function Unit000146_DropItems takes nothing returns nothing
    local widget trigWidget= null
    local unit trigUnit= null
    local integer itemID= 0
    local boolean canDrop= true

    set trigWidget=bj_lastDyingWidget
    if ( trigWidget == null ) then
        set trigUnit=GetTriggerUnit()
    endif

    if ( trigUnit != null ) then
        set canDrop=not IsUnitHidden(trigUnit)
        if ( canDrop and GetChangingUnit() != null ) then
            set canDrop=( GetChangingUnitPrevOwner() == Player(PLAYER_NEUTRAL_AGGRESSIVE) )
        endif
    endif

    if ( canDrop ) then
        // Item set 0
        call RandomDistReset()
        call RandomDistAddItem(ChooseRandomItemEx(ITEM_TYPE_PERMANENT, 2), 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

    endif

    set bj_lastDyingWidget=null
    call DestroyTrigger(GetTriggeringTrigger())
endfunction

function Unit000165_DropItems takes nothing returns nothing
    local widget trigWidget= null
    local unit trigUnit= null
    local integer itemID= 0
    local boolean canDrop= true

    set trigWidget=bj_lastDyingWidget
    if ( trigWidget == null ) then
        set trigUnit=GetTriggerUnit()
    endif

    if ( trigUnit != null ) then
        set canDrop=not IsUnitHidden(trigUnit)
        if ( canDrop and GetChangingUnit() != null ) then
            set canDrop=( GetChangingUnitPrevOwner() == Player(PLAYER_NEUTRAL_AGGRESSIVE) )
        endif
    endif

    if ( canDrop ) then
        // Item set 0
        call RandomDistReset()
        call RandomDistAddItem(ChooseRandomItemEx(ITEM_TYPE_PERMANENT, 2), 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

    endif

    set bj_lastDyingWidget=null
    call DestroyTrigger(GetTriggeringTrigger())
endfunction

function Unit000176_DropItems takes nothing returns nothing
    local widget trigWidget= null
    local unit trigUnit= null
    local integer itemID= 0
    local boolean canDrop= true

    set trigWidget=bj_lastDyingWidget
    if ( trigWidget == null ) then
        set trigUnit=GetTriggerUnit()
    endif

    if ( trigUnit != null ) then
        set canDrop=not IsUnitHidden(trigUnit)
        if ( canDrop and GetChangingUnit() != null ) then
            set canDrop=( GetChangingUnitPrevOwner() == Player(PLAYER_NEUTRAL_AGGRESSIVE) )
        endif
    endif

    if ( canDrop ) then
        // Item set 0
        call RandomDistReset()
        call RandomDistAddItem(ChooseRandomItemEx(ITEM_TYPE_ANY, 4), 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

    endif

    set bj_lastDyingWidget=null
    call DestroyTrigger(GetTriggeringTrigger())
endfunction

function Unit000177_DropItems takes nothing returns nothing
    local widget trigWidget= null
    local unit trigUnit= null
    local integer itemID= 0
    local boolean canDrop= true

    set trigWidget=bj_lastDyingWidget
    if ( trigWidget == null ) then
        set trigUnit=GetTriggerUnit()
    endif

    if ( trigUnit != null ) then
        set canDrop=not IsUnitHidden(trigUnit)
        if ( canDrop and GetChangingUnit() != null ) then
            set canDrop=( GetChangingUnitPrevOwner() == Player(PLAYER_NEUTRAL_AGGRESSIVE) )
        endif
    endif

    if ( canDrop ) then
        // Item set 0
        call RandomDistReset()
        call RandomDistAddItem(ChooseRandomItemEx(ITEM_TYPE_PERMANENT, 4), 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

    endif

    set bj_lastDyingWidget=null
    call DestroyTrigger(GetTriggeringTrigger())
endfunction

function Unit000179_DropItems takes nothing returns nothing
    local widget trigWidget= null
    local unit trigUnit= null
    local integer itemID= 0
    local boolean canDrop= true

    set trigWidget=bj_lastDyingWidget
    if ( trigWidget == null ) then
        set trigUnit=GetTriggerUnit()
    endif

    if ( trigUnit != null ) then
        set canDrop=not IsUnitHidden(trigUnit)
        if ( canDrop and GetChangingUnit() != null ) then
            set canDrop=( GetChangingUnitPrevOwner() == Player(PLAYER_NEUTRAL_AGGRESSIVE) )
        endif
    endif

    if ( canDrop ) then
        // Item set 0
        call RandomDistReset()
        call RandomDistAddItem(ChooseRandomItemEx(ITEM_TYPE_PERMANENT, 2), 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

    endif

    set bj_lastDyingWidget=null
    call DestroyTrigger(GetTriggeringTrigger())
endfunction

function Unit000186_DropItems takes nothing returns nothing
    local widget trigWidget= null
    local unit trigUnit= null
    local integer itemID= 0
    local boolean canDrop= true

    set trigWidget=bj_lastDyingWidget
    if ( trigWidget == null ) then
        set trigUnit=GetTriggerUnit()
    endif

    if ( trigUnit != null ) then
        set canDrop=not IsUnitHidden(trigUnit)
        if ( canDrop and GetChangingUnit() != null ) then
            set canDrop=( GetChangingUnitPrevOwner() == Player(PLAYER_NEUTRAL_AGGRESSIVE) )
        endif
    endif

    if ( canDrop ) then
        // Item set 0
        call RandomDistReset()
        call RandomDistAddItem(ChooseRandomItemEx(ITEM_TYPE_PERMANENT, 4), 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

    endif

    set bj_lastDyingWidget=null
    call DestroyTrigger(GetTriggeringTrigger())
endfunction

function Unit000187_DropItems takes nothing returns nothing
    local widget trigWidget= null
    local unit trigUnit= null
    local integer itemID= 0
    local boolean canDrop= true

    set trigWidget=bj_lastDyingWidget
    if ( trigWidget == null ) then
        set trigUnit=GetTriggerUnit()
    endif

    if ( trigUnit != null ) then
        set canDrop=not IsUnitHidden(trigUnit)
        if ( canDrop and GetChangingUnit() != null ) then
            set canDrop=( GetChangingUnitPrevOwner() == Player(PLAYER_NEUTRAL_AGGRESSIVE) )
        endif
    endif

    if ( canDrop ) then
        // Item set 0
        call RandomDistReset()
        call RandomDistAddItem(ChooseRandomItemEx(ITEM_TYPE_ANY, 7), 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

    endif

    set bj_lastDyingWidget=null
    call DestroyTrigger(GetTriggeringTrigger())
endfunction

function Unit000188_DropItems takes nothing returns nothing
    local widget trigWidget= null
    local unit trigUnit= null
    local integer itemID= 0
    local boolean canDrop= true

    set trigWidget=bj_lastDyingWidget
    if ( trigWidget == null ) then
        set trigUnit=GetTriggerUnit()
    endif

    if ( trigUnit != null ) then
        set canDrop=not IsUnitHidden(trigUnit)
        if ( canDrop and GetChangingUnit() != null ) then
            set canDrop=( GetChangingUnitPrevOwner() == Player(PLAYER_NEUTRAL_AGGRESSIVE) )
        endif
    endif

    if ( canDrop ) then
        // Item set 0
        call RandomDistReset()
        call RandomDistAddItem(ChooseRandomItemEx(ITEM_TYPE_ANY, 8), 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

    endif

    set bj_lastDyingWidget=null
    call DestroyTrigger(GetTriggeringTrigger())
endfunction

function Unit000194_DropItems takes nothing returns nothing
    local widget trigWidget= null
    local unit trigUnit= null
    local integer itemID= 0
    local boolean canDrop= true

    set trigWidget=bj_lastDyingWidget
    if ( trigWidget == null ) then
        set trigUnit=GetTriggerUnit()
    endif

    if ( trigUnit != null ) then
        set canDrop=not IsUnitHidden(trigUnit)
        if ( canDrop and GetChangingUnit() != null ) then
            set canDrop=( GetChangingUnitPrevOwner() == Player(PLAYER_NEUTRAL_AGGRESSIVE) )
        endif
    endif

    if ( canDrop ) then
        // Item set 0
        call RandomDistReset()
        call RandomDistAddItem(ChooseRandomItemEx(ITEM_TYPE_PERMANENT, 3), 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

        // Item set 1
        call RandomDistReset()
        call RandomDistAddItem(ChooseRandomItemEx(ITEM_TYPE_POWERUP, 1), 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

    endif

    set bj_lastDyingWidget=null
    call DestroyTrigger(GetTriggeringTrigger())
endfunction

function Unit000197_DropItems takes nothing returns nothing
    local widget trigWidget= null
    local unit trigUnit= null
    local integer itemID= 0
    local boolean canDrop= true

    set trigWidget=bj_lastDyingWidget
    if ( trigWidget == null ) then
        set trigUnit=GetTriggerUnit()
    endif

    if ( trigUnit != null ) then
        set canDrop=not IsUnitHidden(trigUnit)
        if ( canDrop and GetChangingUnit() != null ) then
            set canDrop=( GetChangingUnitPrevOwner() == Player(PLAYER_NEUTRAL_AGGRESSIVE) )
        endif
    endif

    if ( canDrop ) then
        // Item set 0
        call RandomDistReset()
        call RandomDistAddItem(ChooseRandomItemEx(ITEM_TYPE_ANY, 7), 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

    endif

    set bj_lastDyingWidget=null
    call DestroyTrigger(GetTriggeringTrigger())
endfunction

function Unit000212_DropItems takes nothing returns nothing
    local widget trigWidget= null
    local unit trigUnit= null
    local integer itemID= 0
    local boolean canDrop= true

    set trigWidget=bj_lastDyingWidget
    if ( trigWidget == null ) then
        set trigUnit=GetTriggerUnit()
    endif

    if ( trigUnit != null ) then
        set canDrop=not IsUnitHidden(trigUnit)
        if ( canDrop and GetChangingUnit() != null ) then
            set canDrop=( GetChangingUnitPrevOwner() == Player(PLAYER_NEUTRAL_AGGRESSIVE) )
        endif
    endif

    if ( canDrop ) then
        // Item set 0
        call RandomDistReset()
        call RandomDistAddItem('ckng', 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

    endif

    set bj_lastDyingWidget=null
    call DestroyTrigger(GetTriggeringTrigger())
endfunction

function Unit000218_DropItems takes nothing returns nothing
    local widget trigWidget= null
    local unit trigUnit= null
    local integer itemID= 0
    local boolean canDrop= true

    set trigWidget=bj_lastDyingWidget
    if ( trigWidget == null ) then
        set trigUnit=GetTriggerUnit()
    endif

    if ( trigUnit != null ) then
        set canDrop=not IsUnitHidden(trigUnit)
        if ( canDrop and GetChangingUnit() != null ) then
            set canDrop=( GetChangingUnitPrevOwner() == Player(PLAYER_NEUTRAL_AGGRESSIVE) )
        endif
    endif

    if ( canDrop ) then
        // Item set 0
        call RandomDistReset()
        call RandomDistAddItem(ChooseRandomItemEx(ITEM_TYPE_ANY, 7), 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

    endif

    set bj_lastDyingWidget=null
    call DestroyTrigger(GetTriggeringTrigger())
endfunction


//***************************************************************************
//*
//*  Sounds
//*
//***************************************************************************

function InitSounds takes nothing returns nothing
    set gg_snd_Arthasrecruited=CreateSound("war3mapImported\\Arthasrecruited.mp3", false, false, false, 10, 10, "")
    call SetSoundDuration(gg_snd_Arthasrecruited, 3265)
    call SetSoundChannel(gg_snd_Arthasrecruited, 0)
    call SetSoundVolume(gg_snd_Arthasrecruited, 127)
    call SetSoundPitch(gg_snd_Arthasrecruited, 1.0)
    set gg_snd_Cairnerecruited=CreateSound("war3mapImported\\Cairnerecruited.mp3", false, false, false, 10, 10, "")
    call SetSoundDuration(gg_snd_Cairnerecruited, 5784)
    call SetSoundChannel(gg_snd_Cairnerecruited, 0)
    call SetSoundVolume(gg_snd_Cairnerecruited, 127)
    call SetSoundPitch(gg_snd_Cairnerecruited, 1.0)
    set gg_snd_Doom=CreateSound("war3mapImported\\Doom.mp3", false, false, false, 10, 10, "")
    call SetSoundDuration(gg_snd_Doom, 66115)
    call SetSoundChannel(gg_snd_Doom, 0)
    call SetSoundVolume(gg_snd_Doom, 127)
    call SetSoundPitch(gg_snd_Doom, 1.0)
    set gg_snd_FurionRecruited=CreateSound("war3mapImported\\FurionRecruited.mp3", false, false, false, 10, 10, "")
    call SetSoundDuration(gg_snd_FurionRecruited, 2821)
    call SetSoundChannel(gg_snd_FurionRecruited, 0)
    call SetSoundVolume(gg_snd_FurionRecruited, 127)
    call SetSoundPitch(gg_snd_FurionRecruited, 1.0)
    set gg_snd_GromRecruited=CreateSound("war3mapImported\\GromRecruited.mp3", false, false, false, 10, 10, "")
    call SetSoundDuration(gg_snd_GromRecruited, 4414)
    call SetSoundChannel(gg_snd_GromRecruited, 0)
    call SetSoundVolume(gg_snd_GromRecruited, 127)
    call SetSoundPitch(gg_snd_GromRecruited, 1.0)
    set gg_snd_Jainarecruited=CreateSound("war3mapImported\\Jainarecruited.mp3", false, false, false, 10, 10, "")
    call SetSoundDuration(gg_snd_Jainarecruited, 1462)
    call SetSoundChannel(gg_snd_Jainarecruited, 0)
    call SetSoundVolume(gg_snd_Jainarecruited, 127)
    call SetSoundPitch(gg_snd_Jainarecruited, 1.0)
    set gg_snd_KelThuzadrecruited=CreateSound("war3mapImported\\KelThuzadrecruited.mp3", false, false, false, 10, 10, "")
    call SetSoundDuration(gg_snd_KelThuzadrecruited, 3604)
    call SetSoundChannel(gg_snd_KelThuzadrecruited, 0)
    call SetSoundVolume(gg_snd_KelThuzadrecruited, 127)
    call SetSoundPitch(gg_snd_KelThuzadrecruited, 1.0)
    set gg_snd_Muradinrecruited=CreateSound("war3mapImported\\Muradinrecruited.mp3", false, false, false, 10, 10, "")
    call SetSoundDuration(gg_snd_Muradinrecruited, 1593)
    call SetSoundChannel(gg_snd_Muradinrecruited, 0)
    call SetSoundVolume(gg_snd_Muradinrecruited, 127)
    call SetSoundPitch(gg_snd_Muradinrecruited, 1.0)
    set gg_snd_Sylvanasrecruited=CreateSound("war3mapImported\\Sylvanasrecruited.mp3", false, false, false, 10, 10, "")
    call SetSoundDuration(gg_snd_Sylvanasrecruited, 2220)
    call SetSoundChannel(gg_snd_Sylvanasrecruited, 0)
    call SetSoundVolume(gg_snd_Sylvanasrecruited, 127)
    call SetSoundPitch(gg_snd_Sylvanasrecruited, 1.0)
    set gg_snd_ThrallRecruited=CreateSound("war3mapImported\\ThrallRecruited.mp3", false, false, false, 10, 10, "")
    call SetSoundDuration(gg_snd_ThrallRecruited, 2612)
    call SetSoundChannel(gg_snd_ThrallRecruited, 0)
    call SetSoundVolume(gg_snd_ThrallRecruited, 127)
    call SetSoundPitch(gg_snd_ThrallRecruited, 1.0)
    set gg_snd_TyrandeRecruited=CreateSound("war3mapImported\\TyrandeRecruited.mp3", false, false, false, 10, 10, "")
    call SetSoundDuration(gg_snd_TyrandeRecruited, 2716)
    call SetSoundChannel(gg_snd_TyrandeRecruited, 0)
    call SetSoundVolume(gg_snd_TyrandeRecruited, 127)
    call SetSoundPitch(gg_snd_TyrandeRecruited, 1.0)
    set gg_snd_Utherrecruited=CreateSound("war3mapImported\\Utherrecruited.mp3", false, false, false, 10, 10, "")
    call SetSoundDuration(gg_snd_Utherrecruited, 2716)
    call SetSoundChannel(gg_snd_Utherrecruited, 0)
    call SetSoundVolume(gg_snd_Utherrecruited, 127)
    call SetSoundPitch(gg_snd_Utherrecruited, 1.0)
    set gg_snd_NecromancerNoGold1=CreateSound("Sound\\Interface\\Warning\\Undead\\NecromancerNoGold1.wav", false, false, false, 10, 10, "")
    call SetSoundParamsFromLabel(gg_snd_NecromancerNoGold1, "NoGoldUndead")
    call SetSoundDuration(gg_snd_NecromancerNoGold1, 2403)
endfunction

//***************************************************************************
//*
//*  Unit Creation
//*
//***************************************************************************

//===========================================================================
function CreateNeutralHostile takes nothing returns nothing
    local player p= Player(PLAYER_NEUTRAL_AGGRESSIVE)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set u=CreateUnit(p, 'nsel', - 125.9, - 1101.7, 289.140)
    call SetUnitAcquireRange(u, 200.0)
    set t=CreateTrigger()
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_CHANGE_OWNER)
    call TriggerAddAction(t, function Unit000024_DropItems)
    set u=CreateUnit(p, 'nmcf', 3311.8, 1606.0, 355.016)
    call SetUnitAcquireRange(u, 200.0)
    set u=CreateUnit(p, 'nmcf', 3285.0, 1733.2, 323.977)
    call SetUnitAcquireRange(u, 200.0)
    set u=CreateUnit(p, 'nmbg', - 6181.3, - 960.3, 13.022)
    set u=CreateUnit(p, 'nmbg', - 6082.9, 4411.8, 13.022)
    set u=CreateUnit(p, 'nrel', 304.7, - 935.5, 244.996)
    call SetUnitAcquireRange(u, 200.0)
    set u=CreateUnit(p, 'nrel', - 257.4, - 888.5, 293.556)
    call SetUnitAcquireRange(u, 200.0)
    set u=CreateUnit(p, 'nsel', 187.7, - 1085.3, 250.110)
    call SetUnitAcquireRange(u, 200.0)
    set t=CreateTrigger()
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_CHANGE_OWNER)
    call TriggerAddAction(t, function Unit000126_DropItems)
    set u=CreateUnit(p, 'n00G', 30.2, - 1208.4, 279.890)
    set t=CreateTrigger()
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_CHANGE_OWNER)
    call TriggerAddAction(t, function Unit000218_DropItems)
    set u=CreateUnit(p, 'nmbg', 5641.4, 4867.1, 214.888)
    set u=CreateUnit(p, 'nmbg', 6401.4, - 1246.9, 173.530)
    set u=CreateUnit(p, 'nmbg', 5661.1, - 5112.2, 190.988)
    set u=CreateUnit(p, 'nmtw', 6330.3, - 1179.1, 163.878)
    set u=CreateUnit(p, 'nmtw', 6131.9, - 1206.9, 154.837)
    set u=CreateUnit(p, 'nmsn', 5593.0, - 5233.6, 33.672)
    set t=CreateTrigger()
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_CHANGE_OWNER)
    call TriggerAddAction(t, function Unit000021_DropItems)
    set u=CreateUnit(p, 'nmbg', - 5984.6, - 5033.0, 2.871)
    set u=CreateUnit(p, 'nscb', 4552.9, - 3308.3, 206.607)
    call SetUnitAcquireRange(u, 200.0)
    set u=CreateUnit(p, 'nscb', 4600.4, - 3598.7, 150.116)
    call SetUnitAcquireRange(u, 200.0)
    set u=CreateUnit(p, 'nsc2', 4774.2, - 3424.9, 91.290)
    call SetUnitAcquireRange(u, 200.0)
    set t=CreateTrigger()
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_CHANGE_OWNER)
    call TriggerAddAction(t, function Unit000085_DropItems)
    set u=CreateUnit(p, 'nscb', - 5145.8, - 3137.5, 116.607)
    call SetUnitAcquireRange(u, 200.0)
    set u=CreateUnit(p, 'nmtw', 6152.3, - 1427.0, 138.077)
    set u=CreateUnit(p, 'nhyh', - 2114.0, 5939.1, 296.830)
    call SetUnitAcquireRange(u, 200.0)
    set u=CreateUnit(p, 'nmtw', 3228.8, 1673.1, 168.920)
    call SetUnitAcquireRange(u, 200.0)
    set t=CreateTrigger()
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_CHANGE_OWNER)
    call TriggerAddAction(t, function Unit000146_DropItems)
    set u=CreateUnit(p, 'nscb', 4875.8, 2291.8, 206.607)
    call SetUnitAcquireRange(u, 200.0)
    set u=CreateUnit(p, 'nscb', 4923.2, 2001.4, 150.116)
    call SetUnitAcquireRange(u, 200.0)
    set u=CreateUnit(p, 'nsc2', 5096.8, 2166.4, 91.290)
    call SetUnitAcquireRange(u, 200.0)
    set t=CreateTrigger()
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_CHANGE_OWNER)
    call TriggerAddAction(t, function Unit000119_DropItems)
    set u=CreateUnit(p, 'nscb', - 4902.5, 2301.8, 72.017)
    call SetUnitAcquireRange(u, 200.0)
    set u=CreateUnit(p, 'nscb', - 5002.9, 2015.8, 73.699)
    call SetUnitAcquireRange(u, 200.0)
    set u=CreateUnit(p, 'nsc2', - 5148.1, 2176.2, 352.490)
    call SetUnitAcquireRange(u, 200.0)
    set t=CreateTrigger()
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_CHANGE_OWNER)
    call TriggerAddAction(t, function Unit000073_DropItems)
    set u=CreateUnit(p, 'nmsn', 6271.8, - 1352.6, 33.672)
    set t=CreateTrigger()
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_CHANGE_OWNER)
    call TriggerAddAction(t, function Unit000025_DropItems)
    set u=CreateUnit(p, 'nmcf', 3189.0, 1561.3, 5.903)
    call SetUnitAcquireRange(u, 200.0)
    set u=CreateUnit(p, 'nmcf', 3097.5, - 2224.2, 40.299)
    call SetUnitAcquireRange(u, 200.0)
    set u=CreateUnit(p, 'nscb', - 5321.4, - 2748.4, 60.116)
    call SetUnitAcquireRange(u, 200.0)
    set u=CreateUnit(p, 'nsc2', - 5286.9, - 2981.0, 91.290)
    call SetUnitAcquireRange(u, 200.0)
    set t=CreateTrigger()
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_CHANGE_OWNER)
    call TriggerAddAction(t, function Unit000064_DropItems)
    set u=CreateUnit(p, 'nmcf', - 3237.4, - 2876.1, 175.016)
    call SetUnitAcquireRange(u, 200.0)
    set u=CreateUnit(p, 'nhyh', - 1698.0, 5970.8, 241.113)
    call SetUnitAcquireRange(u, 200.0)
    set u=CreateUnit(p, 'nsgh', - 1918.1, 6066.6, 245.700)
    call SetUnitAcquireRange(u, 200.0)
    set t=CreateTrigger()
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_CHANGE_OWNER)
    call TriggerAddAction(t, function Unit000090_DropItems)
    set u=CreateUnit(p, 'nhyh', 1797.1, - 6468.1, 61.413)
    call SetUnitAcquireRange(u, 200.0)
    set u=CreateUnit(p, 'nhyh', - 2778.2, - 6197.4, 61.413)
    call SetUnitAcquireRange(u, 200.0)
    set u=CreateUnit(p, 'nhyh', - 2389.9, - 6243.8, 103.079)
    call SetUnitAcquireRange(u, 200.0)
    set u=CreateUnit(p, 'nsgh', - 2599.9, - 6426.3, 245.700)
    call SetUnitAcquireRange(u, 200.0)
    set t=CreateTrigger()
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_CHANGE_OWNER)
    call TriggerAddAction(t, function Unit000074_DropItems)
    set u=CreateUnit(p, 'nhyh', 2185.4, - 6514.4, 103.079)
    call SetUnitAcquireRange(u, 200.0)
    set u=CreateUnit(p, 'nsgh', 1961.1, - 6721.8, 245.700)
    call SetUnitAcquireRange(u, 200.0)
    set t=CreateTrigger()
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_CHANGE_OWNER)
    call TriggerAddAction(t, function Unit000015_DropItems)
    set u=CreateUnit(p, 'nsgh', 2095.9, 5636.6, 245.700)
    call SetUnitAcquireRange(u, 200.0)
    set t=CreateTrigger()
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_CHANGE_OWNER)
    call TriggerAddAction(t, function Unit000080_DropItems)
    set u=CreateUnit(p, 'nmsn', - 5868.0, - 4969.1, 33.672)
    set t=CreateTrigger()
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_CHANGE_OWNER)
    call TriggerAddAction(t, function Unit000194_DropItems)
    set u=CreateUnit(p, 'ntrt', 1471.5, 4311.4, 205.920)
    set t=CreateTrigger()
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_CHANGE_OWNER)
    call TriggerAddAction(t, function Unit000098_DropItems)
    set u=CreateUnit(p, 'ntrs', 1610.0, 4133.6, 305.502)
    set u=CreateUnit(p, 'ntrs', 1677.7, 4253.6, 292.242)
    set u=CreateUnit(p, 'ntrs', 1471.0, 4072.7, 288.339)
    set u=CreateUnit(p, 'ntrt', 1026.3, 69.5, 205.920)
    set t=CreateTrigger()
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_CHANGE_OWNER)
    call TriggerAddAction(t, function Unit000065_DropItems)
    set u=CreateUnit(p, 'ntrs', 975.8, 335.9, 322.323)
    set u=CreateUnit(p, 'ntrs', 1184.7, 57.9, 323.950)
    set u=CreateUnit(p, 'ntrs', 993.1, - 150.9, 352.720)
    set u=CreateUnit(p, 'ntrt', 2000.3, - 5325.0, 205.920)
    set t=CreateTrigger()
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_CHANGE_OWNER)
    call TriggerAddAction(t, function Unit000102_DropItems)
    set u=CreateUnit(p, 'ntrs', 1908.1, - 5136.7, 73.960)
    set u=CreateUnit(p, 'ntrs', 2192.1, - 5341.2, 78.714)
    set u=CreateUnit(p, 'ntrs', 2111.1, - 5110.1, 62.651)
    set u=CreateUnit(p, 'ntrt', - 1905.4, - 5010.6, 205.920)
    set t=CreateTrigger()
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_CHANGE_OWNER)
    call TriggerAddAction(t, function Unit000186_DropItems)
    set u=CreateUnit(p, 'ntrs', - 2047.1, - 4798.5, 94.821)
    set u=CreateUnit(p, 'ntrs', - 2117.8, - 5004.8, 91.353)
    set u=CreateUnit(p, 'ntrs', - 1793.3, - 4831.2, 105.125)
    set u=CreateUnit(p, 'ntrt', - 1092.4, 114.5, 205.920)
    set t=CreateTrigger()
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_CHANGE_OWNER)
    call TriggerAddAction(t, function Unit000177_DropItems)
    set u=CreateUnit(p, 'ntrs', - 1094.8, 328.9, 267.710)
    set u=CreateUnit(p, 'ntrs', - 1243.2, 73.8, 250.107)
    set u=CreateUnit(p, 'ntrs', - 980.0, - 71.2, 222.497)
    set u=CreateUnit(p, 'ntrt', - 1852.5, 4529.6, 205.920)
    set t=CreateTrigger()
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_CHANGE_OWNER)
    call TriggerAddAction(t, function Unit000066_DropItems)
    set u=CreateUnit(p, 'ntrs', - 1940.0, 4332.9, 218.816)
    set u=CreateUnit(p, 'ntrs', - 2060.6, 4540.6, 235.847)
    set u=CreateUnit(p, 'ntrs', - 1984.8, 4776.6, 220.139)
    set u=CreateUnit(p, 'nmtw', 5497.9, - 5094.3, 196.577)
    set u=CreateUnit(p, 'nsoc', - 242.8, 3104.2, 258.995)
    call SetUnitAcquireRange(u, 200.0)
    set t=CreateTrigger()
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_CHANGE_OWNER)
    call TriggerAddAction(t, function Unit000176_DropItems)
    set u=CreateUnit(p, 'nsrw', - 814.3, 4188.4, 265.990)
    call SetUnitAcquireRange(u, 200.0)
    set t=CreateTrigger()
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_CHANGE_OWNER)
    call TriggerAddAction(t, function Unit000140_DropItems)
    set u=CreateUnit(p, 'nmcf', 2988.3, - 2153.8, 9.260)
    call SetUnitAcquireRange(u, 200.0)
    set u=CreateUnit(p, 'nmtw', 2994.3, - 2266.0, 168.920)
    call SetUnitAcquireRange(u, 200.0)
    set t=CreateTrigger()
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_CHANGE_OWNER)
    call TriggerAddAction(t, function Unit000071_DropItems)
    set u=CreateUnit(p, 'nhyh', 2183.3, 5433.3, 214.901)
    call SetUnitAcquireRange(u, 200.0)
    set u=CreateUnit(p, 'nhyh', 1872.6, 5615.6, 293.356)
    call SetUnitAcquireRange(u, 200.0)
    set u=CreateUnit(p, 'nsrn', - 486.4, 3128.5, 322.352)
    call SetUnitAcquireRange(u, 200.0)
    set t=CreateTrigger()
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_CHANGE_OWNER)
    call TriggerAddAction(t, function Unit000179_DropItems)
    set u=CreateUnit(p, 'nsrn', - 48.6, 3160.0, 221.764)
    call SetUnitAcquireRange(u, 200.0)
    set u=CreateUnit(p, 'nmtw', 5690.6, - 5357.9, 232.125)
    set u=CreateUnit(p, 'nmtw', 5483.9, - 5300.4, 206.978)
    set u=CreateUnit(p, 'nmtw', - 5848.9, 4226.8, 61.859)
    set u=CreateUnit(p, 'nmtw', - 5824.7, 4375.7, 51.052)
    set u=CreateUnit(p, 'nmtw', - 5972.9, 4479.6, 26.110)
    set u=CreateUnit(p, 'nmcf', - 3210.5, - 3003.3, 143.977)
    call SetUnitAcquireRange(u, 200.0)
    set u=CreateUnit(p, 'nmtw', - 6121.7, - 866.0, 39.741)
    set u=CreateUnit(p, 'nmtw', - 5925.7, - 881.2, 78.371)
    set u=CreateUnit(p, 'nmtw', - 5855.9, - 1099.5, 71.280)
    set u=CreateUnit(p, 'nmsn', - 6022.7, - 1021.4, 33.672)
    set t=CreateTrigger()
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_CHANGE_OWNER)
    call TriggerAddAction(t, function Unit000033_DropItems)
    set u=CreateUnit(p, 'nmsn', 5605.9, 4691.3, 33.672)
    set t=CreateTrigger()
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_CHANGE_OWNER)
    call TriggerAddAction(t, function Unit000050_DropItems)
    set u=CreateUnit(p, 'nmtw', - 5768.1, - 4858.6, 282.855)
    set u=CreateUnit(p, 'nmtw', - 5734.0, - 5057.5, 293.256)
    set u=CreateUnit(p, 'nmtw', - 5922.8, - 5137.0, 318.404)
    set u=CreateUnit(p, 'nsrw', 334.1, 4164.9, 265.990)
    call SetUnitAcquireRange(u, 200.0)
    set t=CreateTrigger()
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_CHANGE_OWNER)
    call TriggerAddAction(t, function Unit000187_DropItems)
    set u=CreateUnit(p, 'nmcf', 3042.9, - 2343.0, 51.186)
    call SetUnitAcquireRange(u, 200.0)
    set u=CreateUnit(p, 'nmtw', - 3168.3, - 2901.5, 168.920)
    call SetUnitAcquireRange(u, 200.0)
    set t=CreateTrigger()
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_CHANGE_OWNER)
    call TriggerAddAction(t, function Unit000165_DropItems)
    set u=CreateUnit(p, 'nmtw', 5605.1, 4546.8, 149.881)
    set u=CreateUnit(p, 'nmtw', 5471.4, 4584.1, 183.864)
    set u=CreateUnit(p, 'nmtw', 5475.2, 4793.0, 185.436)
    set u=CreateUnit(p, 'nmcf', - 3114.5, - 2831.3, 185.903)
    call SetUnitAcquireRange(u, 200.0)
    set u=CreateUnit(p, 'nlrv', - 254.1, 4850.1, 272.520)
    set t=CreateTrigger()
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_CHANGE_OWNER)
    call TriggerAddAction(t, function Unit000188_DropItems)
    set u=CreateUnit(p, 'nmrv', - 72.4, 4845.2, 235.107)
    set u=CreateUnit(p, 'nmtw', - 3362.4, 1272.5, 168.920)
    call SetUnitAcquireRange(u, 200.0)
    set t=CreateTrigger()
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_CHANGE_OWNER)
    call TriggerAddAction(t, function Unit000053_DropItems)
    set u=CreateUnit(p, 'nmcf', - 3413.7, 1179.0, 143.977)
    call SetUnitAcquireRange(u, 200.0)
    set u=CreateUnit(p, 'nmcf', - 3440.5, 1306.1, 175.016)
    call SetUnitAcquireRange(u, 200.0)
    set u=CreateUnit(p, 'nmcf', - 3317.7, 1350.9, 185.903)
    call SetUnitAcquireRange(u, 200.0)
    set u=CreateUnit(p, 'nmrv', - 470.7, 4806.9, 317.772)
    set u=CreateUnit(p, 'nsel', - 383.8, 4914.8, 294.094)
    set u=CreateUnit(p, 'nsel', - 147.8, 4939.4, 254.294)
    set u=CreateUnit(p, 'nsoc', - 347.0, 4724.4, 309.943)
    set u=CreateUnit(p, 'nsoc', - 139.9, 4724.4, 230.220)
    set u=CreateUnit(p, 'nmsn', - 5976.9, 4308.4, 33.672)
    set t=CreateTrigger()
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_CHANGE_OWNER)
    call TriggerAddAction(t, function Unit000086_DropItems)
    set u=CreateUnit(p, 'ntrd', - 120.4, - 5157.4, 99.710)
    set t=CreateTrigger()
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_CHANGE_OWNER)
    call TriggerAddAction(t, function Unit000197_DropItems)
    set u=CreateUnit(p, 'ntrg', 77.1, - 4975.8, 119.947)
    set u=CreateUnit(p, 'ntrg', - 359.7, - 4987.6, 79.021)
    set u=CreateUnit(p, 'nehy', - 43.3, - 4894.3, 112.980)
    set u=CreateUnit(p, 'nehy', - 273.1, - 4855.8, 86.758)
    set u=CreateUnit(p, 'nmrv', 5736.8, - 5205.8, 290.114)
    set u=CreateUnit(p, 'nmrv', - 5894.2, - 4847.3, 172.095)
    set u=CreateUnit(p, 'nmrv', - 5949.1, - 1153.1, 94.145)
    set u=CreateUnit(p, 'nmrv', 6362.4, - 1337.1, 350.958)
    set u=CreateUnit(p, 'nmrv', - 5970.9, 4229.7, 101.813)
    set u=CreateUnit(p, 'nmrv', 5693.5, 4704.9, 219.063)
    set u=CreateUnit(p, 'nmrv', - 256.4, - 712.2, 237.927)
    set u=CreateUnit(p, 'nmrv', 301.4, - 703.9, 162.449)
    set u=CreateUnit(p, 'nsrh', - 382.6, 3088.3, 311.585)
    set u=CreateUnit(p, 'nsrh', - 126.0, 3112.1, 226.112)
    set u=CreateUnit(p, 'nsrw', - 260.1, 3285.3, 268.180)
    set t=CreateTrigger()
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_CHANGE_OWNER)
    call TriggerAddAction(t, function Unit000212_DropItems)
    set u=CreateUnit(p, 'nsra', - 80.0, 3314.6, 241.629)
    set u=CreateUnit(p, 'nsra', - 418.5, 3301.2, 293.573)
endfunction

//===========================================================================
function CreateNeutralPassiveBuildings takes nothing returns nothing
    local player p= Player(PLAYER_NEUTRAL_PASSIVE)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set u=CreateUnit(p, 'ngol', 1216.0, 4160.0, 270.000)
    call SetResourceAmount(u, 15000)
    set u=CreateUnit(p, 'ngol', 768.0, 128.0, 270.000)
    call SetResourceAmount(u, 15000)
    set u=CreateUnit(p, 'ngol', 1728.0, - 5184.0, 270.000)
    call SetResourceAmount(u, 15000)
    set u=CreateUnit(p, 'ngol', - 1472.0, - 4992.0, 270.000)
    call SetResourceAmount(u, 15000)
    set u=CreateUnit(p, 'ngol', - 832.0, 128.0, 270.000)
    call SetResourceAmount(u, 15000)
    set u=CreateUnit(p, 'ngol', - 1600.0, 4480.0, 270.000)
    call SetResourceAmount(u, 15000)
    set u=CreateUnit(p, 'ngol', - 6208.0, 4096.0, 270.000)
    call SetResourceAmount(u, 13500)
    set u=CreateUnit(p, 'ngol', 5888.0, 4480.0, 270.000)
    call SetResourceAmount(u, 13500)
    set u=CreateUnit(p, 'ngol', 6400.0, - 1536.0, 270.000)
    call SetResourceAmount(u, 13500)
    set u=CreateUnit(p, 'ngol', 6016.0, - 4736.0, 270.000)
    call SetResourceAmount(u, 13500)
    set u=CreateUnit(p, 'ngol', - 6144.0, - 4736.0, 270.000)
    call SetResourceAmount(u, 13500)
    set u=CreateUnit(p, 'ngme', 4224.0, - 256.0, 270.000)
    set u=CreateUnit(p, 'nmrk', - 64.0, - 5504.0, 270.000)
    call SetUnitColor(u, ConvertPlayerColor(0))
    set u=CreateUnit(p, 'ngme', - 3968.0, - 320.0, 270.000)
    set u=CreateUnit(p, 'nfoh', 0.0, - 832.0, 270.000)
    set u=CreateUnit(p, 'nmoo', - 768.0, 3456.0, 270.000)
    set u=CreateUnit(p, 'ngad', 256.0, 3456.0, 270.000)
    set u=CreateUnit(p, 'ngol', - 6208.0, - 1216.0, 270.000)
    call SetResourceAmount(u, 13500)
    set u=CreateUnit(p, 'ntav', - 4416.0, - 320.0, 270.000)
    call SetUnitColor(u, ConvertPlayerColor(0))
    set u=CreateUnit(p, 'ntav', 3776.0, - 256.0, 270.000)
    call SetUnitColor(u, ConvertPlayerColor(0))
    set u=CreateUnit(p, 'ntav', - 2880.0, 2688.0, 270.000)
    call SetUnitColor(u, ConvertPlayerColor(0))
    set u=CreateUnit(p, 'ntav', - 2944.0, - 3648.0, 270.000)
    call SetUnitColor(u, ConvertPlayerColor(0))
    set u=CreateUnit(p, 'ntav', 2624.0, - 3264.0, 270.000)
    call SetUnitColor(u, ConvertPlayerColor(0))
    set u=CreateUnit(p, 'ntav', 2432.0, 2368.0, 270.000)
    call SetUnitColor(u, ConvertPlayerColor(0))
endfunction

//===========================================================================
function CreateNeutralPassive takes nothing returns nothing
    local player p= Player(PLAYER_NEUTRAL_PASSIVE)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set u=CreateUnit(p, 'nalb', - 6624.9, - 6723.0, 304.649)
    set u=CreateUnit(p, 'nalb', - 4352.3, - 4645.1, 49.462)
    set u=CreateUnit(p, 'nalb', - 3052.5, - 3872.3, 254.418)
    set u=CreateUnit(p, 'nalb', - 2696.5, - 824.3, 69.370)
    set u=CreateUnit(p, 'nalb', - 6464.3, 5834.7, 272.513)
    set u=CreateUnit(p, 'nalb', - 4052.6, 4674.6, 245.277)
    set u=CreateUnit(p, 'nalb', - 2875.1, 3505.3, 328.216)
    set u=CreateUnit(p, 'nalb', 3252.0, 3376.6, 75.995)
    set u=CreateUnit(p, 'nalb', 4182.4, 4606.2, 9.943)
    set u=CreateUnit(p, 'nalb', 6235.2, 5811.9, 128.863)
    set u=CreateUnit(p, 'nalb', 6504.0, 5281.8, 45.573)
    set u=CreateUnit(p, 'nalb', 6035.1, - 810.4, 312.977)
    set u=CreateUnit(p, 'nalb', 4315.9, - 5173.5, 209.637)
    set u=CreateUnit(p, 'nalb', 6226.8, - 6628.1, 85.883)
    set u=CreateUnit(p, 'nalb', 6382.6, - 5818.3, 193.695)
    set u=CreateUnit(p, 'nhmc', 5184.9, - 1375.0, 9.394)
    set u=CreateUnit(p, 'nhmc', 4015.0, 4813.8, 246.002)
    set u=CreateUnit(p, 'nhmc', - 4796.9, - 4561.9, 156.164)
    set u=CreateUnit(p, 'nhmc', - 5205.6, - 70.0, 335.126)
    set u=CreateUnit(p, 'nhmc', - 3943.1, 5030.0, 357.649)
    set u=CreateUnit(p, 'nfro', - 725.2, 2413.6, 347.387)
    set u=CreateUnit(p, 'nfro', 423.8, 2411.0, 165.481)
    set u=CreateUnit(p, 'nfro', 169.6, - 1292.8, 239.184)
    set u=CreateUnit(p, 'nfro', 390.8, - 1089.5, 230.634)
    set u=CreateUnit(p, 'nfro', - 281.6, - 1255.3, 317.534)
    set u=CreateUnit(p, 'nfro', - 665.7, - 3735.1, 237.356)
    set u=CreateUnit(p, 'nalb', 7038.5, - 447.3, 312.164)
    set u=CreateUnit(p, 'nalb', 3956.2, - 810.0, 98.484)
    set u=CreateUnit(p, 'nalb', 2710.3, - 839.1, 75.797)
    set u=CreateUnit(p, 'nalb', 2757.0, - 4128.0, 125.050)
    set u=CreateUnit(p, 'nalb', - 7056.2, - 634.0, 36.739)
    set u=CreateUnit(p, 'nalb', - 4148.2, - 969.8, 349.101)
    set u=CreateUnit(p, 'ncrb', - 3909.7, 3987.8, 82.960)
    set u=CreateUnit(p, 'ncrb', - 3532.2, 729.3, 290.674)
    set u=CreateUnit(p, 'ncrb', - 3774.5, 1657.7, 103.198)
    set u=CreateUnit(p, 'ncrb', - 3261.1, - 1178.6, 155.659)
    set u=CreateUnit(p, 'ncrb', - 4049.9, - 2679.0, 357.297)
    set u=CreateUnit(p, 'ncrb', - 3982.8, - 4080.1, 122.699)
    set u=CreateUnit(p, 'ncrb', - 4969.3, - 2221.3, 225.512)
    set u=CreateUnit(p, 'ncrb', - 3926.3, 3155.5, 256.670)
    set u=CreateUnit(p, 'ncrb', 4044.8, 3638.5, 30.642)
    set u=CreateUnit(p, 'nhmc', 4446.0, - 4618.3, 26.412)
    set u=CreateUnit(p, 'nhmc', 3503.6, - 396.8, 182.357)
    set u=CreateUnit(p, 'nhmc', - 2749.7, - 4648.4, 157.648)
    set u=CreateUnit(p, 'nhmc', - 7324.4, - 871.1, 81.862)
    set u=CreateUnit(p, 'nhmc', - 6660.0, 5780.7, 163.240)
    set u=CreateUnit(p, 'ncrb', 3907.7, 2581.8, 0.494)
    set u=CreateUnit(p, 'ncrb', 3337.6, 1034.5, 34.762)
    set u=CreateUnit(p, 'ncrb', 4706.4, 220.1, 222.084)
    set u=CreateUnit(p, 'ncrb', 3858.0, - 2531.2, 166.008)
    set u=CreateUnit(p, 'ncrb', 3895.2, - 3581.8, 30.378)
    set u=CreateUnit(p, 'nhmc', 2791.5, - 1454.8, 47.528)
    set u=CreateUnit(p, 'nhmc', 2884.6, 3776.8, 315.273)
    set u=CreateUnit(p, 'nhmc', - 3343.6, 3355.8, 67.348)
    set u=CreateUnit(p, 'nhmc', - 2827.8, - 1194.2, 118.953)
    set u=CreateUnit(p, 'nskk', - 311.8, - 1161.9, 312.000)
    set u=CreateUnit(p, 'nskk', 365.3, - 2756.2, 166.997)
    set u=CreateUnit(p, 'nskk', - 1584.3, 2113.1, 343.081)
    set u=CreateUnit(p, 'nskk', - 884.5, - 2306.4, 36.772)
    set u=CreateUnit(p, 'nskk', 952.8, - 2109.5, 197.200)
endfunction

//===========================================================================
function CreatePlayerBuildings takes nothing returns nothing
endfunction

//===========================================================================
function CreatePlayerUnits takes nothing returns nothing
endfunction

//===========================================================================
function CreateAllUnits takes nothing returns nothing
    call CreateNeutralPassiveBuildings()
    call CreatePlayerBuildings()
    call CreateNeutralHostile()
    call CreateNeutralPassive()
    call CreatePlayerUnits()
endfunction

//***************************************************************************
//*
//*  Triggers
//*
//***************************************************************************

//===========================================================================
// Trigger: Settings
//===========================================================================
function Trig_Settings_Actions takes nothing returns nothing
    set udg_WeatherHash=InitHashtable()
    // Weather Library
    set udg_Weather[1]='RAhr'
    set udg_Weather[2]='RAlr'
    set udg_Weather[3]='FDwh'
    set udg_Weather[4]='FDwl'
    set udg_Weather[5]='RLhr'
    set udg_Weather[6]='RLlr'
    set udg_Weather[7]='SNbs'
    set udg_Weather[8]='SNhs'
    set udg_Weather[9]='SNls'
    set udg_Weather[10]='WOcw'
    set udg_Weather[11]='WOlw'
    set udg_Weather[12]='LRaa'
    set udg_Weather[13]='LRma'
    set udg_Weather[14]='WNcw'
    // End of Library
    set udg_Randomweather=GetRandomInt(1, 14)
    call SaveInteger(udg_WeatherHash, GetHandleId(bj_mapInitialPlayableArea), StringHash("weather"), udg_Randomweather)
    set udg_Weather_effect=AddWeatherEffect(bj_mapInitialPlayableArea, udg_Weather[udg_Randomweather])
    call EnableWeatherEffect(udg_Weather_effect, true)
endfunction

//===========================================================================
function InitTrig_Settings takes nothing returns nothing
    set gg_trg_Settings=CreateTrigger()
    call TriggerAddAction(gg_trg_Settings, function Trig_Settings_Actions)
endfunction

//===========================================================================
// Trigger: Random Weather
//===========================================================================
function Trig_Random_Weather_Func003C takes nothing returns boolean
    if ( not ( udg_Randomweather != LoadIntegerBJ(StringHashBJ("weather"), GetHandleIdBJ(GetPlayableMapRect()), udg_WeatherHash) ) ) then
        return false
    endif
    return true
endfunction

function Trig_Random_Weather_Actions takes nothing returns nothing
    set udg_Randomweather=GetRandomInt(1, 14)
    if ( Trig_Random_Weather_Func003C() ) then
        call RemoveWeatherEffect(udg_Weather_effect)
        set udg_Weather_effect=AddWeatherEffect(bj_mapInitialPlayableArea, udg_Weather[udg_Randomweather])
        call EnableWeatherEffect(udg_Weather_effect, true)
        call SaveInteger(udg_WeatherHash, GetHandleId(bj_mapInitialPlayableArea), StringHash("weather"), udg_Randomweather)
    else
    endif
    set udg_Randomweather=0
endfunction

//===========================================================================
function InitTrig_Random_Weather takes nothing returns nothing
    set gg_trg_Random_Weather=CreateTrigger()
    call TriggerRegisterTimerEventPeriodic(gg_trg_Random_Weather, 500.00)
    call TriggerAddAction(gg_trg_Random_Weather, function Trig_Random_Weather_Actions)
endfunction

//===========================================================================
// Trigger: Безымянный триггер 002 Копировать
//===========================================================================
function Trig_____________________________________002_____________________u_Func007001 takes nothing returns boolean
    return ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == false )
endfunction

function Trig_____________________________________002_____________________u_Func007002001 takes nothing returns boolean
    return ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_STRUCTURE) == false )
endfunction

function Trig_____________________________________002_____________________u_Func007002002 takes nothing returns boolean
    return ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_MECHANICAL) == false )
endfunction

function Trig_____________________________________002_____________________u_Func007002 takes nothing returns boolean
    return GetBooleanAnd(Trig_____________________________________002_____________________u_Func007002001(), Trig_____________________________________002_____________________u_Func007002002())
endfunction

function Trig_____________________________________002_____________________u_Conditions takes nothing returns boolean
    if ( not ( GetUnitAbilityLevelSwapped('A02I', GetKillingUnitBJ()) == 1 ) ) then
        return false
    endif
    if ( not GetBooleanAnd(Trig_____________________________________002_____________________u_Func007001(), Trig_____________________________________002_____________________u_Func007002()) ) then
        return false
    endif
    return true
endfunction

function Trig_____________________________________002_____________________u_Actions takes nothing returns nothing
    set udg_Zombietarget=GetUnitLoc(GetDyingUnit())
    call CreateNUnitsAtLoc(1, 'ndmu', GetOwningPlayer(GetKillingUnitBJ()), udg_Zombietarget, bj_UNIT_FACING)
    call SetUnitAnimation(GetLastCreatedUnit(), "birth")
    call UnitApplyTimedLifeBJ(55.00, 'BTLF', GetLastCreatedUnit())
    call RemoveLocation(udg_Zombietarget)
endfunction

//===========================================================================
function InitTrig_____________________________________002_____________________u takes nothing returns nothing
    set gg_trg_____________________________________002_____________________u=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_____________________________________002_____________________u, EVENT_PLAYER_UNIT_DEATH)
    call TriggerAddCondition(gg_trg_____________________________________002_____________________u, Condition(function Trig_____________________________________002_____________________u_Conditions))
    call TriggerAddAction(gg_trg_____________________________________002_____________________u, function Trig_____________________________________002_____________________u_Actions)
endfunction

//===========================================================================
// Trigger: Безымянный триггер 002
//===========================================================================
function Trig_____________________________________002_Func006001 takes nothing returns boolean
    return ( GetUnitAbilityLevelSwapped('Apts', GetKillingUnitBJ()) == 1 )
endfunction

function Trig_____________________________________002_Func006002 takes nothing returns boolean
    return ( GetUnitAbilityLevelSwapped('Aap1', GetKillingUnitBJ()) == 1 )
endfunction

function Trig_____________________________________002_Conditions takes nothing returns boolean
    if ( not GetBooleanOr(Trig_____________________________________002_Func006001(), Trig_____________________________________002_Func006002()) ) then
        return false
    endif
    return true
endfunction

function Trig_____________________________________002_Actions takes nothing returns nothing
    set udg_Zombietarget=GetUnitLoc(GetDyingUnit())
    call CreateNUnitsAtLoc(1, 'nzom', GetOwningPlayer(GetKillingUnitBJ()), udg_Zombietarget, bj_UNIT_FACING)
    call SetUnitAnimation(GetLastCreatedUnit(), "birth")
    call UnitApplyTimedLifeBJ(55.00, 'BTLF', GetLastCreatedUnit())
    call RemoveLocation(udg_Zombietarget)
endfunction

//===========================================================================
function InitTrig_____________________________________002 takes nothing returns nothing
    set gg_trg_____________________________________002=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_____________________________________002, EVENT_PLAYER_UNIT_DEATH)
    call TriggerAddCondition(gg_trg_____________________________________002, Condition(function Trig_____________________________________002_Conditions))
    call TriggerAddAction(gg_trg_____________________________________002, function Trig_____________________________________002_Actions)
endfunction

//===========================================================================
// Trigger: False Promise Config
//
// 
//===========================================================================
function Trig_False_Promise_Config_Actions takes nothing returns nothing
    // SPELL EVENTS
    // FalsePromise_Event Equal to 1.00 --- unit has been indexed for a False Promise instance
    // FalsePromise_Event Equal to 2.00 --- unit has been deindexed from a False Promise instance
    // SPELL EVENT VARIABLE
    // FalsePromise_AbiLvl = level of ability related to the caster that started the instance
    // FalsePromise_Unit = target that is / was affected by False Promise
    //  
    call InitHashtableBJ()
    set udg_FalsePromise_Hash=GetLastCreatedHashtableBJ()
    //  
    set udg_FalsePromise_Ability='A02N'
    set udg_FalsePromise_Buff='B007'
    // NOTE: Make sure FalsePromise_Ability is giving the appropriate buff in Object Editor!
    //  
    set udg_FalsePromise_Duration[1]=15.00
    set udg_FalsePromise_Duration[2]=9.00
    set udg_FalsePromise_Duration[3]=10.00
    //  
    set udg_FalsePromise_HealMultiplier[1]=3.00
    set udg_FalsePromise_HealMultiplier[2]=2.50
    set udg_FalsePromise_HealMultiplier[3]=3.00
    // ^ at the end of the duration, how much of the heal delayed will be amplified
    //  
    set udg_FalsePromise_SFXTarget="Abilities\\Spells\\Items\\StaffOfSanctuary\\Staff_Sanctuary_Target.mdl"
    set udg_FalsePromise_SFXTarget_AP="origin"
    set udg_FalsePromise_SFXHeal="Abilities\\Spells\\Undead\\DarkRitual\\DarkRitualTarget.mdl"
    set udg_FalsePromise_SFXHeal_AP="origin"
    set udg_FalsePromise_SFXDamage="Abilities\\Spells\\Undead\\OrbOfDeath\\OrbOfDeathMissile.mdl"
    set udg_FalsePromise_SFXDamage_AP="chest"
    set udg_FalsePromise_SFXCredit="Objects\\Spawnmodels\\Other\\ToonBoom\\ToonBoom.mdl"
    set udg_FalsePromise_SFXCredit_AP="origin"
    //  
    set udg_FalsePromise_PeriodicTimer=0.03
    call TriggerRegisterTimerEventPeriodic(gg_trg_False_Promise_Loop, udg_FalsePromise_PeriodicTimer)
    set udg_FalsePromise_LoopInt=0
endfunction

//===========================================================================
function InitTrig_False_Promise_Config takes nothing returns nothing
    set gg_trg_False_Promise_Config=CreateTrigger()
    call TriggerAddAction(gg_trg_False_Promise_Config, function Trig_False_Promise_Config_Actions)
endfunction

//===========================================================================
// Trigger: False Promise Cast
//===========================================================================
function Trig_False_Promise_Cast_Conditions takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == udg_FalsePromise_Ability ) ) then
        return false
    endif
    return true
endfunction

function Trig_False_Promise_Cast_Func003Func009C takes nothing returns boolean
    if ( not ( udg_FalsePromise_SpellCount == 1 ) ) then
        return false
    endif
    return true
endfunction

function Trig_False_Promise_Cast_Func003Func011C takes nothing returns boolean
    if ( not ( udg_FalsePromise_RecycledSize == 0 ) ) then
        return false
    endif
    return true
endfunction

function Trig_False_Promise_Cast_Func003C takes nothing returns boolean
    if ( not ( UnitHasBuffBJ(udg_FalsePromise_Unit, udg_FalsePromise_Buff) == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_False_Promise_Cast_Actions takes nothing returns nothing
    set udg_FalsePromise_Unit=GetSpellTargetUnit()
    // checking if target needs a new instance, or if the current one should be reset
    if ( Trig_False_Promise_Cast_Func003C() ) then
        set udg_FalsePromise_SpellCount=( udg_FalsePromise_SpellCount + 1 )
        if ( Trig_False_Promise_Cast_Func003Func009C() ) then
            call EnableTrigger(gg_trg_False_Promise_Loop)
            call EnableTrigger(gg_trg_False_Promise_Damage)
        else
            // this is not the first spell instance; triggers are already on
        endif
        //  
        if ( Trig_False_Promise_Cast_Func003Func011C() ) then
            set udg_FalsePromise_MaxIndex=( udg_FalsePromise_MaxIndex + 1 )
            set udg_FalsePromise_Spell_ID=udg_FalsePromise_MaxIndex
        else
            set udg_FalsePromise_RecycledSize=( udg_FalsePromise_RecycledSize - 1 )
            set udg_FalsePromise_Spell_ID=udg_FalsePromise_RecycledStack[udg_FalsePromise_RecycledSize]
        endif
        set udg_FalsePromise_NodeNext[udg_FalsePromise_Spell_ID]=0
        set udg_FalsePromise_NodePrev[udg_FalsePromise_Spell_ID]=udg_FalsePromise_NodePrev[0]
        set udg_FalsePromise_NodeNext[udg_FalsePromise_NodePrev[0]]=udg_FalsePromise_Spell_ID
        set udg_FalsePromise_NodePrev[0]=udg_FalsePromise_Spell_ID
        //  
        set udg_FalsePromise_Target[udg_FalsePromise_Spell_ID]=GetSpellTargetUnit()
        set udg_FalsePromise_HitPoints[udg_FalsePromise_Spell_ID]=GetUnitStateSwap(UNIT_STATE_LIFE, udg_FalsePromise_Target[udg_FalsePromise_Spell_ID])
        set udg_FalsePromise_AbilityLvl[udg_FalsePromise_Spell_ID]=GetUnitAbilityLevelSwapped(udg_FalsePromise_Ability, GetTriggerUnit())
        set udg_FalsePromise_Counter[udg_FalsePromise_Spell_ID]=0.00
        set udg_FalsePromise_CounterHeal[udg_FalsePromise_Spell_ID]=0.00
        set udg_FalsePromise_CounterDamage[udg_FalsePromise_Spell_ID]=0.00
        set udg_FalsePromise_Damage[udg_FalsePromise_Spell_ID]=0.00
        set udg_FalsePromise_DamageUnit[udg_FalsePromise_Spell_ID]=null
        set udg_FalsePromise_SpellNode[GetUnitUserData(udg_FalsePromise_Target[udg_FalsePromise_Spell_ID])]=udg_FalsePromise_Spell_ID
        //  
        call AddSpecialEffectTargetUnitBJ(udg_FalsePromise_SFXTarget_AP, udg_FalsePromise_Target[udg_FalsePromise_Spell_ID], udg_FalsePromise_SFXTarget)
        set udg_FalsePromise_TargetSFX[udg_FalsePromise_Spell_ID]=GetLastCreatedEffectBJ()
        //  
        set udg_FalsePromise_Unit=udg_FalsePromise_Target[udg_FalsePromise_Spell_ID]
        set udg_FalsePromise_AbiLvl=udg_FalsePromise_AbilityLvl[udg_FalsePromise_Spell_ID]
        set udg_FalsePromise_Event=0.00
        set udg_FalsePromise_Event=1.00
        set udg_FalsePromise_Event=0.00
    else
        set udg_FalsePromise_Spell_ID=udg_FalsePromise_SpellNode[GetUnitUserData(udg_FalsePromise_Unit)]
        set udg_FalsePromise_AbilityLvl[udg_FalsePromise_Spell_ID]=GetUnitAbilityLevelSwapped(udg_FalsePromise_Ability, GetTriggerUnit())
        set udg_FalsePromise_Counter[udg_FalsePromise_Spell_ID]=0.00
        set udg_FalsePromise_CounterHeal[udg_FalsePromise_Spell_ID]=0.00
        set udg_FalsePromise_CounterDamage[udg_FalsePromise_Spell_ID]=0.00
        set udg_FalsePromise_Damage[udg_FalsePromise_Spell_ID]=0.00
        set udg_FalsePromise_DamageUnit[udg_FalsePromise_Spell_ID]=null
    endif
endfunction

//===========================================================================
function InitTrig_False_Promise_Cast takes nothing returns nothing
    set gg_trg_False_Promise_Cast=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_False_Promise_Cast, EVENT_PLAYER_UNIT_SPELL_EFFECT)
    call TriggerAddCondition(gg_trg_False_Promise_Cast, Condition(function Trig_False_Promise_Cast_Conditions))
    call TriggerAddAction(gg_trg_False_Promise_Cast, function Trig_False_Promise_Cast_Actions)
endfunction

//===========================================================================
// Trigger: False Promise Loop
//===========================================================================
function Trig_False_Promise_Loop_Func002Func005C takes nothing returns boolean
    if ( not ( udg_FalsePromise_TempReal != udg_FalsePromise_HitPoints[udg_FalsePromise_Spell_ID] ) ) then
        return false
    endif
    return true
endfunction

function Trig_False_Promise_Loop_Func002Func009Func001C takes nothing returns boolean
    if ( ( UnitHasBuffBJ(udg_FalsePromise_Target[udg_FalsePromise_Spell_ID], udg_FalsePromise_Buff) == false ) ) then
        return true
    endif
    if ( ( udg_FalsePromise_Counter[udg_FalsePromise_Spell_ID] >= udg_FalsePromise_Duration[udg_FalsePromise_AbilityLvl[udg_FalsePromise_Spell_ID]] ) ) then
        return true
    endif
    return false
endfunction

function Trig_False_Promise_Loop_Func002Func009Func005C takes nothing returns boolean
    if ( not ( udg_FalsePromise_CounterDamage[udg_FalsePromise_Spell_ID] > ( udg_FalsePromise_CounterHeal[udg_FalsePromise_Spell_ID] + udg_FalsePromise_HitPoints[udg_FalsePromise_Spell_ID] ) ) ) then
        return false
    endif
    return true
endfunction

function Trig_False_Promise_Loop_Func002Func009Func021C takes nothing returns boolean
    if ( not ( udg_FalsePromise_SpellCount == 0 ) ) then
        return false
    endif
    return true
endfunction

function Trig_False_Promise_Loop_Func002Func009C takes nothing returns boolean
    if ( not Trig_False_Promise_Loop_Func002Func009Func001C() ) then
        return false
    endif
    return true
endfunction

function Trig_False_Promise_Loop_Actions takes nothing returns nothing
    set udg_FalsePromise_Spell_ID=0
    set udg_FalsePromise_LoopInt=1
    loop
        exitwhen udg_FalsePromise_LoopInt > udg_FalsePromise_SpellCount
        set udg_FalsePromise_Spell_ID=udg_FalsePromise_NodeNext[udg_FalsePromise_Spell_ID]
        //  
        // nulling any healing that happened in between loop iterations
        set udg_FalsePromise_TempReal=GetUnitStateSwap(UNIT_STATE_LIFE, udg_FalsePromise_Target[udg_FalsePromise_Spell_ID])
        if ( Trig_False_Promise_Loop_Func002Func005C() ) then
            call SetUnitLifeBJ(udg_FalsePromise_Target[udg_FalsePromise_Spell_ID], udg_FalsePromise_HitPoints[udg_FalsePromise_Spell_ID])
            set udg_FalsePromise_CounterHeal[udg_FalsePromise_Spell_ID]=( udg_FalsePromise_CounterHeal[udg_FalsePromise_Spell_ID] + ( udg_FalsePromise_TempReal - udg_FalsePromise_HitPoints[udg_FalsePromise_Spell_ID] ) )
        else
            // hit points have not changed
        endif
        //  
        // checking if it is time to deindex
        set udg_FalsePromise_Counter[udg_FalsePromise_Spell_ID]=( udg_FalsePromise_Counter[udg_FalsePromise_Spell_ID] + udg_FalsePromise_PeriodicTimer )
        if ( Trig_False_Promise_Loop_Func002Func009C() ) then
            call DestroyEffectBJ(udg_FalsePromise_TargetSFX[udg_FalsePromise_Spell_ID])
            call UnitRemoveBuffBJ(udg_FalsePromise_Buff, udg_FalsePromise_Target[udg_FalsePromise_Spell_ID])
            // checking if target should be healed or fatally damaged
            if ( Trig_False_Promise_Loop_Func002Func009Func005C() ) then
                // fatally damaging target with the unit that dealt the most damage
                call SetUnitLifeBJ(udg_FalsePromise_Target[udg_FalsePromise_Spell_ID], 1.00)
                call UnitDamageTargetBJ(udg_FalsePromise_DamageUnit[udg_FalsePromise_Spell_ID], udg_FalsePromise_Target[udg_FalsePromise_Spell_ID], udg_FalsePromise_HitPoints[udg_FalsePromise_Spell_ID], ATTACK_TYPE_CHAOS, DAMAGE_TYPE_UNIVERSAL)
                call AddSpecialEffectTargetUnitBJ(udg_FalsePromise_SFXDamage_AP, udg_FalsePromise_Target[udg_FalsePromise_Spell_ID], udg_FalsePromise_SFXDamage)
                call DestroyEffectBJ(GetLastCreatedEffectBJ())
                call AddSpecialEffectTargetUnitBJ(udg_FalsePromise_SFXCredit_AP, udg_FalsePromise_DamageUnit[udg_FalsePromise_Spell_ID], udg_FalsePromise_SFXCredit)
                call DestroyEffectBJ(GetLastCreatedEffectBJ())
            else
                // healing unit
                call SetUnitLifeBJ(udg_FalsePromise_Target[udg_FalsePromise_Spell_ID], ( udg_FalsePromise_HitPoints[udg_FalsePromise_Spell_ID] + ( udg_FalsePromise_CounterHeal[udg_FalsePromise_Spell_ID] * udg_FalsePromise_HealMultiplier[udg_FalsePromise_AbilityLvl[udg_FalsePromise_Spell_ID]] ) ))
                call AddSpecialEffectTargetUnitBJ(udg_FalsePromise_SFXHeal_AP, udg_FalsePromise_Target[udg_FalsePromise_Spell_ID], udg_FalsePromise_SFXHeal)
                call DestroyEffectBJ(GetLastCreatedEffectBJ())
            endif
            set udg_FalsePromise_Unit_ID=GetHandleId(udg_FalsePromise_Target[udg_FalsePromise_Spell_ID])
            call FlushChildHashtableBJ(udg_FalsePromise_Unit_ID, udg_FalsePromise_Hash)
            //  
            set udg_FalsePromise_Unit=udg_FalsePromise_Target[udg_FalsePromise_Spell_ID]
            set udg_FalsePromise_AbiLvl=udg_FalsePromise_AbilityLvl[udg_FalsePromise_Spell_ID]
            set udg_FalsePromise_Event=0.00
            set udg_FalsePromise_Event=2.00
            set udg_FalsePromise_Event=0.00
            //  
            set udg_FalsePromise_RecycledStack[udg_FalsePromise_RecycledSize]=udg_FalsePromise_Spell_ID
            set udg_FalsePromise_RecycledSize=( udg_FalsePromise_RecycledSize + 1 )
            set udg_FalsePromise_NodeNext[udg_FalsePromise_NodePrev[udg_FalsePromise_Spell_ID]]=udg_FalsePromise_NodeNext[udg_FalsePromise_Spell_ID]
            set udg_FalsePromise_NodePrev[udg_FalsePromise_NodeNext[udg_FalsePromise_Spell_ID]]=udg_FalsePromise_NodePrev[udg_FalsePromise_Spell_ID]
            //  
            set udg_FalsePromise_SpellCount=( udg_FalsePromise_SpellCount - 1 )
            if ( Trig_False_Promise_Loop_Func002Func009Func021C() ) then
                call DisableTrigger(gg_trg_False_Promise_Loop)
                call DisableTrigger(gg_trg_False_Promise_Damage)
            else
                // this is not the last active spell instance; do not turn triggers off
            endif
        else
            // spell duration has not expired; continue looping
        endif
        set udg_FalsePromise_LoopInt=udg_FalsePromise_LoopInt + 1
    endloop
endfunction

//===========================================================================
function InitTrig_False_Promise_Loop takes nothing returns nothing
    set gg_trg_False_Promise_Loop=CreateTrigger()
    call DisableTrigger(gg_trg_False_Promise_Loop)
    call TriggerAddAction(gg_trg_False_Promise_Loop, function Trig_False_Promise_Loop_Actions)
endfunction

//===========================================================================
// Trigger: False Promise Damage
//===========================================================================
function Trig_False_Promise_Damage_Conditions takes nothing returns boolean
    if ( not ( UnitHasBuffBJ(udg_DamageEventTarget, udg_FalsePromise_Buff) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_False_Promise_Damage_Func005C takes nothing returns boolean
    if ( not ( HaveSavedValue(udg_FalsePromise_TempInt, bj_HASHTABLE_REAL, udg_FalsePromise_Unit_ID, udg_FalsePromise_Hash) == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_False_Promise_Damage_Func010C takes nothing returns boolean
    if ( not ( udg_FalsePromise_TempReal >= udg_FalsePromise_Damage[udg_FalsePromise_Spell_ID] ) ) then
        return false
    endif
    return true
endfunction

function Trig_False_Promise_Damage_Actions takes nothing returns nothing
    set udg_DamageEventAmount=0.00
    //  
    set udg_FalsePromise_Unit_ID=GetHandleId(udg_DamageEventTarget)
    set udg_FalsePromise_TempInt=GetUnitUserData(udg_DamageEventSource)
    if ( Trig_False_Promise_Damage_Func005C() ) then
        set udg_FalsePromise_TempReal=udg_DamageEventPrevAmt
    else
        set udg_FalsePromise_TempReal=( LoadRealBJ(udg_FalsePromise_TempInt, udg_FalsePromise_Unit_ID, udg_FalsePromise_Hash) + udg_DamageEventPrevAmt )
    endif
    call SaveRealBJ(udg_FalsePromise_TempReal, udg_FalsePromise_TempInt, udg_FalsePromise_Unit_ID, udg_FalsePromise_Hash)
    //  
    // keeping track of which unit dealt the most damage to this target
    set udg_FalsePromise_Spell_ID=udg_FalsePromise_SpellNode[GetUnitUserData(udg_DamageEventTarget)]
    if ( Trig_False_Promise_Damage_Func010C() ) then
        set udg_FalsePromise_Damage[udg_FalsePromise_Spell_ID]=udg_FalsePromise_TempReal
        set udg_FalsePromise_DamageUnit[udg_FalsePromise_Spell_ID]=udg_DamageEventSource
    else
        // unit has not dealt the most damage yet
    endif
    set udg_FalsePromise_CounterDamage[udg_FalsePromise_Spell_ID]=( udg_FalsePromise_CounterDamage[udg_FalsePromise_Spell_ID] + udg_DamageEventPrevAmt )
endfunction

//===========================================================================
function InitTrig_False_Promise_Damage takes nothing returns nothing
    set gg_trg_False_Promise_Damage=CreateTrigger()
    call DisableTrigger(gg_trg_False_Promise_Damage)
    call TriggerRegisterVariableEvent(gg_trg_False_Promise_Damage, "udg_DamageModifierEvent", EQUAL, 1.00)
    call TriggerAddCondition(gg_trg_False_Promise_Damage, Condition(function Trig_False_Promise_Damage_Conditions))
    call TriggerAddAction(gg_trg_False_Promise_Damage, function Trig_False_Promise_Damage_Actions)
endfunction

//===========================================================================
// Trigger: RecruitGroup
//===========================================================================
function Trig_RecruitGroup_Func001002002 takes nothing returns boolean
    return ( UnitHasBuffBJ(GetFilterUnit(), 'B005') == true )
endfunction

function Trig_RecruitGroup_Func002002002 takes nothing returns boolean
    return ( UnitHasBuffBJ(GetFilterUnit(), 'B005') == false )
endfunction

function Trig_RecruitGroup_Func004Func001Func002003001003 takes nothing returns boolean
    return ( IsUnitAlly(GetFilterUnit(), GetOwningPlayer(GetEnumUnit())) == true )
endfunction

function Trig_RecruitGroup_Func004Func001C takes nothing returns boolean
    return true
endfunction

function Trig_RecruitGroup_Func004A takes nothing returns nothing
    if ( Trig_RecruitGroup_Func004Func001C() ) then
        call IssueTargetOrderBJ(GetEnumUnit(), "attack", GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(512, GetUnitLoc(GetEnumUnit()), Condition(function Trig_RecruitGroup_Func004Func001Func002003001003))))
    else
        call DoNothing()
    endif
endfunction

function Trig_RecruitGroup_Actions takes nothing returns nothing
    set udg_RecruitGroup=GetUnitsInRectMatching(GetEntireMapRect(), Condition(function Trig_RecruitGroup_Func001002002))
    set udg_NotRecruit=GetUnitsInRectMatching(GetEntireMapRect(), Condition(function Trig_RecruitGroup_Func002002002))
    set bj_wantDestroyGroup=true
    call ForGroupBJ(udg_RecruitGroup, function Trig_RecruitGroup_Func004A)
endfunction

//===========================================================================
function InitTrig_RecruitGroup takes nothing returns nothing
    set gg_trg_RecruitGroup=CreateTrigger()
    call TriggerRegisterTimerEventPeriodic(gg_trg_RecruitGroup, 1.00)
    call TriggerAddAction(gg_trg_RecruitGroup, function Trig_RecruitGroup_Actions)
endfunction

//===========================================================================
// Trigger: Безымянный триггер 001
//===========================================================================
function Trig_____________________________________001_Func001001 takes nothing returns boolean
    return ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_CREEP )
endfunction

function Trig_____________________________________001_Func001002 takes nothing returns boolean
    return ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_COMPUTER )
endfunction

function Trig_____________________________________001_Conditions takes nothing returns boolean
    if ( not GetBooleanOr(Trig_____________________________________001_Func001001(), Trig_____________________________________001_Func001002()) ) then
        return false
    endif
    return true
endfunction

function Trig_____________________________________001_Func002Func003001 takes nothing returns boolean
    return ( IsUnitAlly(GetAttacker(), GetOwningPlayer(GetAttackedUnitBJ())) == true )
endfunction

function Trig_____________________________________001_Func002Func003002 takes nothing returns boolean
    return ( GetUnitLifePercent(GetAttackedUnitBJ()) <= 35.00 )
endfunction

function Trig_____________________________________001_Func002C takes nothing returns boolean
    if ( not GetBooleanAnd(Trig_____________________________________001_Func002Func003001(), Trig_____________________________________001_Func002Func003002()) ) then
        return false
    endif
    return true
endfunction

function Trig_____________________________________001_Actions takes nothing returns nothing
    if ( Trig_____________________________________001_Func002C() ) then
        call IssueImmediateOrderBJ(GetAttacker(), "stop")
    else
        call DoNothing()
    endif
endfunction

//===========================================================================
function InitTrig_____________________________________001 takes nothing returns nothing
    set gg_trg_____________________________________001=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_____________________________________001, EVENT_PLAYER_UNIT_ATTACKED)
    call TriggerAddCondition(gg_trg_____________________________________001, Condition(function Trig_____________________________________001_Conditions))
    call TriggerAddAction(gg_trg_____________________________________001, function Trig_____________________________________001_Actions)
endfunction

//===========================================================================
// Trigger: Ult2
//===========================================================================
function Trig_Ult2_Conditions takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A02M' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Ult2_Func002002003001 takes nothing returns boolean
    return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_GROUND) == true )
endfunction

function Trig_Ult2_Func002002003002 takes nothing returns boolean
    return ( IsUnitAlly(GetFilterUnit(), GetOwningPlayer(GetTriggerUnit())) == true )
endfunction

function Trig_Ult2_Func002002003 takes nothing returns boolean
    return GetBooleanAnd(Trig_Ult2_Func002002003001(), Trig_Ult2_Func002002003002())
endfunction

function Trig_Ult2_Func004A takes nothing returns nothing
    set udg_RecruitPoint=GetUnitLoc(GetEnumUnit())
    call CreateNUnitsAtLoc(1, 'u00H', GetOwningPlayer(GetTriggerUnit()), udg_RecruitPoint, bj_UNIT_FACING)
    call UnitAddAbilityBJ('A02N', GetLastCreatedUnit())
    call IssueTargetOrderBJ(GetLastCreatedUnit(), "doom", GetEnumUnit())
    call UnitApplyTimedLifeBJ(1.00, 'BTLF', GetLastCreatedUnit())
    call RemoveLocation(udg_RecruitPoint)
endfunction

function Trig_Ult2_Actions takes nothing returns nothing
    set udg_RecruitPoint=GetSpellTargetLoc()
    set udg_RecruitGroup=GetUnitsInRangeOfLocMatching(500.00, udg_RecruitPoint, Condition(function Trig_Ult2_Func002002003))
    call RemoveLocation(udg_RecruitPoint)
    call ForGroupBJ(udg_RecruitGroup, function Trig_Ult2_Func004A)
endfunction

//===========================================================================
function InitTrig_Ult2 takes nothing returns nothing
    set gg_trg_Ult2=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Ult2, EVENT_PLAYER_UNIT_SPELL_CAST)
    call TriggerAddCondition(gg_trg_Ult2, Condition(function Trig_Ult2_Conditions))
    call TriggerAddAction(gg_trg_Ult2, function Trig_Ult2_Actions)
endfunction

//===========================================================================
// Trigger: Elf upgrade
//===========================================================================
function Trig_Elf_upgrade_Conditions takes nothing returns boolean
    if ( not ( GetResearched() == 'R001' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Elf_upgrade_Func007Func001C takes nothing returns boolean
    if ( not ( GetPlayerTechCountSimple('R001', GetOwningPlayer(GetEnumUnit())) == 1 ) ) then
        return false
    endif
    if ( not ( IsUnitAlly(GetEnumUnit(), GetOwningPlayer(GetTriggerUnit())) == true ) ) then
        return false
    endif
    if ( not ( GetUnitTypeId(GetEnumUnit()) == 'hmil' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Elf_upgrade_Func007Func002C takes nothing returns boolean
    if ( not ( GetPlayerTechCountSimple('R001', GetOwningPlayer(GetEnumUnit())) == 1 ) ) then
        return false
    endif
    if ( not ( IsUnitAlly(GetEnumUnit(), GetOwningPlayer(GetTriggerUnit())) == true ) ) then
        return false
    endif
    if ( not ( GetUnitTypeId(GetEnumUnit()) == 'hpea' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Elf_upgrade_Func007A takes nothing returns nothing
    if ( Trig_Elf_upgrade_Func007Func001C() ) then
        call ReplaceUnitBJ(GetEnumUnit(), 'h00G', bj_UNIT_STATE_METHOD_RELATIVE)
    else
        call DoNothing()
    endif
    if ( Trig_Elf_upgrade_Func007Func002C() ) then
        call UnitAddAbilityBJ('S005', GetEnumUnit())
    else
        call DoNothing()
    endif
endfunction

function Trig_Elf_upgrade_Actions takes nothing returns nothing
    call SetPlayerUnitAvailableBJ('h00G', true, GetOwningPlayer(GetTriggerUnit()))
    call SetPlayerUnitAvailableBJ('nbt2', true, GetOwningPlayer(GetTriggerUnit()))
    call SetPlayerUnitAvailableBJ('ndt2', true, GetOwningPlayer(GetTriggerUnit()))
    call SetPlayerUnitAvailableBJ('net2', true, GetOwningPlayer(GetTriggerUnit()))
    call SetPlayerUnitAvailableBJ('nft2', true, GetOwningPlayer(GetTriggerUnit()))
    set bj_wantDestroyGroup=true
    call ForGroupBJ(GetUnitsInRectAll(GetPlayableMapRect()), function Trig_Elf_upgrade_Func007A)
endfunction

//===========================================================================
function InitTrig_Elf_upgrade takes nothing returns nothing
    set gg_trg_Elf_upgrade=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Elf_upgrade, EVENT_PLAYER_UNIT_RESEARCH_FINISH)
    call TriggerAddCondition(gg_trg_Elf_upgrade, Condition(function Trig_Elf_upgrade_Conditions))
    call TriggerAddAction(gg_trg_Elf_upgrade, function Trig_Elf_upgrade_Actions)
endfunction

//===========================================================================
// Trigger: Ritual
//===========================================================================
function Trig_Ritual_Conditions takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A02B' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Ritual_Actions takes nothing returns nothing
    call KillUnit(GetTriggerUnit())
endfunction

//===========================================================================
function InitTrig_Ritual takes nothing returns nothing
    set gg_trg_Ritual=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Ritual, EVENT_PLAYER_UNIT_SPELL_FINISH)
    call TriggerAddCondition(gg_trg_Ritual, Condition(function Trig_Ritual_Conditions))
    call TriggerAddAction(gg_trg_Ritual, function Trig_Ritual_Actions)
endfunction

//===========================================================================
// Trigger: PierceIf
//===========================================================================
function Trig_PierceIf_Conditions takes nothing returns boolean
    if ( not ( GetResearched() == 'R000' ) ) then
        return false
    endif
    if ( not ( GetPlayerTechCountSimple('Rovs', GetOwningPlayer(GetTriggerUnit())) == 0 ) ) then
        return false
    endif
    return true
endfunction

function Trig_PierceIf_Actions takes nothing returns nothing
    call SetPlayerTechMaxAllowedSwap('R008', 1, GetOwningPlayer(GetTriggerUnit()))
    call SetPlayerTechMaxAllowedSwap('Rovs', 0, GetOwningPlayer(GetTriggerUnit()))
endfunction

//===========================================================================
function InitTrig_PierceIf takes nothing returns nothing
    set gg_trg_PierceIf=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_PierceIf, EVENT_PLAYER_UNIT_RESEARCH_FINISH)
    call TriggerAddCondition(gg_trg_PierceIf, Condition(function Trig_PierceIf_Conditions))
    call TriggerAddAction(gg_trg_PierceIf, function Trig_PierceIf_Actions)
endfunction

//===========================================================================
// Trigger: PierceUp
//===========================================================================
function Trig_PierceUp_Conditions takes nothing returns boolean
    if ( not ( GetResearched() == 'R000' ) ) then
        return false
    endif
    return true
endfunction

function Trig_PierceUp_Func001C takes nothing returns boolean
    if ( not ( GetPlayerTechCountSimple('Rovs', GetOwningPlayer(GetTriggerUnit())) == 1 ) ) then
        return false
    endif
    return true
endfunction

function Trig_PierceUp_Actions takes nothing returns nothing
    if ( Trig_PierceUp_Func001C() ) then
        call SetPlayerTechMaxAllowedSwap('R008', 1, GetOwningPlayer(GetTriggerUnit()))
        call SetPlayerTechResearchedSwap('R008', 1, GetOwningPlayer(GetTriggerUnit()))
    else
        call DoNothing()
    endif
endfunction

//===========================================================================
function InitTrig_PierceUp takes nothing returns nothing
    set gg_trg_PierceUp=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_PierceUp, EVENT_PLAYER_UNIT_RESEARCH_FINISH)
    call TriggerAddCondition(gg_trg_PierceUp, Condition(function Trig_PierceUp_Conditions))
    call TriggerAddAction(gg_trg_PierceUp, function Trig_PierceUp_Actions)
endfunction

//===========================================================================
// Trigger: Pierce
//===========================================================================
function Trig_Pierce_Conditions takes nothing returns boolean
    if ( not ( GetUnitAbilityLevelSwapped('A027', GetAttacker()) == 1 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Pierce_Func003C takes nothing returns boolean
    if ( not ( udg_Piercechance <= 6 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Pierce_Actions takes nothing returns nothing
    set udg_TempPiercePoint=GetUnitLoc(GetTriggerUnit())
    set udg_Piercechance=GetRandomInt(1, 25)
    if ( Trig_Pierce_Func003C() ) then
        call CreateNUnitsAtLoc(1, 'u00F', GetOwningPlayer(GetAttacker()), udg_TempPiercePoint, bj_UNIT_FACING)
        call UnitAddAbilityBJ('A028', GetLastCreatedUnit())
        call IssueTargetOrderBJ(GetLastCreatedUnit(), "cripple", GetAttackedUnitBJ())
        call UnitApplyTimedLifeBJ(1.00, 'BTLF', GetLastCreatedUnit())
         call RemoveLocation(udg_TempPiercePoint)
    else
        call DoNothing()
    endif
endfunction

//===========================================================================
function InitTrig_Pierce takes nothing returns nothing
    set gg_trg_Pierce=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Pierce, EVENT_PLAYER_UNIT_ATTACKED)
    call TriggerAddCondition(gg_trg_Pierce, Condition(function Trig_Pierce_Conditions))
    call TriggerAddAction(gg_trg_Pierce, function Trig_Pierce_Actions)
endfunction

//===========================================================================
// Trigger: FEL ORC
//===========================================================================
function Trig_FEL_ORC_Conditions takes nothing returns boolean
    if ( not ( GetResearched() == 'R000' ) ) then
        return false
    endif
    return true
endfunction

function Trig_FEL_ORC_Func012Func001C takes nothing returns boolean
    if ( not ( GetPlayerTechCountSimple('R000', GetOwningPlayer(GetEnumUnit())) == 1 ) ) then
        return false
    endif
    if ( not ( GetUnitTypeId(GetEnumUnit()) == 'owyv' ) ) then
        return false
    endif
    return true
endfunction

function Trig_FEL_ORC_Func012Func002C takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetEnumUnit()) == 'oshm' ) ) then
        return false
    endif
    if ( not ( GetPlayerTechCountSimple('R000', GetOwningPlayer(GetEnumUnit())) == 1 ) ) then
        return false
    endif
    return true
endfunction

function Trig_FEL_ORC_Func012Func003C takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetEnumUnit()) == 'okod' ) ) then
        return false
    endif
    if ( not ( GetPlayerTechCountSimple('R000', GetOwningPlayer(GetEnumUnit())) == 1 ) ) then
        return false
    endif
    return true
endfunction

function Trig_FEL_ORC_Func012Func004C takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetEnumUnit()) == 'opeo' ) ) then
        return false
    endif
    if ( not ( GetPlayerTechCountSimple('R000', GetOwningPlayer(GetEnumUnit())) == 1 ) ) then
        return false
    endif
    return true
endfunction

function Trig_FEL_ORC_Func012Func005C takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetEnumUnit()) == 'orai' ) ) then
        return false
    endif
    if ( not ( GetPlayerTechCountSimple('R000', GetOwningPlayer(GetEnumUnit())) == 1 ) ) then
        return false
    endif
    return true
endfunction

function Trig_FEL_ORC_Func012Func006C takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetEnumUnit()) == 'ogru' ) ) then
        return false
    endif
    if ( not ( GetPlayerTechCountSimple('R000', GetOwningPlayer(GetEnumUnit())) == 1 ) ) then
        return false
    endif
    return true
endfunction

function Trig_FEL_ORC_Func012A takes nothing returns nothing
    if ( Trig_FEL_ORC_Func012Func001C() ) then
        call UnitAddAbilityBJ('S004', GetEnumUnit())
    else
        call DoNothing()
    endif
    if ( Trig_FEL_ORC_Func012Func002C() ) then
        call UnitAddAbilityBJ('Sca3', GetEnumUnit())
    else
        call DoNothing()
    endif
    if ( Trig_FEL_ORC_Func012Func003C() ) then
        call UnitAddAbilityBJ('Sca4', GetEnumUnit())
    else
        call DoNothing()
    endif
    if ( Trig_FEL_ORC_Func012Func004C() ) then
        call UnitAddAbilityBJ('Sca5', GetEnumUnit())
    else
        call DoNothing()
    endif
    if ( Trig_FEL_ORC_Func012Func005C() ) then
        call UnitAddAbilityBJ('Sca2', GetEnumUnit())
    else
        call DoNothing()
    endif
    if ( Trig_FEL_ORC_Func012Func006C() ) then
        call UnitAddAbilityBJ('Sca1', GetEnumUnit())
    else
        call DoNothing()
    endif
endfunction

function Trig_FEL_ORC_Actions takes nothing returns nothing
    call SetPlayerUnitAvailableBJ('o007', true, GetOwningPlayer(GetTriggerUnit()))
    call SetPlayerUnitAvailableBJ('owyv', false, GetOwningPlayer(GetTriggerUnit()))
    call SetPlayerUnitAvailableBJ('nchw', true, GetOwningPlayer(GetTriggerUnit()))
    call SetPlayerUnitAvailableBJ('oshm', false, GetOwningPlayer(GetTriggerUnit()))
    call SetPlayerUnitAvailableBJ('nckb', true, GetOwningPlayer(GetTriggerUnit()))
    call SetPlayerUnitAvailableBJ('okod', false, GetOwningPlayer(GetTriggerUnit()))
    call SetPlayerUnitAvailableBJ('ncpn', true, GetOwningPlayer(GetTriggerUnit()))
    call SetPlayerUnitAvailableBJ('opeo', false, GetOwningPlayer(GetTriggerUnit()))
    call SetPlayerUnitAvailableBJ('nchr', true, GetOwningPlayer(GetTriggerUnit()))
    call SetPlayerUnitAvailableBJ('orai', false, GetOwningPlayer(GetTriggerUnit()))
    set bj_wantDestroyGroup=true
    call ForGroupBJ(GetUnitsInRectAll(GetPlayableMapRect()), function Trig_FEL_ORC_Func012A)
endfunction

//===========================================================================
function InitTrig_FEL_ORC takes nothing returns nothing
    set gg_trg_FEL_ORC=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_FEL_ORC, EVENT_PLAYER_UNIT_RESEARCH_FINISH)
    call TriggerAddCondition(gg_trg_FEL_ORC, Condition(function Trig_FEL_ORC_Conditions))
    call TriggerAddAction(gg_trg_FEL_ORC, function Trig_FEL_ORC_Actions)
endfunction

//===========================================================================
// Trigger: VengeanceAura
//===========================================================================
function Trig_VengeanceAura_Conditions takes nothing returns boolean
    if ( not ( GetLearnedSkillBJ() == 'AEah' ) ) then
        return false
    endif
    return true
endfunction

function Trig_VengeanceAura_Func002C takes nothing returns boolean
    if ( not ( udg_VengeanceAura == 1 ) ) then
        return false
    endif
    return true
endfunction

function Trig_VengeanceAura_Func003C takes nothing returns boolean
    if ( not ( udg_VengeanceAura == 2 ) ) then
        return false
    endif
    return true
endfunction

function Trig_VengeanceAura_Func004C takes nothing returns boolean
    if ( not ( udg_VengeanceAura == 3 ) ) then
        return false
    endif
    return true
endfunction

function Trig_VengeanceAura_Actions takes nothing returns nothing
    set udg_VengeanceAura=GetUnitAbilityLevelSwapped('AEah', GetLearningUnit())
    if ( Trig_VengeanceAura_Func002C() ) then
        call UnitAddAbilityBJ('A029', GetTriggerUnit())
        call SetUnitAbilityLevelSwapped('A029', GetTriggerUnit(), udg_VengeanceAura)
    else
        call DoNothing()
    endif
    if ( Trig_VengeanceAura_Func003C() ) then
        call UnitAddAbilityBJ('A029', GetTriggerUnit())
        call SetUnitAbilityLevelSwapped('A029', GetTriggerUnit(), udg_VengeanceAura)
    else
        call DoNothing()
    endif
    if ( Trig_VengeanceAura_Func004C() ) then
        call UnitAddAbilityBJ('A029', GetTriggerUnit())
        call SetUnitAbilityLevelSwapped('A029', GetTriggerUnit(), udg_VengeanceAura)
    else
        call DoNothing()
    endif
endfunction

//===========================================================================
function InitTrig_VengeanceAura takes nothing returns nothing
    set gg_trg_VengeanceAura=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_VengeanceAura, EVENT_PLAYER_HERO_SKILL)
    call TriggerAddCondition(gg_trg_VengeanceAura, Condition(function Trig_VengeanceAura_Conditions))
    call TriggerAddAction(gg_trg_VengeanceAura, function Trig_VengeanceAura_Actions)
endfunction

//===========================================================================
// Trigger: Tranquility Arson
//===========================================================================
function Trig_Tranquility_Arson_Func001Func003Func001C takes nothing returns boolean
    if ( not ( UnitHasBuffBJ(GetEnumUnit(), 'B004') == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Tranquility_Arson_Func001Func003A takes nothing returns nothing
    if ( Trig_Tranquility_Arson_Func001Func003Func001C() ) then
        call UnitRemoveBuffBJ('B004', GetEnumUnit())
    else
        call DoNothing()
    endif
endfunction

function Trig_Tranquility_Arson_Func001C takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'AEtq' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Tranquility_Arson_Actions takes nothing returns nothing
    if ( Trig_Tranquility_Arson_Func001C() ) then
        set bj_wantDestroyGroup=true
        call ForGroupBJ(GetUnitsInRangeOfLocAll(900.00, GetUnitLoc(GetSpellAbilityUnit())), function Trig_Tranquility_Arson_Func001Func003A)
    else
        call DoNothing()
    endif
endfunction

//===========================================================================
function InitTrig_Tranquility_Arson takes nothing returns nothing
    set gg_trg_Tranquility_Arson=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Tranquility_Arson, EVENT_PLAYER_UNIT_SPELL_CAST)
    call TriggerAddAction(gg_trg_Tranquility_Arson, function Trig_Tranquility_Arson_Actions)
endfunction

//===========================================================================
// Trigger: Arson
//===========================================================================
function Trig_Arson_Func002Func003Func001C takes nothing returns boolean
    if ( not ( UnitHasBuffBJ(GetEnumUnit(), 'B004') == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Arson_Func002Func003A takes nothing returns nothing
    if ( Trig_Arson_Func002Func003Func001C() ) then
        call UnitRemoveBuffBJ('B004', GetEnumUnit())
    else
        call DoNothing()
    endif
endfunction

function Trig_Arson_Func002Func004001001 takes nothing returns boolean
    return ( GetSpellAbilityId() == 'AHbz' )
endfunction

function Trig_Arson_Func002Func004001002 takes nothing returns boolean
    return ( GetSpellAbilityId() == 'AUcs' )
endfunction

function Trig_Arson_Func002Func004001 takes nothing returns boolean
    return GetBooleanOr(Trig_Arson_Func002Func004001001(), Trig_Arson_Func002Func004001002())
endfunction

function Trig_Arson_Func002Func004002001 takes nothing returns boolean
    return ( GetSpellAbilityId() == 'A00N' )
endfunction

function Trig_Arson_Func002Func004002002 takes nothing returns boolean
    return ( GetSpellAbilityId() == 'AOsh' )
endfunction

function Trig_Arson_Func002Func004002 takes nothing returns boolean
    return GetBooleanOr(Trig_Arson_Func002Func004002001(), Trig_Arson_Func002Func004002002())
endfunction

function Trig_Arson_Func002C takes nothing returns boolean
    if ( not GetBooleanOr(Trig_Arson_Func002Func004001(), Trig_Arson_Func002Func004002()) ) then
        return false
    endif
    return true
endfunction

function Trig_Arson_Actions takes nothing returns nothing
    set udg_Arsonnew=GetSpellTargetLoc()
    if ( Trig_Arson_Func002C() ) then
        set bj_wantDestroyGroup=true
        call ForGroupBJ(GetUnitsInRangeOfLocAll(300.00, udg_Arsonnew), function Trig_Arson_Func002Func003A)
    else
        call DoNothing()
    endif
endfunction

//===========================================================================
function InitTrig_Arson takes nothing returns nothing
    set gg_trg_Arson=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Arson, EVENT_PLAYER_UNIT_SPELL_CAST)
    call TriggerAddAction(gg_trg_Arson, function Trig_Arson_Actions)
endfunction

//===========================================================================
// Trigger: Warden
//===========================================================================
function Trig_Warden_Conditions takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A01Z' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Warden_Func003C takes nothing returns boolean
    if ( not ( GetTimeOfDay() == 6.00 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Warden_Actions takes nothing returns nothing
    call UnitAddAbilityBJ('Sshm', GetTriggerUnit())
    call BlzUnitHideAbility(GetTriggerUnit(), 'Sshm', true)
    if ( Trig_Warden_Func003C() ) then
        call UnitRemoveAbilityBJ('Sshm', GetTriggerUnit())
    else
        call DoNothing()
    endif
endfunction

//===========================================================================
function InitTrig_Warden takes nothing returns nothing
    set gg_trg_Warden=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Warden, EVENT_PLAYER_UNIT_SPELL_FINISH)
    call TriggerAddCondition(gg_trg_Warden, Condition(function Trig_Warden_Conditions))
    call TriggerAddAction(gg_trg_Warden, function Trig_Warden_Actions)
endfunction

//===========================================================================
// Trigger: Watchers
//===========================================================================
function Trig_Watchers_Conditions takes nothing returns boolean
    if ( not ( IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker())) == true ) ) then
        return false
    endif
    if ( not ( GetUnitAbilityLevelSwapped('A01X', GetAttacker()) == 1 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Watchers_Func002Func001C takes nothing returns boolean
    if ( not ( IsUnitAlly(GetEnumUnit(), GetOwningPlayer(GetAttacker())) == true ) ) then
        return false
    endif
    if ( not ( GetUnitLifePercent(GetEnumUnit()) < 100.00 ) ) then
        return false
    endif
    if ( not ( IsUnitType(GetEnumUnit(), UNIT_TYPE_STRUCTURE) == false ) ) then
        return false
    endif
    if ( not ( IsUnitType(GetEnumUnit(), UNIT_TYPE_MECHANICAL) == false ) ) then
        return false
    endif
    if ( not ( IsUnitAliveBJ(GetEnumUnit()) == true ) ) then
        return false
    endif
    if ( not ( GetOwningPlayer(GetEnumUnit()) != Player(PLAYER_NEUTRAL_PASSIVE) ) ) then
        return false
    endif
    return true
endfunction

function Trig_Watchers_Func002A takes nothing returns nothing
    if ( Trig_Watchers_Func002Func001C() ) then
        call SetUnitLifeBJ(GetEnumUnit(), ( GetUnitStateSwap(UNIT_STATE_LIFE, GetEnumUnit()) + 5.00 ))
        call AddSpecialEffectTargetUnitBJ("origin", GetEnumUnit(), "Abilities\\Spells\\Human\\Heal\\HealTarget.mdl")
        call DestroyEffectBJ(GetLastCreatedEffectBJ())
    else
        call DoNothing()
    endif
endfunction

function Trig_Watchers_Actions takes nothing returns nothing
    set bj_wantDestroyGroup=true
    call ForGroupBJ(GetUnitsInRangeOfLocAll(700.00, GetUnitLoc(GetAttacker())), function Trig_Watchers_Func002A)
endfunction

//===========================================================================
function InitTrig_Watchers takes nothing returns nothing
    set gg_trg_Watchers=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Watchers, EVENT_PLAYER_UNIT_ATTACKED)
    call TriggerAddCondition(gg_trg_Watchers, Condition(function Trig_Watchers_Conditions))
    call TriggerAddAction(gg_trg_Watchers, function Trig_Watchers_Actions)
endfunction

//===========================================================================
// Trigger: Evasion Aura
//===========================================================================
function Trig_Evasion_Aura_Func001002002 takes nothing returns boolean
    return ( UnitHasBuffBJ(GetFilterUnit(), 'B000') == true )
endfunction

function Trig_Evasion_Aura_Func002002002 takes nothing returns boolean
    return ( UnitHasBuffBJ(GetFilterUnit(), 'B000') != true )
endfunction

function Trig_Evasion_Aura_Func004Func001C takes nothing returns boolean
    if ( not ( udg_EvasionLevel == 1 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Evasion_Aura_Func004A takes nothing returns nothing
    if ( Trig_Evasion_Aura_Func004Func001C() ) then
        call UnitRemoveAbilityBJ('A01U', GetEnumUnit())
        call UnitAddAbilityBJ('A01U', GetEnumUnit())
        call SetUnitAbilityLevelSwapped('A01T', GetEnumUnit(), 1)
        call SetPlayerAbilityAvailableBJ(false, 'A01U', GetOwningPlayer(GetEnumUnit()))
    else
        call DoNothing()
    endif
endfunction

function Trig_Evasion_Aura_Actions takes nothing returns nothing
    set udg_EvasionGroup=GetUnitsInRectMatching(GetEntireMapRect(), Condition(function Trig_Evasion_Aura_Func001002002))
    set udg_NotEvasionGroup=GetUnitsInRectMatching(GetEntireMapRect(), Condition(function Trig_Evasion_Aura_Func002002002))
    set bj_wantDestroyGroup=true
    call ForGroupBJ(udg_EvasionGroup, function Trig_Evasion_Aura_Func004A)
endfunction

//===========================================================================
function InitTrig_Evasion_Aura takes nothing returns nothing
    set gg_trg_Evasion_Aura=CreateTrigger()
    call TriggerRegisterTimerEventPeriodic(gg_trg_Evasion_Aura, 1.00)
    call TriggerAddAction(gg_trg_Evasion_Aura, function Trig_Evasion_Aura_Actions)
endfunction

//===========================================================================
// Trigger: Evasion Aura Level
//===========================================================================
function Trig_Evasion_Aura_Level_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetSummonedUnit()) == 'now3' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Evasion_Aura_Level_Actions takes nothing returns nothing
    set udg_EvasionLevel=GetUnitAbilityLevelSwapped('A01V', GetSummonedUnit())
endfunction

//===========================================================================
function InitTrig_Evasion_Aura_Level takes nothing returns nothing
    set gg_trg_Evasion_Aura_Level=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Evasion_Aura_Level, EVENT_PLAYER_UNIT_SUMMON)
    call TriggerAddCondition(gg_trg_Evasion_Aura_Level, Condition(function Trig_Evasion_Aura_Level_Conditions))
    call TriggerAddAction(gg_trg_Evasion_Aura_Level, function Trig_Evasion_Aura_Level_Actions)
endfunction

//===========================================================================
// Trigger: Infernal Rain on the map
//
// vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv
//===========================================================================
function Trig_Infernal_Rain_on_the_map_Actions takes nothing returns nothing
    set udg_pointmap=GetRandomLocInRect(GetPlayableMapRect())
    call AddSpecialEffectLocBJ(udg_pointmap, "Units\\Demon\\Infernal\\InfernalBirth.mdl")
    call PlayThematicMusicBJ("Sound\\Music\\mp3Music\\Doom.mp3")
    call DestroyEffectBJ(GetLastCreatedEffectBJ())
    call DisplayTextToForce(GetPlayersAll(), "TRIGSTR_027")
    call TriggerSleepAction(0.70)
    call CreateNUnitsAtLoc(1, 'n00B', Player(PLAYER_NEUTRAL_AGGRESSIVE), udg_pointmap, bj_UNIT_FACING)
    call RemoveLocation(udg_rainpoint)
endfunction

//===========================================================================
function InitTrig_Infernal_Rain_on_the_map takes nothing returns nothing
    set gg_trg_Infernal_Rain_on_the_map=CreateTrigger()
    call TriggerRegisterTimerEventPeriodic(gg_trg_Infernal_Rain_on_the_map, 1000.00)
    call TriggerAddAction(gg_trg_Infernal_Rain_on_the_map, function Trig_Infernal_Rain_on_the_map_Actions)
endfunction

//===========================================================================
// Trigger: Infernal Rain
//
// vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv
//===========================================================================
function Trig_Infernal_Rain_Func001002001001 takes nothing returns boolean
    return ( GetPlayerSlotState(GetFilterPlayer()) == PLAYER_SLOT_STATE_PLAYING )
endfunction

function Trig_Infernal_Rain_Func001002001002 takes nothing returns boolean
    return ( GetPlayerController(GetFilterPlayer()) == MAP_CONTROL_USER )
endfunction

function Trig_Infernal_Rain_Func001002001 takes nothing returns boolean
    return GetBooleanAnd(Trig_Infernal_Rain_Func001002001001(), Trig_Infernal_Rain_Func001002001002())
endfunction

function Trig_Infernal_Rain_Func002Func001C takes nothing returns boolean
    if ( not ( GetUnitAbilityLevelSwapped('A02L', GetEnumUnit()) == 1 ) ) then
        return false
    endif
    if ( not ( IsPlayerInForce(GetOwningPlayer(GetEnumUnit()), udg_playercountgroup) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Infernal_Rain_Func002A takes nothing returns nothing
    if ( Trig_Infernal_Rain_Func002Func001C() ) then
        set udg_rainpoint=GetRandomLocInRect(RectFromCenterSizeBJ(GetUnitLoc(GetEnumUnit()), 1500.00, 1500.00))
        call AddSpecialEffectLocBJ(udg_rainpoint, "Units\\Demon\\Infernal\\InfernalBirth.mdl")
        call PlayThematicMusicBJ("Sound\\Music\\mp3Music\\Doom.mp3")
        call DestroyEffectBJ(GetLastCreatedEffectBJ())
        call DisplayTextToForce(GetPlayersAll(), "TRIGSTR_028")
        call CreateNUnitsAtLoc(1, 'n00P', Player(PLAYER_NEUTRAL_AGGRESSIVE), udg_rainpoint, bj_UNIT_FACING)
        call DestroyForce(udg_playercountgroup)
        call RemoveLocation(udg_rainpoint)
    else
        call DoNothing()
    endif
endfunction

function Trig_Infernal_Rain_Actions takes nothing returns nothing
    set udg_playercountgroup=GetPlayersMatching(Condition(function Trig_Infernal_Rain_Func001002001))
    call ForGroupBJ(GetUnitsInRectAll(GetPlayableMapRect()), function Trig_Infernal_Rain_Func002A)
endfunction

//===========================================================================
function InitTrig_Infernal_Rain takes nothing returns nothing
    set gg_trg_Infernal_Rain=CreateTrigger()
    call TriggerRegisterTimerEventPeriodic(gg_trg_Infernal_Rain, 400.00)
    call TriggerAddAction(gg_trg_Infernal_Rain, function Trig_Infernal_Rain_Actions)
endfunction

//===========================================================================
// Trigger: Yeger
//===========================================================================
function Trig_Yeger_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTrainedUnit()) == 'H003' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Yeger_Actions takes nothing returns nothing
    call SetPlayerUnitAvailableBJ('H00E', false, GetOwningPlayer(GetTrainedUnit()))
    call SetPlayerUnitAvailableBJ('H003', false, GetOwningPlayer(GetTrainedUnit()))
endfunction

//===========================================================================
function InitTrig_Yeger takes nothing returns nothing
    set gg_trg_Yeger=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Yeger, EVENT_PLAYER_UNIT_TRAIN_FINISH)
    call TriggerAddCondition(gg_trg_Yeger, Condition(function Trig_Yeger_Conditions))
    call TriggerAddAction(gg_trg_Yeger, function Trig_Yeger_Actions)
endfunction

//===========================================================================
// Trigger: Yeger2
//===========================================================================
function Trig_Yeger2_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTrainedUnit()) == 'H00E' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Yeger2_Actions takes nothing returns nothing
    call SetPlayerUnitAvailableBJ('H003', false, GetOwningPlayer(GetTrainedUnit()))
    call SetPlayerUnitAvailableBJ('H00E', false, GetOwningPlayer(GetTrainedUnit()))
endfunction

//===========================================================================
function InitTrig_Yeger2 takes nothing returns nothing
    set gg_trg_Yeger2=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Yeger2, EVENT_PLAYER_UNIT_TRAIN_FINISH)
    call TriggerAddCondition(gg_trg_Yeger2, Condition(function Trig_Yeger2_Conditions))
    call TriggerAddAction(gg_trg_Yeger2, function Trig_Yeger2_Actions)
endfunction

//===========================================================================
// Trigger: Shaman
//===========================================================================
function Trig_Shaman_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTrainedUnit()) == 'O006' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Shaman_Actions takes nothing returns nothing
    call SetPlayerUnitAvailableBJ('Oshd', false, GetOwningPlayer(GetTrainedUnit()))
    call SetPlayerUnitAvailableBJ('O006', false, GetOwningPlayer(GetTrainedUnit()))
endfunction

//===========================================================================
function InitTrig_Shaman takes nothing returns nothing
    set gg_trg_Shaman=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Shaman, EVENT_PLAYER_UNIT_TRAIN_FINISH)
    call TriggerAddCondition(gg_trg_Shaman, Condition(function Trig_Shaman_Conditions))
    call TriggerAddAction(gg_trg_Shaman, function Trig_Shaman_Actions)
endfunction

//===========================================================================
// Trigger: Shaman copy
//===========================================================================
function Trig_Shaman_copy_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTrainedUnit()) == 'Oshd' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Shaman_copy_Actions takes nothing returns nothing
    call SetPlayerUnitAvailableBJ('Oshd', false, GetOwningPlayer(GetTrainedUnit()))
    call SetPlayerUnitAvailableBJ('O006', false, GetOwningPlayer(GetTrainedUnit()))
endfunction

//===========================================================================
function InitTrig_Shaman_copy takes nothing returns nothing
    set gg_trg_Shaman_copy=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Shaman_copy, EVENT_PLAYER_UNIT_TRAIN_FINISH)
    call TriggerAddCondition(gg_trg_Shaman_copy, Condition(function Trig_Shaman_copy_Conditions))
    call TriggerAddAction(gg_trg_Shaman_copy, function Trig_Shaman_copy_Actions)
endfunction

//===========================================================================
// Trigger: CCairne copy
//===========================================================================
function Trig_CCairne_copy_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTrainedUnit()) == 'Otch' ) ) then
        return false
    endif
    return true
endfunction

function Trig_CCairne_copy_Actions takes nothing returns nothing
    call SetPlayerUnitAvailableBJ('O005', false, GetOwningPlayer(GetTrainedUnit()))
    call SetPlayerUnitAvailableBJ('Otch', false, GetOwningPlayer(GetTrainedUnit()))
endfunction

//===========================================================================
function InitTrig_CCairne_copy takes nothing returns nothing
    set gg_trg_CCairne_copy=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_CCairne_copy, EVENT_PLAYER_UNIT_TRAIN_FINISH)
    call TriggerAddCondition(gg_trg_CCairne_copy, Condition(function Trig_CCairne_copy_Conditions))
    call TriggerAddAction(gg_trg_CCairne_copy, function Trig_CCairne_copy_Actions)
endfunction

//===========================================================================
// Trigger: Thrall Copy
//===========================================================================
function Trig_Thrall_Copy_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTrainedUnit()) == 'Ofar' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Thrall_Copy_Actions takes nothing returns nothing
    call SetPlayerUnitAvailableBJ('Ofar', false, GetOwningPlayer(GetTrainedUnit()))
    call SetPlayerUnitAvailableBJ('O004', false, GetOwningPlayer(GetTrainedUnit()))
endfunction

//===========================================================================
function InitTrig_Thrall_Copy takes nothing returns nothing
    set gg_trg_Thrall_Copy=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Thrall_Copy, EVENT_PLAYER_UNIT_TRAIN_FINISH)
    call TriggerAddCondition(gg_trg_Thrall_Copy, Condition(function Trig_Thrall_Copy_Conditions))
    call TriggerAddAction(gg_trg_Thrall_Copy, function Trig_Thrall_Copy_Actions)
endfunction

//===========================================================================
// Trigger: BM copy
//===========================================================================
function Trig_BM_copy_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTrainedUnit()) == 'Obla' ) ) then
        return false
    endif
    return true
endfunction

function Trig_BM_copy_Actions takes nothing returns nothing
    call SetPlayerUnitAvailableBJ('Obla', false, GetOwningPlayer(GetTrainedUnit()))
    call SetPlayerUnitAvailableBJ('O003', false, GetOwningPlayer(GetTrainedUnit()))
endfunction

//===========================================================================
function InitTrig_BM_copy takes nothing returns nothing
    set gg_trg_BM_copy=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_BM_copy, EVENT_PLAYER_UNIT_TRAIN_FINISH)
    call TriggerAddCondition(gg_trg_BM_copy, Condition(function Trig_BM_copy_Conditions))
    call TriggerAddAction(gg_trg_BM_copy, function Trig_BM_copy_Actions)
endfunction

//===========================================================================
// Trigger: Kael Копировать
//===========================================================================
function Trig_Kael_____________________u_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTrainedUnit()) == 'Hblm' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Kael_____________________u_Actions takes nothing returns nothing
    call SetPlayerUnitAvailableBJ('Hblm', false, GetOwningPlayer(GetTrainedUnit()))
    call SetPlayerUnitAvailableBJ('H00D', false, GetOwningPlayer(GetTrainedUnit()))
endfunction

//===========================================================================
function InitTrig_Kael_____________________u takes nothing returns nothing
    set gg_trg_Kael_____________________u=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Kael_____________________u, EVENT_PLAYER_UNIT_TRAIN_FINISH)
    call TriggerAddCondition(gg_trg_Kael_____________________u, Condition(function Trig_Kael_____________________u_Conditions))
    call TriggerAddAction(gg_trg_Kael_____________________u, function Trig_Kael_____________________u_Actions)
endfunction

//===========================================================================
// Trigger: Cairne
//===========================================================================
function Trig_Cairne_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTrainedUnit()) == 'O005' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Cairne_Actions takes nothing returns nothing
    call SetPlayerUnitAvailableBJ('Otch', false, GetOwningPlayer(GetTrainedUnit()))
    call SetPlayerUnitAvailableBJ('O005', false, GetOwningPlayer(GetTrainedUnit()))
endfunction

//===========================================================================
function InitTrig_Cairne takes nothing returns nothing
    set gg_trg_Cairne=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Cairne, EVENT_PLAYER_UNIT_TRAIN_FINISH)
    call TriggerAddCondition(gg_trg_Cairne, Condition(function Trig_Cairne_Conditions))
    call TriggerAddAction(gg_trg_Cairne, function Trig_Cairne_Actions)
endfunction

//===========================================================================
// Trigger: Thrall
//===========================================================================
function Trig_Thrall_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTrainedUnit()) == 'O004' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Thrall_Actions takes nothing returns nothing
    call SetPlayerUnitAvailableBJ('Ofar', false, GetOwningPlayer(GetTrainedUnit()))
    call SetPlayerUnitAvailableBJ('O004', false, GetOwningPlayer(GetTrainedUnit()))
endfunction

//===========================================================================
function InitTrig_Thrall takes nothing returns nothing
    set gg_trg_Thrall=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Thrall, EVENT_PLAYER_UNIT_TRAIN_FINISH)
    call TriggerAddCondition(gg_trg_Thrall, Condition(function Trig_Thrall_Conditions))
    call TriggerAddAction(gg_trg_Thrall, function Trig_Thrall_Actions)
endfunction

//===========================================================================
// Trigger: Grom
//===========================================================================
function Trig_Grom_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTrainedUnit()) == 'O003' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Grom_Actions takes nothing returns nothing
    call SetPlayerUnitAvailableBJ('Obla', false, GetOwningPlayer(GetTrainedUnit()))
    call SetPlayerUnitAvailableBJ('O003', false, GetOwningPlayer(GetTrainedUnit()))
endfunction

//===========================================================================
function InitTrig_Grom takes nothing returns nothing
    set gg_trg_Grom=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Grom, EVENT_PLAYER_UNIT_TRAIN_FINISH)
    call TriggerAddCondition(gg_trg_Grom, Condition(function Trig_Grom_Conditions))
    call TriggerAddAction(gg_trg_Grom, function Trig_Grom_Actions)
endfunction

//===========================================================================
// Trigger: Kael
//===========================================================================
function Trig_Kael_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTrainedUnit()) == 'H00D' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Kael_Actions takes nothing returns nothing
    call SetPlayerUnitAvailableBJ('Hblm', false, GetOwningPlayer(GetTrainedUnit()))
    call SetPlayerUnitAvailableBJ('H00D', false, GetOwningPlayer(GetTrainedUnit()))
endfunction

//===========================================================================
function InitTrig_Kael takes nothing returns nothing
    set gg_trg_Kael=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Kael, EVENT_PLAYER_UNIT_TRAIN_FINISH)
    call TriggerAddCondition(gg_trg_Kael, Condition(function Trig_Kael_Conditions))
    call TriggerAddAction(gg_trg_Kael, function Trig_Kael_Actions)
endfunction

//===========================================================================
// Trigger: Muradin
//===========================================================================
function Trig_Muradin_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTrainedUnit()) == 'H00C' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Muradin_Actions takes nothing returns nothing
    call SetPlayerUnitAvailableBJ('Hmkg', false, GetOwningPlayer(GetTrainedUnit()))
    call SetPlayerUnitAvailableBJ('H00C', false, GetOwningPlayer(GetTrainedUnit()))
endfunction

//===========================================================================
function InitTrig_Muradin takes nothing returns nothing
    set gg_trg_Muradin=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Muradin, EVENT_PLAYER_UNIT_TRAIN_FINISH)
    call TriggerAddCondition(gg_trg_Muradin, Condition(function Trig_Muradin_Conditions))
    call TriggerAddAction(gg_trg_Muradin, function Trig_Muradin_Actions)
endfunction

//===========================================================================
// Trigger: Muradin Копировать
//===========================================================================
function Trig_Muradin_____________________u_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTrainedUnit()) == 'Hmkg' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Muradin_____________________u_Actions takes nothing returns nothing
    call SetPlayerUnitAvailableBJ('Hmkg', false, GetOwningPlayer(GetTrainedUnit()))
    call SetPlayerUnitAvailableBJ('H00C', false, GetOwningPlayer(GetTrainedUnit()))
endfunction

//===========================================================================
function InitTrig_Muradin_____________________u takes nothing returns nothing
    set gg_trg_Muradin_____________________u=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Muradin_____________________u, EVENT_PLAYER_UNIT_TRAIN_FINISH)
    call TriggerAddCondition(gg_trg_Muradin_____________________u, Condition(function Trig_Muradin_____________________u_Conditions))
    call TriggerAddAction(gg_trg_Muradin_____________________u, function Trig_Muradin_____________________u_Actions)
endfunction

//===========================================================================
// Trigger: Archmage
//===========================================================================
function Trig_Archmage_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTrainedUnit()) == 'H00B' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Archmage_Actions takes nothing returns nothing
    call SetPlayerUnitAvailableBJ('Hamg', false, GetOwningPlayer(GetTrainedUnit()))
    call SetPlayerUnitAvailableBJ('H00B', false, GetOwningPlayer(GetTrainedUnit()))
endfunction

//===========================================================================
function InitTrig_Archmage takes nothing returns nothing
    set gg_trg_Archmage=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Archmage, EVENT_PLAYER_UNIT_TRAIN_FINISH)
    call TriggerAddCondition(gg_trg_Archmage, Condition(function Trig_Archmage_Conditions))
    call TriggerAddAction(gg_trg_Archmage, function Trig_Archmage_Actions)
endfunction

//===========================================================================
// Trigger: Archmage Копировать
//===========================================================================
function Trig_Archmage_____________________u_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTrainedUnit()) == 'Hamg' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Archmage_____________________u_Actions takes nothing returns nothing
    call SetPlayerUnitAvailableBJ('Hamg', false, GetOwningPlayer(GetTrainedUnit()))
    call SetPlayerUnitAvailableBJ('H00B', false, GetOwningPlayer(GetTrainedUnit()))
endfunction

//===========================================================================
function InitTrig_Archmage_____________________u takes nothing returns nothing
    set gg_trg_Archmage_____________________u=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Archmage_____________________u, EVENT_PLAYER_UNIT_TRAIN_FINISH)
    call TriggerAddCondition(gg_trg_Archmage_____________________u, Condition(function Trig_Archmage_____________________u_Conditions))
    call TriggerAddAction(gg_trg_Archmage_____________________u, function Trig_Archmage_____________________u_Actions)
endfunction

//===========================================================================
// Trigger: Paladin
//===========================================================================
function Trig_Paladin_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTrainedUnit()) == 'H00A' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Paladin_Actions takes nothing returns nothing
    call SetPlayerUnitAvailableBJ('Hpal', false, GetOwningPlayer(GetTrainedUnit()))
    call SetPlayerUnitAvailableBJ('H00A', false, GetOwningPlayer(GetTrainedUnit()))
endfunction

//===========================================================================
function InitTrig_Paladin takes nothing returns nothing
    set gg_trg_Paladin=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Paladin, EVENT_PLAYER_UNIT_TRAIN_FINISH)
    call TriggerAddCondition(gg_trg_Paladin, Condition(function Trig_Paladin_Conditions))
    call TriggerAddAction(gg_trg_Paladin, function Trig_Paladin_Actions)
endfunction

//===========================================================================
// Trigger: Paladin Копировать
//===========================================================================
function Trig_Paladin_____________________u_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTrainedUnit()) == 'Hpal' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Paladin_____________________u_Actions takes nothing returns nothing
    call SetPlayerUnitAvailableBJ('Hpal', false, GetOwningPlayer(GetTrainedUnit()))
    call SetPlayerUnitAvailableBJ('H00A', false, GetOwningPlayer(GetTrainedUnit()))
endfunction

//===========================================================================
function InitTrig_Paladin_____________________u takes nothing returns nothing
    set gg_trg_Paladin_____________________u=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Paladin_____________________u, EVENT_PLAYER_UNIT_TRAIN_FINISH)
    call TriggerAddCondition(gg_trg_Paladin_____________________u, Condition(function Trig_Paladin_____________________u_Conditions))
    call TriggerAddAction(gg_trg_Paladin_____________________u, function Trig_Paladin_____________________u_Actions)
endfunction

//===========================================================================
// Trigger: Sylvanas quote
//===========================================================================
function Trig_Sylvanas_quote_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTrainedUnit()) == 'H00E' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Sylvanas_quote_Actions takes nothing returns nothing
    if GetLocalPlayer() == GetOwningPlayer(GetTriggerUnit()) then
    call PlaySoundOnUnitBJ(gg_snd_Sylvanasrecruited, 100, GetTrainedUnit())
    call KillSoundWhenDoneBJ(GetLastPlayedSound())
    endif
endfunction

//===========================================================================
function InitTrig_Sylvanas_quote takes nothing returns nothing
    set gg_trg_Sylvanas_quote=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Sylvanas_quote, EVENT_PLAYER_UNIT_TRAIN_FINISH)
    call TriggerAddCondition(gg_trg_Sylvanas_quote, Condition(function Trig_Sylvanas_quote_Conditions))
    call TriggerAddAction(gg_trg_Sylvanas_quote, function Trig_Sylvanas_quote_Actions)
endfunction

//===========================================================================
// Trigger: Muradin quote
//===========================================================================
function Trig_Muradin_quote_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTrainedUnit()) == 'H00C' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Muradin_quote_Actions takes nothing returns nothing
    if GetLocalPlayer() == GetOwningPlayer(GetTriggerUnit()) then
    call PlaySoundOnUnitBJ(gg_snd_Muradinrecruited, 100, GetTrainedUnit())
    call KillSoundWhenDoneBJ(GetLastPlayedSound())
    endif
endfunction

//===========================================================================
function InitTrig_Muradin_quote takes nothing returns nothing
    set gg_trg_Muradin_quote=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Muradin_quote, EVENT_PLAYER_UNIT_TRAIN_FINISH)
    call TriggerAddCondition(gg_trg_Muradin_quote, Condition(function Trig_Muradin_quote_Conditions))
    call TriggerAddAction(gg_trg_Muradin_quote, function Trig_Muradin_quote_Actions)
endfunction

//===========================================================================
// Trigger: Archmage quote
//===========================================================================
function Trig_Archmage_quote_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTrainedUnit()) == 'H00B' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Archmage_quote_Actions takes nothing returns nothing
    if GetLocalPlayer() == GetOwningPlayer(GetTriggerUnit()) then
    call PlaySoundOnUnitBJ(gg_snd_Jainarecruited, 100, GetTrainedUnit())
    call KillSoundWhenDoneBJ(GetLastPlayedSound())
    endif
endfunction

//===========================================================================
function InitTrig_Archmage_quote takes nothing returns nothing
    set gg_trg_Archmage_quote=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Archmage_quote, EVENT_PLAYER_UNIT_TRAIN_FINISH)
    call TriggerAddCondition(gg_trg_Archmage_quote, Condition(function Trig_Archmage_quote_Conditions))
    call TriggerAddAction(gg_trg_Archmage_quote, function Trig_Archmage_quote_Actions)
endfunction

//===========================================================================
// Trigger: Paladin quote
//===========================================================================
function Trig_Paladin_quote_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTrainedUnit()) == 'H00A' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Paladin_quote_Actions takes nothing returns nothing
    if GetLocalPlayer() == GetOwningPlayer(GetTriggerUnit()) then
    call PlaySoundOnUnitBJ(gg_snd_Utherrecruited, 100, GetTrainedUnit())
    call KillSoundWhenDoneBJ(GetLastPlayedSound())
    endif
endfunction

//===========================================================================
function InitTrig_Paladin_quote takes nothing returns nothing
    set gg_trg_Paladin_quote=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Paladin_quote, EVENT_PLAYER_UNIT_TRAIN_FINISH)
    call TriggerAddCondition(gg_trg_Paladin_quote, Condition(function Trig_Paladin_quote_Conditions))
    call TriggerAddAction(gg_trg_Paladin_quote, function Trig_Paladin_quote_Actions)
endfunction

//===========================================================================
// Trigger: Cairne quote
//===========================================================================
function Trig_Cairne_quote_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTrainedUnit()) == 'O005' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Cairne_quote_Actions takes nothing returns nothing
    if GetLocalPlayer() == GetOwningPlayer(GetTriggerUnit()) then
    call PlaySoundOnUnitBJ(gg_snd_Cairnerecruited, 100, GetTrainedUnit())
    call KillSoundWhenDoneBJ(GetLastPlayedSound())
    endif
endfunction

//===========================================================================
function InitTrig_Cairne_quote takes nothing returns nothing
    set gg_trg_Cairne_quote=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Cairne_quote, EVENT_PLAYER_UNIT_TRAIN_FINISH)
    call TriggerAddCondition(gg_trg_Cairne_quote, Condition(function Trig_Cairne_quote_Conditions))
    call TriggerAddAction(gg_trg_Cairne_quote, function Trig_Cairne_quote_Actions)
endfunction

//===========================================================================
// Trigger: Thrall quote
//===========================================================================
function Trig_Thrall_quote_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTrainedUnit()) == 'O004' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Thrall_quote_Actions takes nothing returns nothing
    if GetLocalPlayer() == GetOwningPlayer(GetTriggerUnit()) then
    call PlaySoundOnUnitBJ(gg_snd_ThrallRecruited, 100, GetTrainedUnit())
    call KillSoundWhenDoneBJ(GetLastPlayedSound())
    endif
endfunction

//===========================================================================
function InitTrig_Thrall_quote takes nothing returns nothing
    set gg_trg_Thrall_quote=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Thrall_quote, EVENT_PLAYER_UNIT_TRAIN_FINISH)
    call TriggerAddCondition(gg_trg_Thrall_quote, Condition(function Trig_Thrall_quote_Conditions))
    call TriggerAddAction(gg_trg_Thrall_quote, function Trig_Thrall_quote_Actions)
endfunction

//===========================================================================
// Trigger: Grom quote
//===========================================================================
function Trig_Grom_quote_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTrainedUnit()) == 'O003' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Grom_quote_Actions takes nothing returns nothing
    if GetLocalPlayer() == GetOwningPlayer(GetTriggerUnit()) then
    call PlaySoundOnUnitBJ(gg_snd_GromRecruited, 100, GetTrainedUnit())
    call KillSoundWhenDoneBJ(GetLastPlayedSound())
    endif
endfunction

//===========================================================================
function InitTrig_Grom_quote takes nothing returns nothing
    set gg_trg_Grom_quote=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Grom_quote, EVENT_PLAYER_UNIT_TRAIN_FINISH)
    call TriggerAddCondition(gg_trg_Grom_quote, Condition(function Trig_Grom_quote_Conditions))
    call TriggerAddAction(gg_trg_Grom_quote, function Trig_Grom_quote_Actions)
endfunction

//===========================================================================
// Trigger: Tyrande quote
//===========================================================================
function Trig_Tyrande_quote_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTrainedUnit()) == 'E001' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Tyrande_quote_Actions takes nothing returns nothing
    if GetLocalPlayer() == GetOwningPlayer(GetTriggerUnit()) then
    call PlaySoundOnUnitBJ(gg_snd_TyrandeRecruited, 100, GetTrainedUnit())
    call KillSoundWhenDoneBJ(GetLastPlayedSound())
    endif
endfunction

//===========================================================================
function InitTrig_Tyrande_quote takes nothing returns nothing
    set gg_trg_Tyrande_quote=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Tyrande_quote, EVENT_PLAYER_UNIT_TRAIN_FINISH)
    call TriggerAddCondition(gg_trg_Tyrande_quote, Condition(function Trig_Tyrande_quote_Conditions))
    call TriggerAddAction(gg_trg_Tyrande_quote, function Trig_Tyrande_quote_Actions)
endfunction

//===========================================================================
// Trigger: Maeve quote
//===========================================================================
function Trig_Maeve_quote_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTrainedUnit()) == 'E003' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Maeve_quote_Actions takes nothing returns nothing
    call SetPlayerUnitAvailableBJ('Ewar', false, GetOwningPlayer(GetTrainedUnit()))
    call SetPlayerUnitAvailableBJ('E003', false, GetOwningPlayer(GetTrainedUnit()))
endfunction

//===========================================================================
function InitTrig_Maeve_quote takes nothing returns nothing
    set gg_trg_Maeve_quote=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Maeve_quote, EVENT_PLAYER_UNIT_TRAIN_FINISH)
    call TriggerAddCondition(gg_trg_Maeve_quote, Condition(function Trig_Maeve_quote_Conditions))
    call TriggerAddAction(gg_trg_Maeve_quote, function Trig_Maeve_quote_Actions)
endfunction

//===========================================================================
// Trigger: Maeve quote Копировать
//===========================================================================
function Trig_Maeve_quote_____________________u_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTrainedUnit()) == 'Ewar' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Maeve_quote_____________________u_Actions takes nothing returns nothing
    call SetPlayerUnitAvailableBJ('Ewar', false, GetOwningPlayer(GetTrainedUnit()))
    call SetPlayerUnitAvailableBJ('E003', false, GetOwningPlayer(GetTrainedUnit()))
endfunction

//===========================================================================
function InitTrig_Maeve_quote_____________________u takes nothing returns nothing
    set gg_trg_Maeve_quote_____________________u=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Maeve_quote_____________________u, EVENT_PLAYER_UNIT_TRAIN_FINISH)
    call TriggerAddCondition(gg_trg_Maeve_quote_____________________u, Condition(function Trig_Maeve_quote_____________________u_Conditions))
    call TriggerAddAction(gg_trg_Maeve_quote_____________________u, function Trig_Maeve_quote_____________________u_Actions)
endfunction

//===========================================================================
// Trigger: illidan
//===========================================================================
function Trig_illidan_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTrainedUnit()) == 'E002' ) ) then
        return false
    endif
    return true
endfunction

function Trig_illidan_Actions takes nothing returns nothing
    call SetPlayerUnitAvailableBJ('Edem', false, GetOwningPlayer(GetTrainedUnit()))
    call SetPlayerUnitAvailableBJ('E002', false, GetOwningPlayer(GetTrainedUnit()))
endfunction

//===========================================================================
function InitTrig_illidan takes nothing returns nothing
    set gg_trg_illidan=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_illidan, EVENT_PLAYER_UNIT_TRAIN_FINISH)
    call TriggerAddCondition(gg_trg_illidan, Condition(function Trig_illidan_Conditions))
    call TriggerAddAction(gg_trg_illidan, function Trig_illidan_Actions)
endfunction

//===========================================================================
// Trigger: illidan Копировать
//===========================================================================
function Trig_illidan_____________________u_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTrainedUnit()) == 'Edem' ) ) then
        return false
    endif
    return true
endfunction

function Trig_illidan_____________________u_Actions takes nothing returns nothing
    call SetPlayerUnitAvailableBJ('Edem', false, GetOwningPlayer(GetTrainedUnit()))
    call SetPlayerUnitAvailableBJ('E002', false, GetOwningPlayer(GetTrainedUnit()))
endfunction

//===========================================================================
function InitTrig_illidan_____________________u takes nothing returns nothing
    set gg_trg_illidan_____________________u=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_illidan_____________________u, EVENT_PLAYER_UNIT_TRAIN_FINISH)
    call TriggerAddCondition(gg_trg_illidan_____________________u, Condition(function Trig_illidan_____________________u_Conditions))
    call TriggerAddAction(gg_trg_illidan_____________________u, function Trig_illidan_____________________u_Actions)
endfunction

//===========================================================================
// Trigger: Tyrande
//===========================================================================
function Trig_Tyrande_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTrainedUnit()) == 'E001' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Tyrande_Actions takes nothing returns nothing
    call SetPlayerUnitAvailableBJ('Emoo', false, GetOwningPlayer(GetTrainedUnit()))
    call SetPlayerUnitAvailableBJ('E001', false, GetOwningPlayer(GetTrainedUnit()))
endfunction

//===========================================================================
function InitTrig_Tyrande takes nothing returns nothing
    set gg_trg_Tyrande=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Tyrande, EVENT_PLAYER_UNIT_TRAIN_FINISH)
    call TriggerAddCondition(gg_trg_Tyrande, Condition(function Trig_Tyrande_Conditions))
    call TriggerAddAction(gg_trg_Tyrande, function Trig_Tyrande_Actions)
endfunction

//===========================================================================
// Trigger: Tyrande Копировать
//===========================================================================
function Trig_Tyrande_____________________u_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTrainedUnit()) == 'Emoo' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Tyrande_____________________u_Actions takes nothing returns nothing
    call SetPlayerUnitAvailableBJ('Emoo', false, GetOwningPlayer(GetTrainedUnit()))
    call SetPlayerUnitAvailableBJ('E001', false, GetOwningPlayer(GetTrainedUnit()))
endfunction

//===========================================================================
function InitTrig_Tyrande_____________________u takes nothing returns nothing
    set gg_trg_Tyrande_____________________u=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Tyrande_____________________u, EVENT_PLAYER_UNIT_TRAIN_FINISH)
    call TriggerAddCondition(gg_trg_Tyrande_____________________u, Condition(function Trig_Tyrande_____________________u_Conditions))
    call TriggerAddAction(gg_trg_Tyrande_____________________u, function Trig_Tyrande_____________________u_Actions)
endfunction

//===========================================================================
// Trigger: Furion
//===========================================================================
function Trig_Furion_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTrainedUnit()) == 'Efur' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Furion_Actions takes nothing returns nothing
    call SetPlayerUnitAvailableBJ('Ekee', false, GetOwningPlayer(GetTrainedUnit()))
    call SetPlayerUnitAvailableBJ('Efur', false, GetOwningPlayer(GetTrainedUnit()))
endfunction

//===========================================================================
function InitTrig_Furion takes nothing returns nothing
    set gg_trg_Furion=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Furion, EVENT_PLAYER_UNIT_TRAIN_FINISH)
    call TriggerAddCondition(gg_trg_Furion, Condition(function Trig_Furion_Conditions))
    call TriggerAddAction(gg_trg_Furion, function Trig_Furion_Actions)
endfunction

//===========================================================================
// Trigger: Furion Копировать
//===========================================================================
function Trig_Furion_____________________u_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTrainedUnit()) == 'Ekee' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Furion_____________________u_Actions takes nothing returns nothing
    call SetPlayerUnitAvailableBJ('Ekee', false, GetOwningPlayer(GetTrainedUnit()))
    call SetPlayerUnitAvailableBJ('Efur', false, GetOwningPlayer(GetTrainedUnit()))
endfunction

//===========================================================================
function InitTrig_Furion_____________________u takes nothing returns nothing
    set gg_trg_Furion_____________________u=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Furion_____________________u, EVENT_PLAYER_UNIT_TRAIN_FINISH)
    call TriggerAddCondition(gg_trg_Furion_____________________u, Condition(function Trig_Furion_____________________u_Conditions))
    call TriggerAddAction(gg_trg_Furion_____________________u, function Trig_Furion_____________________u_Actions)
endfunction

//===========================================================================
// Trigger: KelThuzad
//===========================================================================
function Trig_KelThuzad_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTrainedUnit()) == 'U00E' ) ) then
        return false
    endif
    return true
endfunction

function Trig_KelThuzad_Actions takes nothing returns nothing
    call SetPlayerUnitAvailableBJ('Ulic', false, GetOwningPlayer(GetTrainedUnit()))
    call SetPlayerUnitAvailableBJ('U00E', false, GetOwningPlayer(GetTrainedUnit()))
endfunction

//===========================================================================
function InitTrig_KelThuzad takes nothing returns nothing
    set gg_trg_KelThuzad=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_KelThuzad, EVENT_PLAYER_UNIT_TRAIN_FINISH)
    call TriggerAddCondition(gg_trg_KelThuzad, Condition(function Trig_KelThuzad_Conditions))
    call TriggerAddAction(gg_trg_KelThuzad, function Trig_KelThuzad_Actions)
endfunction

//===========================================================================
// Trigger: KelThuzad Копировать
//===========================================================================
function Trig_KelThuzad_____________________u_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTrainedUnit()) == 'Ulic' ) ) then
        return false
    endif
    return true
endfunction

function Trig_KelThuzad_____________________u_Actions takes nothing returns nothing
    call SetPlayerUnitAvailableBJ('Ulic', false, GetOwningPlayer(GetTrainedUnit()))
    call SetPlayerUnitAvailableBJ('U00E', false, GetOwningPlayer(GetTrainedUnit()))
endfunction

//===========================================================================
function InitTrig_KelThuzad_____________________u takes nothing returns nothing
    set gg_trg_KelThuzad_____________________u=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_KelThuzad_____________________u, EVENT_PLAYER_UNIT_TRAIN_FINISH)
    call TriggerAddCondition(gg_trg_KelThuzad_____________________u, Condition(function Trig_KelThuzad_____________________u_Conditions))
    call TriggerAddAction(gg_trg_KelThuzad_____________________u, function Trig_KelThuzad_____________________u_Actions)
endfunction

//===========================================================================
// Trigger: Arthas
//===========================================================================
function Trig_Arthas_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTrainedUnit()) == 'U00D' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Arthas_Actions takes nothing returns nothing
    call SetPlayerUnitAvailableBJ('Udea', false, GetOwningPlayer(GetTrainedUnit()))
    call SetPlayerUnitAvailableBJ('U00D', false, GetOwningPlayer(GetTrainedUnit()))
endfunction

//===========================================================================
function InitTrig_Arthas takes nothing returns nothing
    set gg_trg_Arthas=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Arthas, EVENT_PLAYER_UNIT_TRAIN_FINISH)
    call TriggerAddCondition(gg_trg_Arthas, Condition(function Trig_Arthas_Conditions))
    call TriggerAddAction(gg_trg_Arthas, function Trig_Arthas_Actions)
endfunction

//===========================================================================
// Trigger: Arthas Копировать
//===========================================================================
function Trig_Arthas_____________________u_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTrainedUnit()) == 'Udea' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Arthas_____________________u_Actions takes nothing returns nothing
    call SetPlayerUnitAvailableBJ('Udea', false, GetOwningPlayer(GetTrainedUnit()))
    call SetPlayerUnitAvailableBJ('U00D', false, GetOwningPlayer(GetTrainedUnit()))
endfunction

//===========================================================================
function InitTrig_Arthas_____________________u takes nothing returns nothing
    set gg_trg_Arthas_____________________u=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Arthas_____________________u, EVENT_PLAYER_UNIT_TRAIN_FINISH)
    call TriggerAddCondition(gg_trg_Arthas_____________________u, Condition(function Trig_Arthas_____________________u_Conditions))
    call TriggerAddAction(gg_trg_Arthas_____________________u, function Trig_Arthas_____________________u_Actions)
endfunction

//===========================================================================
// Trigger: Furion quote
//===========================================================================
function Trig_Furion_quote_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTrainedUnit()) == 'Efur' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Furion_quote_Actions takes nothing returns nothing
    if GetLocalPlayer() == GetOwningPlayer(GetTriggerUnit()) then
    call PlaySoundOnUnitBJ(gg_snd_FurionRecruited, 100, GetTrainedUnit())
    call KillSoundWhenDoneBJ(GetLastPlayedSound())
    endif
endfunction

//===========================================================================
function InitTrig_Furion_quote takes nothing returns nothing
    set gg_trg_Furion_quote=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Furion_quote, EVENT_PLAYER_UNIT_TRAIN_FINISH)
    call TriggerAddCondition(gg_trg_Furion_quote, Condition(function Trig_Furion_quote_Conditions))
    call TriggerAddAction(gg_trg_Furion_quote, function Trig_Furion_quote_Actions)
endfunction

//===========================================================================
// Trigger: KelThuzad quote
//===========================================================================
function Trig_KelThuzad_quote_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTrainedUnit()) == 'U00E' ) ) then
        return false
    endif
    return true
endfunction

function Trig_KelThuzad_quote_Actions takes nothing returns nothing
    if GetLocalPlayer() == GetOwningPlayer(GetTriggerUnit()) then
    call PlaySoundOnUnitBJ(gg_snd_KelThuzadrecruited, 100, GetTrainedUnit())
    call KillSoundWhenDoneBJ(GetLastPlayedSound())
    endif
endfunction

//===========================================================================
function InitTrig_KelThuzad_quote takes nothing returns nothing
    set gg_trg_KelThuzad_quote=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_KelThuzad_quote, EVENT_PLAYER_UNIT_TRAIN_FINISH)
    call TriggerAddCondition(gg_trg_KelThuzad_quote, Condition(function Trig_KelThuzad_quote_Conditions))
    call TriggerAddAction(gg_trg_KelThuzad_quote, function Trig_KelThuzad_quote_Actions)
endfunction

//===========================================================================
// Trigger: Arthas quote
//===========================================================================
function Trig_Arthas_quote_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTrainedUnit()) == 'U00D' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Arthas_quote_Actions takes nothing returns nothing
    if GetLocalPlayer() == GetOwningPlayer(GetTriggerUnit()) then
    call PlaySoundOnUnitBJ(gg_snd_Arthasrecruited, 100, GetTrainedUnit())
    call KillSoundWhenDoneBJ(GetLastPlayedSound())
    endif
endfunction

//===========================================================================
function InitTrig_Arthas_quote takes nothing returns nothing
    set gg_trg_Arthas_quote=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Arthas_quote, EVENT_PLAYER_UNIT_TRAIN_FINISH)
    call TriggerAddCondition(gg_trg_Arthas_quote, Condition(function Trig_Arthas_quote_Conditions))
    call TriggerAddAction(gg_trg_Arthas_quote, function Trig_Arthas_quote_Actions)
endfunction

//===========================================================================
// Trigger: HuAl
//===========================================================================
function Trig_HuAl_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTriggerUnit()) == 'h009' ) ) then
        return false
    endif
    return true
endfunction

function Trig_HuAl_Actions takes nothing returns nothing
    call SetUnitAnimation(GetTriggerUnit(), "stand")
    call AddSpecialEffectLocBJ(GetUnitLoc(GetTriggerUnit()), "Abilities\\Spells\\Human\\Resurrect\\ResurrectTarget.mdl")
    call DestroyEffectBJ(GetLastCreatedEffectBJ())
endfunction

//===========================================================================
function InitTrig_HuAl takes nothing returns nothing
    set gg_trg_HuAl=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_HuAl, EVENT_PLAYER_UNIT_SPELL_FINISH)
    call TriggerAddCondition(gg_trg_HuAl, Condition(function Trig_HuAl_Conditions))
    call TriggerAddAction(gg_trg_HuAl, function Trig_HuAl_Actions)
endfunction

//===========================================================================
// Trigger: HUAL
//===========================================================================
function Trig_HUAL_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTriggerUnit()) == 'halt' ) ) then
        return false
    endif
    return true
endfunction

function Trig_HUAL_Actions takes nothing returns nothing
    call SetUnitAnimation(GetTriggerUnit(), "stand")
    call AddSpecialEffectLocBJ(GetUnitLoc(GetTriggerUnit()), "Abilities\\Spells\\Human\\Resurrect\\ResurrectTarget.mdl")
    call DestroyEffectBJ(GetLastCreatedEffectBJ())
endfunction

//===========================================================================
function InitTrig_HUAL takes nothing returns nothing
    set gg_trg_HUAL=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_HUAL, EVENT_PLAYER_UNIT_SPELL_FINISH)
    call TriggerAddCondition(gg_trg_HUAL, Condition(function Trig_HUAL_Conditions))
    call TriggerAddAction(gg_trg_HUAL, function Trig_HUAL_Actions)
endfunction

//===========================================================================
// Trigger: OrcAl
//===========================================================================
function Trig_OrcAl_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTriggerUnit()) == 'oalt' ) ) then
        return false
    endif
    return true
endfunction

function Trig_OrcAl_Actions takes nothing returns nothing
    call SetUnitAnimation(GetTriggerUnit(), "stand")
    call AddSpecialEffectLocBJ(GetUnitLoc(GetTriggerUnit()), "Units\\Demon\\Infernal\\InfernalBirth.mdl")
    call DestroyEffectBJ(GetLastCreatedEffectBJ())
endfunction

//===========================================================================
function InitTrig_OrcAl takes nothing returns nothing
    set gg_trg_OrcAl=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_OrcAl, EVENT_PLAYER_UNIT_SPELL_FINISH)
    call TriggerAddCondition(gg_trg_OrcAl, Condition(function Trig_OrcAl_Conditions))
    call TriggerAddAction(gg_trg_OrcAl, function Trig_OrcAl_Actions)
endfunction

//===========================================================================
// Trigger: ORCAL
//===========================================================================
function Trig_ORCAL_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTriggerUnit()) == 'o002' ) ) then
        return false
    endif
    return true
endfunction

function Trig_ORCAL_Actions takes nothing returns nothing
    call SetUnitAnimation(GetTriggerUnit(), "stand")
    call AddSpecialEffectLocBJ(GetUnitLoc(GetTriggerUnit()), "Units\\Demon\\Infernal\\InfernalBirth.mdl")
    call DestroyEffectBJ(GetLastCreatedEffectBJ())
endfunction

//===========================================================================
function InitTrig_ORCAL takes nothing returns nothing
    set gg_trg_ORCAL=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_ORCAL, EVENT_PLAYER_UNIT_SPELL_FINISH)
    call TriggerAddCondition(gg_trg_ORCAL, Condition(function Trig_ORCAL_Conditions))
    call TriggerAddAction(gg_trg_ORCAL, function Trig_ORCAL_Actions)
endfunction

//===========================================================================
// Trigger: Neal
//===========================================================================
function Trig_Neal_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTriggerUnit()) == 'eate' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Neal_Actions takes nothing returns nothing
    call SetUnitAnimation(GetTriggerUnit(), "stand")
    call AddSpecialEffectLocBJ(GetUnitLoc(GetTriggerUnit()), "Abilities\\Spells\\NightElf\\Starfall\\StarfallTarget.mdl")
    call DestroyEffectBJ(GetLastCreatedEffectBJ())
    call TriggerSleepAction(0.35)
    call AddSpecialEffectLocBJ(GetUnitLoc(GetTriggerUnit()), "Units\\NightElf\\Wisp\\WispExplode.mdl")
    call DestroyEffectBJ(GetLastCreatedEffectBJ())
endfunction

//===========================================================================
function InitTrig_Neal takes nothing returns nothing
    set gg_trg_Neal=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Neal, EVENT_PLAYER_UNIT_SPELL_FINISH)
    call TriggerAddCondition(gg_trg_Neal, Condition(function Trig_Neal_Conditions))
    call TriggerAddAction(gg_trg_Neal, function Trig_Neal_Actions)
endfunction

//===========================================================================
// Trigger: NEAL
//===========================================================================
function Trig_NEAL_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTriggerUnit()) == 'e000' ) ) then
        return false
    endif
    return true
endfunction

function Trig_NEAL_Actions takes nothing returns nothing
    call SetUnitAnimation(GetTriggerUnit(), "stand")
    call AddSpecialEffectLocBJ(GetUnitLoc(GetTriggerUnit()), "Abilities\\Spells\\NightElf\\Starfall\\StarfallTarget.mdl")
    call DestroyEffectBJ(GetLastCreatedEffectBJ())
    call TriggerSleepAction(0.35)
    call AddSpecialEffectLocBJ(GetUnitLoc(GetTriggerUnit()), "Units\\NightElf\\Wisp\\WispExplode.mdl")
    call DestroyEffectBJ(GetLastCreatedEffectBJ())
endfunction

//===========================================================================
function InitTrig_NEAL takes nothing returns nothing
    set gg_trg_NEAL=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_NEAL, EVENT_PLAYER_UNIT_SPELL_FINISH)
    call TriggerAddCondition(gg_trg_NEAL, Condition(function Trig_NEAL_Conditions))
    call TriggerAddAction(gg_trg_NEAL, function Trig_NEAL_Actions)
endfunction

//===========================================================================
// Trigger: Udal
//===========================================================================
function Trig_Udal_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTriggerUnit()) == 'u00C' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Udal_Actions takes nothing returns nothing
    call SetUnitAnimation(GetTriggerUnit(), "stand")
    call AddSpecialEffectLocBJ(GetUnitLoc(GetTriggerUnit()), "Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl")
    call DestroyEffectBJ(GetLastCreatedEffectBJ())
endfunction

//===========================================================================
function InitTrig_Udal takes nothing returns nothing
    set gg_trg_Udal=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Udal, EVENT_PLAYER_UNIT_SPELL_FINISH)
    call TriggerAddCondition(gg_trg_Udal, Condition(function Trig_Udal_Conditions))
    call TriggerAddAction(gg_trg_Udal, function Trig_Udal_Actions)
endfunction

//===========================================================================
// Trigger: UDAL
//===========================================================================
function Trig_UDAL_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTriggerUnit()) == 'uaod' ) ) then
        return false
    endif
    return true
endfunction

function Trig_UDAL_Actions takes nothing returns nothing
    call SetUnitAnimation(GetTriggerUnit(), "stand")
    call AddSpecialEffectLocBJ(GetUnitLoc(GetTriggerUnit()), "Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl")
    call DestroyEffectBJ(GetLastCreatedEffectBJ())
endfunction

//===========================================================================
function InitTrig_UDAL takes nothing returns nothing
    set gg_trg_UDAL=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_UDAL, EVENT_PLAYER_UNIT_SPELL_FINISH)
    call TriggerAddCondition(gg_trg_UDAL, Condition(function Trig_UDAL_Conditions))
    call TriggerAddAction(gg_trg_UDAL, function Trig_UDAL_Actions)
endfunction

//===========================================================================
// Trigger: MTWBE
//===========================================================================
function Trig_MTWBE_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A01L'
endfunction
function Trig_MTWBE_Radius takes nothing returns real
	return 500.00
endfunction
function Trig_MTWBE_Filters takes nothing returns boolean
	return GetOwningPlayer(GetFilterUnit()) == bj_groupEnumOwningPlayer and IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE) == false and IsUnitType(GetFilterUnit(), UNIT_TYPE_SAPPER) == false
endfunction
function Trig_MTWBE_Actions takes nothing returns boolean
 local location loc= GetSpellTargetLoc()
 local unit u= GetTriggerUnit()
 local real dx= GetLocationX(loc) - GetUnitX(u)
 local real dy= GetLocationY(loc) - GetUnitY(u)
    local integer i= 0
    local group g= CreateGroup()
    set bj_groupEnumOwningPlayer=GetOwningPlayer(u)
    call GroupEnumUnitsInRange(g, GetUnitX(u), GetUnitY(u), Trig_MTWBE_Radius(), Filter(function Trig_MTWBE_Filters))
    loop
        exitwhen u == null or i == 12
        call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\NightElf\\Blink\\BlinkCaster.mdl", GetUnitX(u), GetUnitY(u)))
        call SetUnitX(u, GetUnitX(u) + dx)
        call SetUnitY(u, GetUnitY(u) + dy)
        call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\NightElf\\Blink\\BlinkTarget.mdl", GetUnitX(u), GetUnitY(u)))
        call GroupRemoveUnit(g, u)
        set u=FirstOfGroup(g)
        set i=i + 1
    endloop
	call RemoveLocation(loc)
	set loc=null
	set u=null
	call DestroyGroup(g)
	set g=null
	return false
endfunction
function InitTrig_MTWBE takes nothing returns nothing
	set gg_trg_MTWBE=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(gg_trg_MTWBE, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(gg_trg_MTWBE, And(Filter(function Trig_MTWBE_Conditions), Filter(function Trig_MTWBE_Actions)))
endfunction//===========================================================================
// Trigger: Demon gate
//===========================================================================
function Trig_Demon_gate_Conditions takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A00X' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Demon_gate_Func001C takes nothing returns boolean
    if ( not ( GetPlayerState(GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_GOLD) >= 350 ) ) then
        return false
    endif
    if ( not ( GetPlayerState(GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_LUMBER) >= 150 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Demon_gate_Actions takes nothing returns nothing
    if ( Trig_Demon_gate_Func001C() ) then
        call AdjustPlayerStateBJ(- 350, GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_GOLD)
        call AdjustPlayerStateBJ(- 150, GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_LUMBER)
    else
        set udg_TempGroup=GetForceOfPlayer(GetTriggerPlayer())
        if GetLocalPlayer() == GetOwningPlayer(GetTriggerUnit()) then
        call PlaySoundBJ(gg_snd_NecromancerNoGold1)
        call KillSoundWhenDoneBJ(GetLastPlayedSound())
        endif
        call DisplayTimedTextToForce(udg_TempGroup, 10.00, "TRIGSTR_029")
        call IssueImmediateOrderBJ(GetTriggerUnit(), "stop")
        call DestroyForce(udg_TempGroup)
    endif
endfunction

//===========================================================================
function InitTrig_Demon_gate takes nothing returns nothing
    set gg_trg_Demon_gate=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Demon_gate, EVENT_PLAYER_UNIT_SPELL_CAST)
    call TriggerAddCondition(gg_trg_Demon_gate, Condition(function Trig_Demon_gate_Conditions))
    call TriggerAddAction(gg_trg_Demon_gate, function Trig_Demon_gate_Actions)
endfunction

//===========================================================================
// Trigger: Damage Tag
//===========================================================================
function Trig_Damage_Tag_Func001Func001Func001Func001Func001C takes nothing returns boolean
    if ( not ( udg_IsDamageSpell == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Damage_Tag_Func001Func001Func001Func001C takes nothing returns boolean
    if ( not ( udg_DamageEventType == udg_DamageTypeReduced ) ) then
        return false
    endif
    return true
endfunction

function Trig_Damage_Tag_Func001Func001Func001C takes nothing returns boolean
    if ( not ( udg_DamageEventType == udg_DamageTypeHeal ) ) then
        return false
    endif
    return true
endfunction

function Trig_Damage_Tag_Func001Func001C takes nothing returns boolean
    if ( not ( udg_DamageEventType == udg_DamageTypeCriticalStrike ) ) then
        return false
    endif
    return true
endfunction

function Trig_Damage_Tag_Func001C takes nothing returns boolean
    if ( not ( udg_DamageEventType == udg_DamageTypeBlocked ) ) then
        return false
    endif
    return true
endfunction

function Trig_Damage_Tag_Func004003001 takes nothing returns boolean
    return ( IsUnitVisible(GetTriggerUnit(), GetFilterPlayer()) == true )
endfunction

function Trig_Damage_Tag_Actions takes nothing returns nothing
    if ( Trig_Damage_Tag_Func001C() ) then
        call CreateTextTagUnitBJ(( "блокировано!" ), udg_DamageEventTarget, 50.00, 10.00, 0.00, 100.00, 100.00, 0.00)
    else
        if ( Trig_Damage_Tag_Func001Func001C() ) then
            call CreateTextTagUnitBJ(( I2S(R2I(udg_DamageEventAmount)) + "!" ), udg_DamageEventTarget, 50.00, 10.00, 90.00, 0.00, 0.00, 0)
        else
            if ( Trig_Damage_Tag_Func001Func001Func001C() ) then
                call CreateTextTagUnitBJ(( "+" + I2S(R2I(RAbsBJ(udg_DamageEventAmount))) ), udg_DamageEventTarget, 50.00, 10.00, 0.00, 100.00, 0.00, 0)
            else
                if ( Trig_Damage_Tag_Func001Func001Func001Func001C() ) then
                    call CreateTextTagUnitBJ(( "" + I2S(R2I(udg_DamageEventAmount)) ), udg_DamageEventTarget, 50.00, 10.00, 0.00, 100.00, 100.00, 0)
                else
                    if ( Trig_Damage_Tag_Func001Func001Func001Func001Func001C() ) then
                        call CreateTextTagUnitBJ(I2S(R2I(udg_DamageEventAmount)), udg_DamageEventTarget, 50.00, 10.00, 0.00, 100.00, 100.00, 0)
                    else
                        call CreateTextTagUnitBJ(I2S(R2I(udg_DamageEventAmount)), udg_DamageEventTarget, 50.00, 10.00, 100.00, 100.00, 0.00, 0)
                    endif
                endif
            endif
        endif
    endif
    call SetTextTagVelocityBJ(GetLastCreatedTextTag(), 100.00, 45.00)
    call ShowTextTagForceBJ(false, GetLastCreatedTextTag(), GetPlayersAll())
    call ShowTextTagForceBJ(true, GetLastCreatedTextTag(), GetPlayersMatching(Condition(function Trig_Damage_Tag_Func004003001)))
    call SetTextTagPermanentBJ(GetLastCreatedTextTag(), false)
    call SetTextTagLifespanBJ(GetLastCreatedTextTag(), 2.00)
    call SetTextTagFadepointBJ(GetLastCreatedTextTag(), 1.00)
endfunction

//===========================================================================
function InitTrig_Damage_Tag takes nothing returns nothing
    set gg_trg_Damage_Tag=CreateTrigger()
    call TriggerRegisterVariableEvent(gg_trg_Damage_Tag, "udg_DamageEvent", EQUAL, 1.00)
    call TriggerAddAction(gg_trg_Damage_Tag, function Trig_Damage_Tag_Actions)
endfunction

//===========================================================================
// Trigger: On Death
//
// This trigger is important to show that the killer is really getting the kill
//===========================================================================
function Trig_On_Death_Func001C takes nothing returns boolean
    if ( not ( GetKillingUnitBJ() != null ) ) then
        return false
    endif
    return true
endfunction

function Trig_On_Death_Actions takes nothing returns nothing
    if ( Trig_On_Death_Func001C() ) then
        call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())), ( GetUnitName(GetKillingUnitBJ()) + ( " убил(-а) " + GetUnitName(GetTriggerUnit()) ) ))
    else
    endif
endfunction

//===========================================================================
function InitTrig_On_Death takes nothing returns nothing
    set gg_trg_On_Death=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_On_Death, EVENT_PLAYER_UNIT_DEATH)
    call TriggerAddAction(gg_trg_On_Death, function Trig_On_Death_Actions)
endfunction

//===========================================================================
// Trigger: Life Drain Fix
//
// Copy this trigger into your map if you want to fix the life drain abilitity. It comes with a potential weird side-effect: if you had already cast a damage over time ability on the damage target from the damage source before life draining, it will heal off of that damage over time ability as well. Without triggering life drain completely on your own, there is no way to prevent this. However, this issue does not affect the Dark Ranger since she only has that one damage-over-time ability.
//===========================================================================
function Trig_Life_Drain_Fix_Conditions takes nothing returns boolean
    if ( not ( udg_IsDamageSpell == true ) ) then
        return false
    endif
    if ( not ( UnitHasBuffBJ(udg_DamageEventSource, 'Bdcl') == true ) ) then
        return false
    endif
    if ( not ( UnitHasBuffBJ(udg_DamageEventTarget, 'Bdtl') == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Life_Drain_Fix_Actions takes nothing returns nothing
    call SetUnitLifeBJ(udg_DamageEventSource, ( GetUnitStateSwap(UNIT_STATE_LIFE, udg_DamageEventSource) + udg_DamageEventAmount ))
endfunction

//===========================================================================
function InitTrig_Life_Drain_Fix takes nothing returns nothing
    set gg_trg_Life_Drain_Fix=CreateTrigger()
    call TriggerRegisterVariableEvent(gg_trg_Life_Drain_Fix, "udg_AfterDamageEvent", EQUAL, 1.00)
    call TriggerAddCondition(gg_trg_Life_Drain_Fix, Condition(function Trig_Life_Drain_Fix_Conditions))
    call TriggerAddAction(gg_trg_Life_Drain_Fix, function Trig_Life_Drain_Fix_Actions)
endfunction

//===========================================================================
// Trigger: Finger of Death Fix
//
// This is pretty easy to fix.
//===========================================================================
function Trig_Finger_of_Death_Fix_Conditions takes nothing returns boolean
    if ( not ( udg_IsDamageSpell == true ) ) then
        return false
    endif
    if ( not ( GetUnitCurrentOrder(udg_DamageEventSource) == String2OrderIdBJ("fingerofdeath") ) ) then
        return false
    endif
    return true
endfunction

function Trig_Finger_of_Death_Fix_Actions takes nothing returns nothing
    set udg_DamageEventType=udg_DamageTypeExplosive
endfunction

//===========================================================================
function InitTrig_Finger_of_Death_Fix takes nothing returns nothing
    set gg_trg_Finger_of_Death_Fix=CreateTrigger()
    call TriggerRegisterVariableEvent(gg_trg_Finger_of_Death_Fix, "udg_DamageModifierEvent", EQUAL, 1.00)
    call TriggerAddCondition(gg_trg_Finger_of_Death_Fix, Condition(function Trig_Finger_of_Death_Fix_Conditions))
    call TriggerAddAction(gg_trg_Finger_of_Death_Fix, function Trig_Finger_of_Death_Fix_Actions)
endfunction

//===========================================================================
// Trigger: Anti Magic Shield Fix
//
// Requires you to copy the ability "Anti-Magic Shell (Fixed)" from Object Editor into your map. AMS cannot be configured to work with a damage detection system as it will always have ambiguous results and the shield will be popped or reduce damage to 0.00 before the damage event runs, so the ability is based off of Frost Armor with its only utility being triggered.
//===========================================================================
//TESH.scrollpos=12
//TESH.alwaysfold=0
constant function GetAMSBuffId takes nothing returns integer
    return 'Bams'
endfunction

constant function GetAMSAbilId takes nothing returns integer
    return 'A002'
endfunction

constant function GetAMSShieldVal takes nothing returns real
    return 300.00
endfunction

function Trig_Anti_Magic_Shield_Fix_Actions takes nothing returns nothing
    local integer id= GetUnitUserData(udg_DamageEventTarget)
    local real shield= udg_AMSAmount[id] - udg_DamageEventAmount
    if shield <= 0.00 then
        set udg_DamageEventAmount=- shield
        set shield=0.00
        call UnitRemoveAbility(udg_DamageEventTarget, GetAMSBuffId())
    else
        set udg_DamageEventAmount=0.00
        if udg_DamageEventType == 0 then
            set udg_DamageEventType=udg_DamageTypeBlocked
        endif
    endif
    set udg_AMSAmount[id]=shield
endfunction

function Trig_Anti_Magic_Shield_Fix_Conditions takes nothing returns boolean
    if udg_IsDamageSpell then
        if GetUnitAbilityLevel(udg_DamageEventTarget, GetAMSBuffId()) > 0 then
            call Trig_Anti_Magic_Shield_Fix_Actions()
        else
            set udg_AMSAmount[GetUnitUserData(udg_DamageEventTarget)]=0.00
        endif
    endif
    return false
endfunction

function AMS_Refresh_Conditions takes nothing returns boolean
    if GetSpellAbilityId() == GetAMSAbilId() then
        set udg_AMSAmount[GetUnitUserData(GetSpellTargetUnit())]=GetAMSShieldVal()
    endif
    return false
endfunction

function InitTrig_Anti_Magic_Shield_Fix takes nothing returns nothing
    local trigger t= CreateTrigger()
    call TriggerRegisterVariableEvent(t, "udg_DamageModifierEvent", EQUAL, 4.00)
    call TriggerAddCondition(t, Condition(function Trig_Anti_Magic_Shield_Fix_Conditions))
    set t=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
    call TriggerAddCondition(t, Filter(function AMS_Refresh_Conditions))
endfunction//===========================================================================
// Trigger: Mana Shield Fix
//
// DamageModifierEvent becoming Equal to 4.00 is a new event introduced in DamageEngine 3.5. It is the final phase of damage processing as it is built specifically to handle shields, and only runs if the damage is greater than 0.
//===========================================================================
function Trig_Mana_Shield_Fix_Conditions takes nothing returns boolean
    if ( not ( UnitHasBuffBJ(udg_DamageEventTarget, 'BNms') == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Mana_Shield_Fix_Func004Func005C takes nothing returns boolean
    if ( not ( udg_DmgEvMSlvl == 0 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Mana_Shield_Fix_Func004Func007C takes nothing returns boolean
    if ( not ( udg_DamageEventAmount < ( udg_DmgEvMana - 0.01 ) ) ) then
        return false
    endif
    return true
endfunction

function Trig_Mana_Shield_Fix_Func004C takes nothing returns boolean
    return true
endfunction

function Trig_Mana_Shield_Fix_Actions takes nothing returns nothing
    // Mana Shield handling. For it to work, you need to set the mana shield Damage Absorbed %
    // to 0.00 for Mana Shield (Neutral Hostile) and for all 3 levels of Mana Shield for the Naga Sea Witch.
    if ( Trig_Mana_Shield_Fix_Func004C() ) then
        set udg_DmgEvMana=GetUnitStateSwap(UNIT_STATE_MANA, udg_DamageEventTarget)
        // Get the shielding mana multiplier from the target unit based on the unit or hero ability ("multiplier" mana per HP)
        // If you have custom mana shield abilities or have modified the normal ones, add or configure those here.
        set udg_DmgEvMSlvl=GetUnitAbilityLevelSwapped('ANms', udg_DamageEventTarget)
        if ( Trig_Mana_Shield_Fix_Func004Func005C() ) then
            set udg_DmgEvManaMult=2.00
        else
            set udg_DmgEvManaMult=( ( 0.50 * I2R(udg_DmgEvMSlvl) ) + 0.50 )
        endif
        set udg_DmgEvMana=( udg_DmgEvMana * udg_DmgEvManaMult )
        if ( Trig_Mana_Shield_Fix_Func004Func007C() ) then
            set udg_DmgEvMana=( udg_DmgEvMana - udg_DamageEventAmount )
            set udg_DamageEventAmount=0.00
            set udg_DmgEvMana=( udg_DmgEvMana / udg_DmgEvManaMult )
            // You can remove this damage type change if you want, it's mostly for the purpose of the test map.
            set udg_DamageEventType=udg_DamageTypeBlocked
        else
            set udg_DamageEventAmount=( udg_DamageEventAmount - udg_DmgEvMana )
            set udg_DmgEvMana=0.00
            call IssueImmediateOrderBJ(udg_DamageEventTarget, "manashieldoff")
            // You can remove this damage type change if you want, it's mostly for the purpose of the test map.
            set udg_DamageEventType=udg_DamageTypeReduced
        endif
        call SetUnitManaBJ(udg_DamageEventTarget, udg_DmgEvMana)
    else
    endif
endfunction

//===========================================================================
function InitTrig_Mana_Shield_Fix takes nothing returns nothing
    set gg_trg_Mana_Shield_Fix=CreateTrigger()
    call TriggerRegisterVariableEvent(gg_trg_Mana_Shield_Fix, "udg_DamageModifierEvent", EQUAL, 4.00)
    call TriggerAddCondition(gg_trg_Mana_Shield_Fix, Condition(function Trig_Mana_Shield_Fix_Conditions))
    call TriggerAddAction(gg_trg_Mana_Shield_Fix, function Trig_Mana_Shield_Fix_Actions)
endfunction

//===========================================================================
// Trigger: Unit Indexer
//
// Unit Indexer gives you an array-safe (1-8190) custom value for units, eliminating the need for hashtables to store unit-specific data.
// Just use "Set MyArrayData[(Custom value of Unit)] = (Some data)".
// --------
// If you want to get the unit assigned to an index (reverse lookup) use "UDexUnits[(Index)]".
// --------
// If you want to detect when an index is created or when it is released, use "UnitIndexEvent Equal to 1.00" (created) or "UnitIndexEvent Equal to 2.00" (released). The index being created/released is called "UDex".
// --------
// You can enable/disable Unit Indexer to protect some of your undesirable units from being indexed like this:
// Trigger - Turn off Unit Indexer <gen>
// Unit - Create 1 Dummy for (Triggering player) at TempPoint facing 0.00 degrees
// Trigger - Turn on Unit Indexer <gen>
// --------
// If you want to use a Map Initialization trigger that uses custom value of units, to make sure that UnitIndexer initializes first, use the event "UnitIndexEvent Equal to 3.00". Otherwise the custom value of units may be zero.
// --------
// Advanced:
// --------
// If you want to lock the index of a unit, use "Set UnitIndexLock[(Index)] = (UnitIndexLock[(Index)] + 1)". This will prevent the index from being recycled. If you want to unlock it and allow it to be recycled, run the Unit Indexer <gen> trigger.
// Note: Make sure if you add a lock that you will eventually remove the lock, otherwise the index will never be recycled.
//===========================================================================
function Trig_Unit_Indexer_Func005Func002C takes nothing returns boolean
    if ( not ( udg_UnitIndexLock[udg_UDex] == 0 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Unit_Indexer_Func005C takes nothing returns boolean
    if ( not ( GetUnitUserData(udg_UDexUnits[udg_UDex]) == 0 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Unit_Indexer_Func014Func003C takes nothing returns boolean
    if ( not ( udg_UDexWasted == 32 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Unit_Indexer_Func014Func005C takes nothing returns boolean
    if ( not ( udg_UDexRecycle == 0 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Unit_Indexer_Func014C takes nothing returns boolean
    if ( not ( udg_UnitIndexerEnabled == true ) ) then
        return false
    endif
    if ( not ( GetUnitUserData(GetFilterUnit()) == 0 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Unit_Indexer_Actions takes nothing returns nothing
        call ExecuteFunc("InitializeUnitIndexer")
    endfunction
     
    function ClearUnitIndex takes nothing returns nothing
    if ( Trig_Unit_Indexer_Func005C() ) then
        set udg_UnitIndexLock[udg_UDex]=( udg_UnitIndexLock[udg_UDex] - 1 )
        if ( Trig_Unit_Indexer_Func005Func002C() ) then
            set udg_UDexNext[udg_UDexPrev[udg_UDex]]=udg_UDexNext[udg_UDex]
            set udg_UDexPrev[udg_UDexNext[udg_UDex]]=udg_UDexPrev[udg_UDex]
            set udg_UDexPrev[udg_UDex]=0
            set udg_UnitIndexEvent=0.00
            set udg_UnitIndexEvent=2.00
            set udg_UnitIndexEvent=0.00
            set udg_UDexUnits[udg_UDex]=null
            set udg_UDexNext[udg_UDex]=udg_UDexRecycle
            set udg_UDexRecycle=udg_UDex
        else
        endif
    else
    endif
    endfunction
     
    function IndexUnit takes nothing returns boolean
        local integer pdex= udg_UDex
        local integer ndex
    // -
    // You can customize the following block - if conditions are false the (Matching unit) won't be indexed.
    // -
    if ( Trig_Unit_Indexer_Func014C() ) then
        set udg_UDexWasted=( udg_UDexWasted + 1 )
        if ( Trig_Unit_Indexer_Func014Func003C() ) then
            set udg_UDexWasted=0
            set udg_UDex=udg_UDexNext[0]
            loop
                exitwhen udg_UDex == 0
                set ndex=udg_UDexNext[udg_UDex]
                call ClearUnitIndex()
                set udg_UDex=ndex
            endloop
        else
        endif
        if ( Trig_Unit_Indexer_Func014Func005C() ) then
            set udg_UDex=( udg_UDexGen + 1 )
            set udg_UDexGen=udg_UDex
        else
            set udg_UDex=udg_UDexRecycle
            set udg_UDexRecycle=udg_UDexNext[udg_UDex]
        endif
        set udg_UDexUnits[udg_UDex]=GetFilterUnit()
        call SetUnitUserData(udg_UDexUnits[udg_UDex], udg_UDex)
        set udg_UDexPrev[udg_UDexNext[0]]=udg_UDex
        set udg_UDexNext[udg_UDex]=udg_UDexNext[0]
        set udg_UDexNext[0]=udg_UDex
        set udg_UnitIndexLock[udg_UDex]=1
        set udg_UnitIndexEvent=0.00
        set udg_UnitIndexEvent=1.00
        set udg_UnitIndexEvent=0.00
        set udg_UDex=pdex
    else
    endif
        return false
    endfunction
     
    function InitializeUnitIndexer takes nothing returns nothing
        local integer i= bj_MAX_PLAYER_SLOTS
        local boolexpr b= Filter(function IndexUnit)
        local region re= CreateRegion()
        local trigger t= GetTriggeringTrigger()
        local rect r= GetWorldBounds()
        call RegionAddRect(re, r)
        call TriggerRegisterEnterRegion(t, re, b)
        call TriggerClearActions(t)
        call TriggerAddAction(t, function ClearUnitIndex)
    set udg_UnitIndexerEnabled=true
        loop
            set i=i - 1
            call GroupEnumUnitsOfPlayer(bj_lastCreatedGroup, Player(i), b)
            exitwhen i == 0
        endloop
        call RemoveRect(r)
        set re=null
        set r=null
        set t=null
        set b=null
    set udg_UnitIndexEvent=3.00
    set udg_UnitIndexEvent=0.00
endfunction

//===========================================================================
function InitTrig_Unit_Indexer takes nothing returns nothing
    set gg_trg_Unit_Indexer=CreateTrigger()
    call TriggerAddAction(gg_trg_Unit_Indexer, function Trig_Unit_Indexer_Actions)
endfunction

//===========================================================================
// Trigger: Damage Engine Config
//===========================================================================
function Trig_Damage_Engine_Config_Actions takes nothing returns nothing
    // -
    // This trigger's conditions let you filter out units you don't want detection for.
    // NOTE: By default, units with Locust will not pass the check.
    // TIP: The unit is called UDexUnits[UDex] and its custom value is UDex
    // -
    // Copy the Cheat Death Ability from Object Editor into your map and set the following variable respectively:
    // -
    // -
    // Copy the Detect Spell Damage Ability from Object Editor into your map and set the following variable respectively:
    // -
    // -
    // You can add extra classifications here if you want to differentiate between your triggered damage
    // Use DamageTypeExplosive (or any negative value damage type) if you want a unit killed by that damage to explode
    // -
    set udg_DamageTypeExplosive=- 1
    set udg_DamageTypeCriticalStrike=1
    set udg_DamageTypeHeal=2
    set udg_DamageTypeReduced=3
    set udg_DamageTypeBlocked=4
    // -
    // Leave the next Set statement disabled if you modified the Spell Damage Reduction item ability to 1.67 reduction
    // Otherwise, if you removed that ability from Runed Bracers, you'll need to enable this line:
    // -
    // -
    // Set the damage multiplication factor (1.00 being unmodified, increasing in damage over 1.00 and at 0 damage with 0.00)
    // NOTE. With the default values, Runed Bracers is reduces 33%, Elune's Grace reduces 20% and Ethereal increases 67%
    // -
    set udg_DAMAGE_FACTOR_BRACERS=0.67
    set udg_DAMAGE_FACTOR_ELUNES=0.80
    set udg_DAMAGE_FACTOR_ETHEREAL=1.67
    // -
    // Added 25 July 2017 to allow detection of things like Bash or Pulverize or AOE spread
    // -
    set udg_DamageEventAOE=1
    set udg_DamageEventLevel=1
    // -
    // Do not enable any of the following lines as they are simply variable declarations to make copying easier
    // -
endfunction

//===========================================================================
function InitTrig_Damage_Engine_Config takes nothing returns nothing
    set gg_trg_Damage_Engine_Config=CreateTrigger()
    call TriggerAddAction(gg_trg_Damage_Engine_Config, function Trig_Damage_Engine_Config_Actions)
endfunction

//===========================================================================
// Trigger: Damage Engine
//===========================================================================
//===========================================================================
// Damage Engine lets you detect, amplify, block or nullify damage. It even
// lets you detect if the damage was physical or from a spell. Just reference
// DamageEventAmount/Source/Target or the boolean IsDamageSpell, to get the
// necessary damage event data.
//
// - Detect damage: use the event "DamageEvent Equal to 1.00"
// - To change damage before it's dealt: use the event "DamageModifierEvent Equal to 1.00"
// - Detect damage after it was applied, use the event "AfterDamageEvent Equal to 1.00"
// - Detect spell damage: use the condition "IsDamageSpell Equal to True"
// - Detect zero-damage: use the event "DamageEvent Equal to 2.00" (an AfterDamageEvent will not fire for this)
//
// You can specify the DamageEventType before dealing triggered damage. To prevent an already-improbable error, I recommend running the trigger "ClearDamageEvent (Checking Conditions)" after dealing triggered damage from within a damage event:
// - Set NextDamageType = DamageTypeWhatever
// - Unit - Cause...
// - Trigger - Run ClearDamageEvent (Checking Conditions)
//
// You can modify the DamageEventAmount and the DamageEventType from a "DamageModifierEvent Equal to 1.00" trigger.
// - If the amount is modified to negative, it will count as a heal.
// - If the amount is set to 0, no damage will be dealt.
//
// If you need to reference the original in-game damage, use the variable "DamageEventPrevAmt".
// 
//===========================================================================
// Programming note about "integer i" and "udg_DmgEvRecursionN": integer i
// ranges from -1 upwards. "udg_DmgEvRecursionN" ranges from 0 upwards.
// "integer i" is always 1 less than "udg_DmgEvRecursionN"
// 
function DmgEvResetVars takes nothing returns nothing
    local integer i= udg_DmgEvRecursionN - 2
    set udg_DmgEvRecursionN=i + 1
    if i >= 0 then
        set udg_DamageEventPrevAmt=udg_LastDmgPrevAmount[i]
        set udg_DamageEventAmount=udg_LastDmgValue[i]
        set udg_DamageEventSource=udg_LastDmgSource[i]
        set udg_DamageEventTarget=udg_LastDmgTarget[i]
        set udg_IsDamageSpell=udg_LastDmgWasSpell[i]
        set udg_DamageEventType=udg_LastDmgPrevType[i]
    endif
endfunction

function CheckDamagedLifeEvent takes boolean clear returns nothing
    if clear then
        set udg_NextDamageOverride=false
        set udg_NextDamageType=0
    endif
    if udg_DmgEvTrig != null then
        call DestroyTrigger(udg_DmgEvTrig)
        set udg_DmgEvTrig=null
        if udg_IsDamageSpell then
            call SetWidgetLife(udg_DamageEventTarget, RMaxBJ(udg_LastDamageHP, 0.41))
            if udg_LastDamageHP <= 0.405 then
                if udg_DamageEventType < 0 then
                    call SetUnitExploded(udg_DamageEventTarget, true)
                endif
                //Kill the unit
                call DisableTrigger(udg_DamageEventTrigger)
                call UnitDamageTarget(udg_DamageEventSource, udg_DamageEventTarget, - 999, false, false, null, DAMAGE_TYPE_UNIVERSAL, null)
                call EnableTrigger(udg_DamageEventTrigger)
            endif
        elseif GetUnitAbilityLevel(udg_DamageEventTarget, udg_DamageBlockingAbility) > 0 then
            call UnitRemoveAbility(udg_DamageEventTarget, udg_DamageBlockingAbility)
            call SetWidgetLife(udg_DamageEventTarget, udg_LastDamageHP)
        endif
        if udg_DamageEventAmount != 0.00 and not udg_HideDamageFrom[GetUnitUserData(udg_DamageEventSource)] then
            set udg_AfterDamageEvent=0.00
            set udg_AfterDamageEvent=1.00
            set udg_AfterDamageEvent=0.00
        endif
        call DmgEvResetVars()
    endif
endfunction
    
function DmgEvOnAOEEnd takes nothing returns nothing
    if udg_DamageEventAOE > 1 then
        set udg_AOEDamageEvent=0.00
        set udg_AOEDamageEvent=1.00
        set udg_AOEDamageEvent=0.00
        set udg_DamageEventAOE=1
    endif
    set udg_DamageEventLevel=1
    set udg_EnhancedDamageTarget=null
    call GroupClear(udg_DamageEventAOEGroup)
endfunction
    
function DmgEvOnExpire takes nothing returns nothing
    set udg_DmgEvStarted=false
    call CheckDamagedLifeEvent(true)
    //Reset things so they don't perpetuate for AoE/Level target detection
    call DmgEvOnAOEEnd()
    set udg_DamageEventTarget=null
    set udg_DamageEventSource=null
endfunction

function PreCheckDamagedLifeEvent takes nothing returns boolean
    call CheckDamagedLifeEvent(true)
    return false
endfunction

function OnUnitDamage takes nothing returns boolean
    local boolean override= udg_DamageEventOverride
    local integer i
    local integer e= udg_DamageEventLevel
    local integer a= udg_DamageEventAOE
    local string s
    local real prevAmount
    local real life
    local real prevLife
    local unit u
    local unit f
    call CheckDamagedLifeEvent(false) //in case the unit state event failed and the 0.00 second timer hasn't yet expired
    set i=udg_DmgEvRecursionN - 1 //Had to be moved here due to false recursion tracking
    if i < 0 then
        //Added 25 July 2017 to detect AOE damage or multiple single-target damage
        set u=udg_DamageEventTarget
        set f=udg_DamageEventSource
    elseif i < 16 then
        set udg_LastDmgPrevAmount[i]=udg_DamageEventPrevAmt
        set udg_LastDmgValue[i]=udg_DamageEventAmount
        set udg_LastDmgSource[i]=udg_DamageEventSource
        set udg_LastDmgTarget[i]=udg_DamageEventTarget
        set udg_LastDmgWasSpell[i]=udg_IsDamageSpell
        set udg_LastDmgPrevType[i]=udg_DamageEventType
    else
        set s="WARNING: Recursion error when dealing damage! Make sure when you deal damage from within a DamageEvent trigger, do it like this:\n\n"
        set s=s + "Trigger - Turn off (This Trigger)\n"
        set s=s + "Unit - Cause...\n"
        set s=s + "Trigger - Turn on (This Trigger)"
        
        //Delete the next couple of lines to disable the in-game recursion crash warnings
        call ClearTextMessages()
        call DisplayTimedTextToPlayer(GetLocalPlayer(), 0.00, 0.00, 999.00, s)
        return false
    endif
    set udg_DmgEvRecursionN=i + 2
    set prevAmount=GetEventDamage()
    set udg_DamageEventTarget=GetTriggerUnit()
    set udg_DamageEventSource=GetEventDamageSource()
    
    set udg_DamageEventAmount=prevAmount
    
    set udg_DamageEventType=udg_NextDamageType
    set udg_NextDamageType=0
    set udg_DamageEventOverride=udg_NextDamageOverride
    set udg_NextDamageOverride=false
    
    if i < 0 then
        //Added 25 July 2017 to detect AOE damage or multiple single-target damage
        if udg_DamageEventType == 0 then
            if f == udg_DamageEventSource then
                //Source has damaged more than once
                if IsUnitInGroup(udg_DamageEventTarget, udg_DamageEventAOEGroup) then
                    //Added 5 August 2017 to improve tracking of enhanced damage against, say, Pulverize
                    set udg_DamageEventLevel=udg_DamageEventLevel + 1
                    set udg_EnhancedDamageTarget=udg_DamageEventTarget
                else
                    //Multiple targets hit by this source - flag as AOE
                    set udg_DamageEventAOE=udg_DamageEventAOE + 1
                endif
            else
                //New damage source - unflag everything
                set u=udg_DamageEventSource
                set udg_DamageEventSource=f
                call DmgEvOnAOEEnd()
                set udg_DamageEventSource=u
            endif
            call GroupAddUnit(udg_DamageEventAOEGroup, udg_DamageEventTarget)
        endif
        if not udg_DmgEvStarted then
            set udg_DmgEvStarted=true
            call TimerStart(udg_DmgEvTimer, 0.00, false, function DmgEvOnExpire)
        endif
    endif
    
    if prevAmount == 0.00 then
        if not udg_HideDamageFrom[GetUnitUserData(udg_DamageEventSource)] then
            set udg_DamageEventPrevAmt=0.00
            set udg_DamageEvent=0.00
            set udg_DamageEvent=2.00
            set udg_DamageEvent=0.00
        endif
        call DmgEvResetVars()
    else
        set u=udg_DamageEventTarget
        set udg_IsDamageSpell=prevAmount < 0.00
        if udg_IsDamageSpell then
            set prevAmount=- udg_DamageEventAmount
            set life=1.00
            if IsUnitType(u, UNIT_TYPE_ETHEREAL) and not IsUnitType(u, UNIT_TYPE_HERO) then
                set life=life * udg_DAMAGE_FACTOR_ETHEREAL //1.67
            endif
            if GetUnitAbilityLevel(u, 'Aegr') > 0 then
                set life=life * udg_DAMAGE_FACTOR_ELUNES //0.80
            endif
            if udg_DmgEvBracers != 0 and IsUnitType(u, UNIT_TYPE_HERO) then
                //Inline of UnitHasItemOfTypeBJ without the potential handle ID leak.
                set i=6
                loop
                    set i=i - 1
                    if GetItemTypeId(UnitItemInSlot(u, i)) == udg_DmgEvBracers then
                        set life=life * udg_DAMAGE_FACTOR_BRACERS //0.67
                        exitwhen true
                    endif
                    exitwhen i == 0
                endloop
            endif
            set udg_DamageEventAmount=prevAmount * life
        endif
        set udg_DamageEventPrevAmt=prevAmount
        set udg_DamageModifierEvent=0.00
        if not udg_DamageEventOverride then
            set udg_DamageModifierEvent=1.00
            if not udg_DamageEventOverride then
                set udg_DamageModifierEvent=2.00
                set udg_DamageModifierEvent=3.00
            endif
        endif
        set udg_DamageEventOverride=override
        if udg_DamageEventAmount > 0.00 then
            set udg_DamageModifierEvent=4.00
        endif
        set udg_DamageModifierEvent=0.00
        if not udg_HideDamageFrom[GetUnitUserData(udg_DamageEventSource)] then
            set udg_DamageEvent=0.00
            set udg_DamageEvent=1.00
            set udg_DamageEvent=0.00
        endif
        call CheckDamagedLifeEvent(true) //in case the unit state event failed from a recursive damage event
        
        //All events have run and the damage amount is finalized.
        set life=GetWidgetLife(u)
        set udg_DmgEvTrig=CreateTrigger()
        call TriggerAddCondition(udg_DmgEvTrig, Filter(function PreCheckDamagedLifeEvent))
        if not udg_IsDamageSpell then
            if udg_DamageEventAmount != prevAmount then
                set life=life + prevAmount - udg_DamageEventAmount
                if GetUnitState(u, UNIT_STATE_MAX_LIFE) < life then
                    set udg_LastDamageHP=life - prevAmount
                    call UnitAddAbility(u, udg_DamageBlockingAbility)
                endif
                call SetWidgetLife(u, RMaxBJ(life, 0.42))
            endif
            call TriggerRegisterUnitStateEvent(udg_DmgEvTrig, u, UNIT_STATE_LIFE, LESS_THAN, RMaxBJ(0.41, life - prevAmount / 2.00))
        else
            set udg_LastDamageHP=GetUnitState(u, UNIT_STATE_MAX_LIFE)
            set prevLife=life
            if life + prevAmount * 0.75 > udg_LastDamageHP then
                set life=RMaxBJ(udg_LastDamageHP - prevAmount / 2.00, 1.00)
                call SetWidgetLife(u, life)
                set life=( life + udg_LastDamageHP ) / 2.00
            else
                set life=life + prevAmount * 0.50
            endif
            set udg_LastDamageHP=prevLife - ( prevAmount - ( prevAmount - udg_DamageEventAmount ) )
            call TriggerRegisterUnitStateEvent(udg_DmgEvTrig, u, UNIT_STATE_LIFE, GREATER_THAN, life)
        endif
    endif
    set u=null
    set f=null
    return false
endfunction

function CreateDmgEvTrg takes nothing returns nothing
    set udg_DamageEventTrigger=CreateTrigger()
    call TriggerAddCondition(udg_DamageEventTrigger, Filter(function OnUnitDamage))
endfunction

function SetupDmgEv takes nothing returns boolean
    local integer i= udg_UDex
    local unit u
    if udg_UnitIndexEvent == 1.00 then
        set u=udg_UDexUnits[i]
        if GetUnitAbilityLevel(u, 'Aloc') == 0 and TriggerEvaluate(gg_trg_Damage_Engine_Config) then
            set udg_UnitDamageRegistered[i]=true
            call TriggerRegisterUnitEvent(udg_DamageEventTrigger, u, EVENT_UNIT_DAMAGED)
            call UnitAddAbility(u, udg_SpellDamageAbility)
            call UnitMakeAbilityPermanent(u, true, udg_SpellDamageAbility)
        endif
        set u=null
    else
        set udg_HideDamageFrom[i]=false
        if udg_UnitDamageRegistered[i] then
            set udg_UnitDamageRegistered[i]=false
            set udg_DamageEventsWasted=udg_DamageEventsWasted + 1
            if udg_DamageEventsWasted == 32 then //After 32 registered units have been removed...
                set udg_DamageEventsWasted=0
                
                //Rebuild the mass EVENT_UNIT_DAMAGED trigger:
                call DestroyTrigger(udg_DamageEventTrigger)
                call CreateDmgEvTrg()
                set i=udg_UDexNext[0]
                loop
                    exitwhen i == 0
                    if udg_UnitDamageRegistered[i] then
                        call TriggerRegisterUnitEvent(udg_DamageEventTrigger, udg_UDexUnits[i], EVENT_UNIT_DAMAGED)
                    endif
                    set i=udg_UDexNext[i]
                endloop
            endif
        endif
    endif
    return false
endfunction
    
//===========================================================================
function InitTrig_Damage_Engine takes nothing returns nothing
    local unit u= CreateUnit(Player(bj_PLAYER_NEUTRAL_EXTRA), 'uloc', 0, 0, 0)
    local integer i= bj_MAX_PLAYERS
    
    //Create this trigger with UnitIndexEvents in order add and remove units
    //as they are created or removed.
    local trigger t= CreateTrigger()
    call TriggerRegisterVariableEvent(t, "udg_UnitIndexEvent", EQUAL, 1.00)
    call TriggerRegisterVariableEvent(t, "udg_UnitIndexEvent", EQUAL, 2.00)
    call TriggerAddCondition(t, Filter(function SetupDmgEv))
    set t=null
    
    //Run the configuration trigger to set all configurables:
    if gg_trg_Damage_Engine_Config == null then
        //It's possible this InitTrig_ function ran first, in which case use ExecuteFunc.
        call ExecuteFunc("Trig_Damage_Engine_Config_Actions")
    else
        call TriggerExecute(gg_trg_Damage_Engine_Config)
    endif
    
    //Create trigger for storing all EVENT_UNIT_DAMAGED events.
    call CreateDmgEvTrg()
    
    //Create GUI-friendly trigger for cleaning up after UnitDamageTarget.
    set udg_ClearDamageEvent=CreateTrigger()
    call TriggerAddCondition(udg_ClearDamageEvent, Filter(function PreCheckDamagedLifeEvent))
    
    //Disable SpellDamageAbility for every player.
    loop
        set i=i - 1
        call SetPlayerAbilityAvailable(Player(i), udg_SpellDamageAbility, false)
        exitwhen i == 0
    endloop
    
    //Preload abilities.
    call UnitAddAbility(u, udg_DamageBlockingAbility)
    call UnitAddAbility(u, udg_SpellDamageAbility)
    call RemoveUnit(u)
    set u=null
endfunction//===========================================================================
// Trigger: Cast
//===========================================================================
function Trig_Cast_Conditions takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A00N' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Cast_Func002Func002Func001C takes nothing returns boolean
    if ( not ( GetUnitAbilityLevelSwapped('A00N', GetTriggerUnit()) == 1 ) ) then
        return false
    endif
    if ( not ( IsUnitType(GetEnumUnit(), UNIT_TYPE_STRUCTURE) == true ) ) then
        return false
    endif
    if ( not ( IsUnitAlly(GetEnumUnit(), GetOwningPlayer(GetEnumUnit())) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Cast_Func002Func002Func002C takes nothing returns boolean
    if ( not ( GetUnitAbilityLevelSwapped('A00N', GetTriggerUnit()) == 2 ) ) then
        return false
    endif
    if ( not ( IsUnitType(GetEnumUnit(), UNIT_TYPE_STRUCTURE) == true ) ) then
        return false
    endif
    if ( not ( IsUnitAlly(GetEnumUnit(), GetOwningPlayer(GetEnumUnit())) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Cast_Func002Func002Func003C takes nothing returns boolean
    if ( not ( GetUnitAbilityLevelSwapped('A00N', GetTriggerUnit()) == 3 ) ) then
        return false
    endif
    if ( not ( IsUnitType(GetEnumUnit(), UNIT_TYPE_STRUCTURE) == true ) ) then
        return false
    endif
    if ( not ( IsUnitAlly(GetEnumUnit(), GetOwningPlayer(GetEnumUnit())) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Cast_Func002Func002A takes nothing returns nothing
    if ( Trig_Cast_Func002Func002Func001C() ) then
        call SetUnitLifeBJ(GetEnumUnit(), ( GetUnitStateSwap(UNIT_STATE_LIFE, GetEnumUnit()) + 150.00 ))
    else
        call DoNothing()
    endif
    if ( Trig_Cast_Func002Func002Func002C() ) then
        call SetUnitLifeBJ(GetEnumUnit(), ( GetUnitStateSwap(UNIT_STATE_LIFE, GetEnumUnit()) + 250.00 ))
    else
        call DoNothing()
    endif
    if ( Trig_Cast_Func002Func002Func003C() ) then
        call SetUnitLifeBJ(GetEnumUnit(), ( GetUnitStateSwap(UNIT_STATE_LIFE, GetEnumUnit()) + 300.00 ))
    else
        call DoNothing()
    endif
endfunction

function Trig_Cast_Func002C takes nothing returns boolean
    return true
endfunction

function Trig_Cast_Func003A takes nothing returns nothing
    call DestructableRestoreLife(GetEnumDestructable(), GetDestructableMaxLife(GetEnumDestructable()), true)
endfunction

function Trig_Cast_Actions takes nothing returns nothing
    set udg_TargetLoc=GetSpellTargetLoc()
    if ( Trig_Cast_Func002C() ) then
        set bj_wantDestroyGroup=true
        call ForGroupBJ(GetUnitsInRangeOfLocAll(300.00, udg_TargetLoc), function Trig_Cast_Func002Func002A)
    else
    endif
    call EnumDestructablesInCircleBJ(300.00, udg_TargetLoc, function Trig_Cast_Func003A)
    call RemoveLocation(udg_TargetLoc)
endfunction

//===========================================================================
function InitTrig_Cast takes nothing returns nothing
    set gg_trg_Cast=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Cast, EVENT_PLAYER_UNIT_SPELL_EFFECT)
    call TriggerAddCondition(gg_trg_Cast, Condition(function Trig_Cast_Conditions))
    call TriggerAddAction(gg_trg_Cast, function Trig_Cast_Actions)
endfunction

//===========================================================================
// Trigger: Melee Initialization
//
// Default melee game initialization for all players
//===========================================================================
function Trig_Melee_Initialization_Func001A takes nothing returns nothing
    call SetPlayerTechMaxAllowedSwap('H00E', 1, GetEnumPlayer())
    call SetPlayerTechMaxAllowedSwap('H00D', 1, GetEnumPlayer())
    call SetPlayerTechMaxAllowedSwap('H00A', 1, GetEnumPlayer())
    call SetPlayerTechMaxAllowedSwap('H00B', 1, GetEnumPlayer())
    call SetPlayerTechMaxAllowedSwap('H00I', 1, GetEnumPlayer())
    call SetPlayerTechMaxAllowedSwap('U005', 1, GetEnumPlayer())
    call SetPlayerTechMaxAllowedSwap('E001', 1, GetEnumPlayer())
    call SetPlayerTechMaxAllowedSwap('E002', 1, GetEnumPlayer())
    call SetPlayerTechMaxAllowedSwap('E003', 1, GetEnumPlayer())
    call SetPlayerTechMaxAllowedSwap('Efur', 1, GetEnumPlayer())
    call SetPlayerTechMaxAllowedSwap('H003', 1, GetEnumPlayer())
    call SetPlayerTechMaxAllowedSwap('U00D', 1, GetEnumPlayer())
    call SetPlayerTechMaxAllowedSwap('U00E', 1, GetEnumPlayer())
endfunction

function Trig_Melee_Initialization_Actions takes nothing returns nothing
    call ForForce(GetPlayersAll(), function Trig_Melee_Initialization_Func001A)
    call MeleeStartingVisibility()
    call MeleeStartingHeroLimit()
    call MeleeGrantHeroItems()
    call MeleeStartingResources()
    call MeleeClearExcessUnits()
    call MeleeStartingUnits()
    call MeleeStartingAI()
    call MeleeInitVictoryDefeat()
endfunction

//===========================================================================
function InitTrig_Melee_Initialization takes nothing returns nothing
    set gg_trg_Melee_Initialization=CreateTrigger()
    call TriggerAddAction(gg_trg_Melee_Initialization, function Trig_Melee_Initialization_Actions)
endfunction

//===========================================================================
// Trigger: Безымянный триггер 006
//===========================================================================
function Trig_____________________________________006_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTriggerUnit()) == 'h007' ) ) then
        return false
    endif
    return true
endfunction

function Trig_____________________________________006_Actions takes nothing returns nothing
    call SetUnitAnimation(GetTriggerUnit(), "death alternate")
endfunction

//===========================================================================
function InitTrig_____________________________________006 takes nothing returns nothing
    set gg_trg_____________________________________006=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_____________________________________006, EVENT_PLAYER_UNIT_SPELL_FINISH)
    call TriggerAddCondition(gg_trg_____________________________________006, Condition(function Trig_____________________________________006_Conditions))
    call TriggerAddAction(gg_trg_____________________________________006, function Trig_____________________________________006_Actions)
endfunction

//===========================================================================
// Trigger: Speed Aura
//===========================================================================
function Trig_Speed_Aura_Conditions takes nothing returns boolean
    if ( not ( IsUnitEnemy(GetSpellTargetUnit(), GetOwningPlayer(GetSpellAbilityUnit())) == true ) ) then
        return false
    endif
    if ( not ( IsUnitType(GetSpellTargetUnit(), UNIT_TYPE_STRUCTURE) == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Speed_Aura_Func002Func002C takes nothing returns boolean
    if ( not ( GetRandomInt(1, 100) <= 20 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Speed_Aura_Func002Func004C takes nothing returns boolean
    if ( not ( GetRandomInt(1, 100) <= 10 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Speed_Aura_Func002Func006C takes nothing returns boolean
    if ( not ( GetRandomInt(1, 100) <= 5 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Speed_Aura_Func002C takes nothing returns boolean
    if ( not ( UnitHasBuffBJ(GetSpellTargetUnit(), 'B00G') == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Speed_Aura_Func003Func002C takes nothing returns boolean
    if ( not ( GetRandomInt(1, 100) <= 25 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Speed_Aura_Func003Func004C takes nothing returns boolean
    if ( not ( GetRandomInt(1, 100) <= 15 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Speed_Aura_Func003Func006C takes nothing returns boolean
    if ( not ( GetRandomInt(1, 100) <= 10 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Speed_Aura_Func003C takes nothing returns boolean
    if ( not ( UnitHasBuffBJ(GetSpellTargetUnit(), 'B00I') == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Speed_Aura_Func004Func002C takes nothing returns boolean
    if ( not ( GetRandomInt(1, 100) <= 30 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Speed_Aura_Func004Func004C takes nothing returns boolean
    if ( not ( GetRandomInt(1, 100) <= 20 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Speed_Aura_Func004Func006C takes nothing returns boolean
    if ( not ( GetRandomInt(1, 100) <= 15 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Speed_Aura_Func004C takes nothing returns boolean
    if ( not ( UnitHasBuffBJ(GetSpellTargetUnit(), 'B00H') == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Speed_Aura_Actions takes nothing returns nothing
    set udg_SparkyUnit=GetSpellTargetUnit()
    if ( Trig_Speed_Aura_Func002C() ) then
        if ( Trig_Speed_Aura_Func002Func002C() ) then
            call CreateTextTagUnitBJ("TRIGSTR_030", udg_SparkyUnit, 0, 10, 0.00, 0.00, 75.00, 0)
            call SetTextTagPermanentBJ(GetLastCreatedTextTag(), false)
            call SetTextTagVelocityBJ(GetLastCreatedTextTag(), 64, 90)
            call SetTextTagFadepointBJ(GetLastCreatedTextTag(), 3.00)
            call SetTextTagLifespanBJ(GetLastCreatedTextTag(), 5.00)
            // Настроить урон
            call UnitDamageTargetBJ(GetSpellAbilityUnit(), udg_SparkyUnit, 100.00, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_LIGHTNING)
            call AddSpecialEffectTargetUnitBJ("overhead", udg_SparkyUnit, "Abilities\\Spells\\Other\\Monsoon\\MonsoonBoltTarget.mdl")
            call DestroyEffectBJ(GetLastCreatedEffectBJ())
            set udg_SparkyUnit=null
        else
        endif
        set udg_SparkyUnit=GetSpellTargetUnit()
        if ( Trig_Speed_Aura_Func002Func004C() ) then
            call CreateTextTagUnitBJ("TRIGSTR_031", udg_SparkyUnit, 0, 10, 0.00, 0.00, 75.00, 0)
            call SetTextTagPermanentBJ(GetLastCreatedTextTag(), false)
            call SetTextTagVelocityBJ(GetLastCreatedTextTag(), 64, 90)
            call SetTextTagFadepointBJ(GetLastCreatedTextTag(), 3.00)
            call SetTextTagLifespanBJ(GetLastCreatedTextTag(), 5.00)
            call UnitDamageTargetBJ(GetSpellAbilityUnit(), udg_SparkyUnit, 150.00, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_LIGHTNING)
            call AddSpecialEffectTargetUnitBJ("overhead", udg_SparkyUnit, "Abilities\\Spells\\Other\\Monsoon\\MonsoonBoltTarget.mdl")
            call DestroyEffectBJ(GetLastCreatedEffectBJ())
            set udg_SparkyUnit=null
        else
        endif
        set udg_SparkyUnit=GetSpellTargetUnit()
        if ( Trig_Speed_Aura_Func002Func006C() ) then
            call CreateTextTagUnitBJ("TRIGSTR_032", udg_SparkyUnit, 0, 10, 0.00, 0.00, 75.00, 0)
            call SetTextTagPermanentBJ(GetLastCreatedTextTag(), false)
            call SetTextTagVelocityBJ(GetLastCreatedTextTag(), 64, 90)
            call SetTextTagFadepointBJ(GetLastCreatedTextTag(), 3.00)
            call SetTextTagLifespanBJ(GetLastCreatedTextTag(), 5.00)
            call UnitDamageTargetBJ(GetSpellAbilityUnit(), udg_SparkyUnit, 200.00, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_LIGHTNING)
            call AddSpecialEffectTargetUnitBJ("overhead", udg_SparkyUnit, "Abilities\\Spells\\Other\\Monsoon\\MonsoonBoltTarget.mdl")
            call DestroyEffectBJ(GetLastCreatedEffectBJ())
            set udg_SparkyUnit=null
        else
        endif
    else
    endif
    if ( Trig_Speed_Aura_Func003C() ) then
        if ( Trig_Speed_Aura_Func003Func002C() ) then
            call CreateTextTagUnitBJ("TRIGSTR_033", udg_SparkyUnit, 0, 10, 0.00, 0.00, 75.00, 0)
            call SetTextTagPermanentBJ(GetLastCreatedTextTag(), false)
            call SetTextTagVelocityBJ(GetLastCreatedTextTag(), 64, 90)
            call SetTextTagFadepointBJ(GetLastCreatedTextTag(), 3.00)
            call SetTextTagLifespanBJ(GetLastCreatedTextTag(), 5.00)
            call UnitDamageTargetBJ(GetSpellAbilityUnit(), udg_SparkyUnit, 100.00, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_LIGHTNING)
            call AddSpecialEffectTargetUnitBJ("overhead", udg_SparkyUnit, "Abilities\\Spells\\Other\\Monsoon\\MonsoonBoltTarget.mdl")
            call DestroyEffectBJ(GetLastCreatedEffectBJ())
            set udg_SparkyUnit=null
        else
        endif
        set udg_SparkyUnit=GetSpellTargetUnit()
        if ( Trig_Speed_Aura_Func003Func004C() ) then
            call CreateTextTagUnitBJ("TRIGSTR_034", udg_SparkyUnit, 0, 10, 0.00, 0.00, 75.00, 0)
            call SetTextTagPermanentBJ(GetLastCreatedTextTag(), false)
            call SetTextTagVelocityBJ(GetLastCreatedTextTag(), 64, 90)
            call SetTextTagFadepointBJ(GetLastCreatedTextTag(), 3.00)
            call SetTextTagLifespanBJ(GetLastCreatedTextTag(), 5.00)
            call UnitDamageTargetBJ(GetSpellAbilityUnit(), udg_SparkyUnit, 150.00, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_LIGHTNING)
            call AddSpecialEffectTargetUnitBJ("overhead", udg_SparkyUnit, "Abilities\\Spells\\Other\\Monsoon\\MonsoonBoltTarget.mdl")
            call DestroyEffectBJ(GetLastCreatedEffectBJ())
            set udg_SparkyUnit=null
        else
        endif
        set udg_SparkyUnit=GetSpellTargetUnit()
        if ( Trig_Speed_Aura_Func003Func006C() ) then
            call CreateTextTagUnitBJ("TRIGSTR_035", udg_SparkyUnit, 0, 10, 0.00, 0.00, 75.00, 0)
            call SetTextTagPermanentBJ(GetLastCreatedTextTag(), false)
            call SetTextTagVelocityBJ(GetLastCreatedTextTag(), 64, 90)
            call SetTextTagFadepointBJ(GetLastCreatedTextTag(), 3.00)
            call SetTextTagLifespanBJ(GetLastCreatedTextTag(), 5.00)
            call UnitDamageTargetBJ(GetSpellAbilityUnit(), udg_SparkyUnit, 200.00, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_LIGHTNING)
            call AddSpecialEffectTargetUnitBJ("overhead", udg_SparkyUnit, "Abilities\\Spells\\Other\\Monsoon\\MonsoonBoltTarget.mdl")
            call DestroyEffectBJ(GetLastCreatedEffectBJ())
            set udg_SparkyUnit=null
        else
        endif
    else
    endif
    if ( Trig_Speed_Aura_Func004C() ) then
        if ( Trig_Speed_Aura_Func004Func002C() ) then
            call CreateTextTagUnitBJ("TRIGSTR_036", udg_SparkyUnit, 0, 10, 0.00, 0.00, 75.00, 0)
            call SetTextTagPermanentBJ(GetLastCreatedTextTag(), false)
            call SetTextTagVelocityBJ(GetLastCreatedTextTag(), 64, 90)
            call SetTextTagFadepointBJ(GetLastCreatedTextTag(), 3.00)
            call SetTextTagLifespanBJ(GetLastCreatedTextTag(), 5.00)
            call UnitDamageTargetBJ(GetSpellAbilityUnit(), udg_SparkyUnit, 100.00, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_LIGHTNING)
            call AddSpecialEffectTargetUnitBJ("overhead", udg_SparkyUnit, "Abilities\\Spells\\Other\\Monsoon\\MonsoonBoltTarget.mdl")
            call DestroyEffectBJ(GetLastCreatedEffectBJ())
            set udg_SparkyUnit=null
        else
        endif
        set udg_SparkyUnit=GetSpellTargetUnit()
        if ( Trig_Speed_Aura_Func004Func004C() ) then
            call CreateTextTagUnitBJ("TRIGSTR_037", udg_SparkyUnit, 0, 10, 0.00, 0.00, 75.00, 0)
            call SetTextTagPermanentBJ(GetLastCreatedTextTag(), false)
            call SetTextTagVelocityBJ(GetLastCreatedTextTag(), 64, 90)
            call SetTextTagFadepointBJ(GetLastCreatedTextTag(), 3.00)
            call SetTextTagLifespanBJ(GetLastCreatedTextTag(), 5.00)
            call UnitDamageTargetBJ(GetSpellAbilityUnit(), udg_SparkyUnit, 150.00, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_LIGHTNING)
            call AddSpecialEffectTargetUnitBJ("overhead", udg_SparkyUnit, "Abilities\\Spells\\Other\\Monsoon\\MonsoonBoltTarget.mdl")
            call DestroyEffectBJ(GetLastCreatedEffectBJ())
            set udg_SparkyUnit=null
        else
        endif
        set udg_SparkyUnit=GetSpellTargetUnit()
        if ( Trig_Speed_Aura_Func004Func006C() ) then
            call CreateTextTagUnitBJ("TRIGSTR_038", udg_SparkyUnit, 0, 10, 0.00, 0.00, 75.00, 0)
            call SetTextTagPermanentBJ(GetLastCreatedTextTag(), false)
            call SetTextTagVelocityBJ(GetLastCreatedTextTag(), 64, 90)
            call SetTextTagFadepointBJ(GetLastCreatedTextTag(), 3.00)
            call SetTextTagLifespanBJ(GetLastCreatedTextTag(), 5.00)
            call UnitDamageTargetBJ(GetSpellAbilityUnit(), udg_SparkyUnit, 200.00, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_LIGHTNING)
            call AddSpecialEffectTargetUnitBJ("overhead", udg_SparkyUnit, "Abilities\\Spells\\Other\\Monsoon\\MonsoonBoltTarget.mdl")
            call DestroyEffectBJ(GetLastCreatedEffectBJ())
            set udg_SparkyUnit=null
        else
        endif
    else
    endif
endfunction

//===========================================================================
function InitTrig_Speed_Aura takes nothing returns nothing
    set gg_trg_Speed_Aura=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Speed_Aura, EVENT_PLAYER_UNIT_SPELL_EFFECT)
    call TriggerAddCondition(gg_trg_Speed_Aura, Condition(function Trig_Speed_Aura_Conditions))
    call TriggerAddAction(gg_trg_Speed_Aura, function Trig_Speed_Aura_Actions)
endfunction

//===========================================================================
// Trigger: Hashtable
//===========================================================================
function Trig_Hashtable_Actions takes nothing returns nothing
    call InitHashtableBJ()
    set udg_hashtable=GetLastCreatedHashtableBJ()
    // To change the duration edit the value in the Object Editor named "Follow Through Time"
    // If TRUE, will burn mana equal to the damage
    set udg_manaburn=true
    // Sets the damage done per bolt
    set udg_damage[1]=25.00
    set udg_damage[2]=35.00
    set udg_damage[3]=45.00
    // The pick range for the random unit
    set udg_areaofeffect[1]=600.00
    set udg_areaofeffect[2]=600.00
    set udg_areaofeffect[3]=600.00
    // Ground SFX
    set udg_unitsfx="Abilities\\Weapons\\Bolt\\BoltImpact.mdl"
    // The Order ID. This must correspond with the ability ID in the base ability
    set udg_orderid="channel"
endfunction

//===========================================================================
function InitTrig_Hashtable takes nothing returns nothing
    set gg_trg_Hashtable=CreateTrigger()
    call TriggerAddAction(gg_trg_Hashtable, function Trig_Hashtable_Actions)
endfunction

//===========================================================================
// Trigger: Elune Wrath
//===========================================================================
function Trig_Elune_Wrath_Conditions takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A012' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Elune_Wrath_Actions takes nothing returns nothing
    // Simply primes the loop
    call GroupAddUnitSimple(GetTriggerUnit(), udg_stormgroup)
    call EnableTrigger(gg_trg_Elune_Wrath_loop)
endfunction

//===========================================================================
function InitTrig_Elune_Wrath takes nothing returns nothing
    set gg_trg_Elune_Wrath=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Elune_Wrath, EVENT_PLAYER_UNIT_SPELL_EFFECT)
    call TriggerAddCondition(gg_trg_Elune_Wrath, Condition(function Trig_Elune_Wrath_Conditions))
    call TriggerAddAction(gg_trg_Elune_Wrath, function Trig_Elune_Wrath_Actions)
endfunction

//===========================================================================
// Trigger: Elune Wrath loop
//===========================================================================
function Trig_Elune_Wrath_loop_Func001Func006Func001Func007002001003001 takes nothing returns boolean
    return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE) == false )
endfunction

function Trig_Elune_Wrath_loop_Func001Func006Func001Func007002001003002001 takes nothing returns boolean
    return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false )
endfunction

function Trig_Elune_Wrath_loop_Func001Func006Func001Func007002001003002002001 takes nothing returns boolean
    return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Elune_Wrath_loop_Func001Func006Func001Func007002001003002002002 takes nothing returns boolean
    return ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(udg_caster)) == true )
endfunction

function Trig_Elune_Wrath_loop_Func001Func006Func001Func007002001003002002 takes nothing returns boolean
    return GetBooleanAnd(Trig_Elune_Wrath_loop_Func001Func006Func001Func007002001003002002001(), Trig_Elune_Wrath_loop_Func001Func006Func001Func007002001003002002002())
endfunction

function Trig_Elune_Wrath_loop_Func001Func006Func001Func007002001003002 takes nothing returns boolean
    return GetBooleanAnd(Trig_Elune_Wrath_loop_Func001Func006Func001Func007002001003002001(), Trig_Elune_Wrath_loop_Func001Func006Func001Func007002001003002002())
endfunction

function Trig_Elune_Wrath_loop_Func001Func006Func001Func007002001003 takes nothing returns boolean
    return GetBooleanAnd(Trig_Elune_Wrath_loop_Func001Func006Func001Func007002001003001(), Trig_Elune_Wrath_loop_Func001Func006Func001Func007002001003002())
endfunction

function Trig_Elune_Wrath_loop_Func001Func006Func001Func009Func008C takes nothing returns boolean
    if ( not ( udg_manaburn == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Elune_Wrath_loop_Func001Func006Func001Func009C takes nothing returns boolean
    if ( not ( udg_target == null ) ) then
        return false
    endif
    return true
endfunction

function Trig_Elune_Wrath_loop_Func001Func006Func001Func012C takes nothing returns boolean
    if ( not ( CountUnitsInGroup(udg_stormgroup) == 0 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Elune_Wrath_loop_Func001Func006Func001C takes nothing returns boolean
    if ( not ( GetUnitCurrentOrder(udg_caster) == String2OrderIdBJ(udg_orderid) ) ) then
        return false
    endif
    if ( not ( GetUnitStateSwap(UNIT_STATE_LIFE, udg_caster) > 0.00 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Elune_Wrath_loop_Func001Func006C takes nothing returns boolean
    if ( not ( udg_boolean == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Elune_Wrath_loop_Func001A takes nothing returns nothing
    set udg_caster=GetEnumUnit()
    set udg_handle=GetHandleId(udg_caster)
    // We destroy the lightning here because we want it gone regardless of whether the unit is channeling or not
    // If we only destroyed it if it was channeling, a lightning would be left at the end
    set udg_boolean=LoadBooleanBJ(1, udg_handle, udg_hashtable)
    if ( Trig_Elune_Wrath_loop_Func001Func006C() ) then
        call SaveBooleanBJ(false, 1, udg_handle, udg_hashtable)
        call DestroyLightningBJ(LoadLightningHandleBJ(0, udg_handle, udg_hashtable))
    else
        if ( Trig_Elune_Wrath_loop_Func001Func006Func001C() ) then
            // It only strikes every other instance.
            // This way there is a visible strike each time, not just it jumping from one spot to another
            // Setting stuff
            set udg_point1=GetUnitLoc(udg_caster)
            set udg_level=GetUnitAbilityLevelSwapped('A012', udg_caster)
            set bj_wantDestroyGroup=true
            set udg_target=GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(udg_areaofeffect[udg_level], udg_point1, Condition(function Trig_Elune_Wrath_loop_Func001Func006Func001Func007002001003)))
            // Simply checks if there is a unit within AoE
            if ( Trig_Elune_Wrath_loop_Func001Func006Func001Func009C() ) then
            else
                set udg_point2=GetUnitLoc(udg_target)
                // Sets the lightning, and sets the sfx
                set udg_light=AddLightningEx("FORK", true, GetUnitX(udg_caster), GetUnitY(udg_caster), GetLocationZ(udg_point1) + 1400, GetUnitX(udg_target), GetUnitY(udg_target), GetLocationZ(udg_point2) + GetUnitFlyHeight(udg_target))
                call AddSpecialEffectTargetUnitBJ("origin", udg_target, udg_unitsfx)
                call DestroyEffectBJ(GetLastCreatedEffectBJ())
                // Damage + manaburn
                call UnitDamageTargetBJ(udg_caster, udg_target, udg_damage[udg_level], ATTACK_TYPE_NORMAL, DAMAGE_TYPE_NORMAL)
                if ( Trig_Elune_Wrath_loop_Func001Func006Func001Func009Func008C() ) then
                    call SetUnitManaBJ(udg_target, ( GetUnitStateSwap(UNIT_STATE_MANA, udg_target) - udg_damage[udg_level] ))
                else
                endif
                call SaveLightningHandleBJ(udg_light, 0, udg_handle, udg_hashtable)
                call SaveBooleanBJ(true, 1, udg_handle, udg_hashtable)
                call RemoveLocation(udg_point2)
            endif
        else
            call FlushChildHashtableBJ(udg_handle, udg_hashtable)
            call GroupRemoveUnitSimple(udg_caster, udg_stormgroup)
            if ( Trig_Elune_Wrath_loop_Func001Func006Func001Func012C() ) then
                call DisableTrigger(GetTriggeringTrigger())
            else
            endif
        endif
        call SaveBooleanBJ(true, 1, udg_handle, udg_hashtable)
        call RemoveLocation(udg_point1)
    endif
endfunction

function Trig_Elune_Wrath_loop_Actions takes nothing returns nothing
    call ForGroupBJ(udg_stormgroup, function Trig_Elune_Wrath_loop_Func001A)
endfunction

//===========================================================================
function InitTrig_Elune_Wrath_loop takes nothing returns nothing
    set gg_trg_Elune_Wrath_loop=CreateTrigger()
    call DisableTrigger(gg_trg_Elune_Wrath_loop)
    call TriggerRegisterTimerEventPeriodic(gg_trg_Elune_Wrath_loop, 0.10)
    call TriggerAddAction(gg_trg_Elune_Wrath_loop, function Trig_Elune_Wrath_loop_Actions)
endfunction

//===========================================================================
// Trigger: Kraken Learn
//===========================================================================
function Trig_Kraken_Learn_Conditions takes nothing returns boolean
    if ( not ( GetLearnedSkillBJ() == 'A016' ) ) then
        return false
    endif
    if ( not ( IsUnitInGroup(GetLearningUnit(), udg_KrakenGroup) != true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Kraken_Learn_Actions takes nothing returns nothing
    call GroupAddUnitSimple(GetLearningUnit(), udg_KrakenGroup)
    set udg_KrakenCount=( udg_KrakenCount + 1 )
    call SetUnitUserData(GetLearningUnit(), udg_KrakenCount)
    call TriggerRegisterUnitEvent(gg_trg_Kraken, GetLearningUnit(), EVENT_UNIT_DAMAGED)
endfunction

//===========================================================================
function InitTrig_Kraken_Learn takes nothing returns nothing
    set gg_trg_Kraken_Learn=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Kraken_Learn, EVENT_PLAYER_HERO_SKILL)
    call TriggerAddCondition(gg_trg_Kraken_Learn, Condition(function Trig_Kraken_Learn_Conditions))
    call TriggerAddAction(gg_trg_Kraken_Learn, function Trig_Kraken_Learn_Actions)
endfunction

//===========================================================================
// Trigger: Kraken
//===========================================================================
function Trig_Kraken_Func001Func001C takes nothing returns boolean
    if ( not ( udg_KrakenDamageCount[GetUnitUserData(GetTriggerUnit())] >= 200.00 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Kraken_Func001C takes nothing returns boolean
    if ( not ( udg_KrakenDamageCount[GetUnitUserData(GetTriggerUnit())] < 200.00 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Kraken_Actions takes nothing returns nothing
    if ( Trig_Kraken_Func001C() ) then
        set udg_KrakenDamageCount[GetUnitUserData(GetTriggerUnit())]=( udg_KrakenDamageCount[GetUnitUserData(GetTriggerUnit())] + GetEventDamage() )
        set udg_KrakenCounterStart[GetUnitUserData(GetTriggerUnit())]=1
        set udg_KrakenTimeCounter[GetUnitUserData(GetTriggerUnit())]=0.00
    else
        if ( Trig_Kraken_Func001Func001C() ) then
            call UnitRemoveBuffsExBJ(bj_BUFF_POLARITY_NEGATIVE, bj_BUFF_RESIST_EITHER, GetTriggerUnit(), true, true)
            call AddSpecialEffectTargetUnitBJ("chest", GetTriggerUnit(), "Abilities\\Spells\\Human\\DivineShield\\DivineShieldTarget.mdl")
            call DestroyEffectBJ(GetLastCreatedEffectBJ())
            set udg_KrakenCounterStart[GetUnitUserData(GetTriggerUnit())]=0
            set udg_KrakenTimeCounter[GetUnitUserData(GetTriggerUnit())]=0.00
            set udg_KrakenDamageCount[GetUnitUserData(GetTriggerUnit())]=0.00
        else
        endif
    endif
endfunction

//===========================================================================
function InitTrig_Kraken takes nothing returns nothing
    set gg_trg_Kraken=CreateTrigger()
    call TriggerAddAction(gg_trg_Kraken, function Trig_Kraken_Actions)
endfunction

//===========================================================================
// Trigger: Kraken Time
//===========================================================================
function Trig_Kraken_Time_Func001Func001Func001C takes nothing returns boolean
    if ( not ( udg_KrakenTimeCounter[GetForLoopIndexA()] < 6.00 ) ) then
        return false
    endif
    if ( not ( udg_KrakenCounterStart[GetForLoopIndexA()] != 0 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Kraken_Time_Func001Func001C takes nothing returns boolean
    if ( not ( udg_KrakenTimeCounter[GetForLoopIndexA()] >= 6.00 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Kraken_Time_Actions takes nothing returns nothing
    set bj_forLoopAIndex=1
    set bj_forLoopAIndexEnd=udg_KrakenCount
    loop
        exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
        if ( Trig_Kraken_Time_Func001Func001C() ) then
            set udg_KrakenDamageCount[GetForLoopIndexA()]=0.00
            set udg_KrakenTimeCounter[GetForLoopIndexA()]=0.00
            set udg_KrakenCounterStart[GetForLoopIndexA()]=0
        else
            if ( Trig_Kraken_Time_Func001Func001Func001C() ) then
                set udg_KrakenTimeCounter[GetForLoopIndexA()]=( udg_KrakenTimeCounter[GetForLoopIndexA()] + 0.03 )
            else
            endif
        endif
        set bj_forLoopAIndex=bj_forLoopAIndex + 1
    endloop
endfunction

//===========================================================================
function InitTrig_Kraken_Time takes nothing returns nothing
    set gg_trg_Kraken_Time=CreateTrigger()
    call TriggerRegisterTimerEventPeriodic(gg_trg_Kraken_Time, 0.03)
    call TriggerAddAction(gg_trg_Kraken_Time, function Trig_Kraken_Time_Actions)
endfunction

//===========================================================================
// Trigger: SKF
//===========================================================================
function Trig_SKF_Conditions takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A015' ) ) then
        return false
    endif
    return true
endfunction

function Trig_SKF_Actions takes nothing returns nothing
    //  
    // Here are the general Settings. You can adjust them easily.
    set udg_SF_BouncesNumber=( 1 * GetUnitAbilityLevelSwapped(GetSpellAbilityId(), GetTriggerUnit()) )
    // This returns the number of the bounces of the big missile.
    set udg_SF_RangeBetweenBounces=200.00
    // This returns the range of the bounces of the big missile.
    set udg_SF_RangeOfSmallMissiles=100.00
    // This returns the range of the bounces of the small missiles.
    set udg_SF_NumberOfSmallMissiles=6
    // This returns the number of small missiles spawned.
    set udg_SF_DamageBigMissiles=( 50.00 * I2R(GetUnitAbilityLevelSwapped(GetSpellAbilityId(), GetTriggerUnit())) )
    // This returns the damage dealt by big missiles.
    set udg_SF_DamageSmallMissiles=( 10.00 * I2R(GetUnitAbilityLevelSwapped(GetSpellAbilityId(), GetTriggerUnit())) )
    // This returns the damage dealt by small missiles.
    set udg_SF_DestroyTrees=true
    // This returns whether trees should be destroyed or not.
    //  
    // Here begins the spell. It is not recommended to change anything below this line.
    // Please adjust the following lines only if you know what you´re doing.
    //  
    set udg_JDA_Caster=GetTriggerUnit()
    set udg_SF_TempPoint[1]=GetUnitLoc(udg_JDA_Caster)
    set udg_SF_TempPoint[2]=GetSpellTargetLoc()
    call CreateNUnitsAtLoc(1, 'n00I', GetOwningPlayer(udg_JDA_Caster), udg_SF_TempPoint[1], bj_UNIT_FACING)
    call AddSpecialEffectTargetUnitBJ("chest", GetLastCreatedUnit(), "Abilities\\Spells\\Other\\Volcano\\VolcanoMissile.mdl")
    set udg_JDA_JumpHigh_Distance=0.60
    set udg_JDA_DestroyTrees_Dash=udg_SF_DestroyTrees
    set udg_JDA_TargetPoint=PolarProjectionBJ(udg_SF_TempPoint[1], udg_SF_RangeBetweenBounces, AngleBetweenPoints(udg_SF_TempPoint[1], udg_SF_TempPoint[2]))
    set udg_JDA_Unit=GetLastCreatedUnit()
    set udg_JDA_Speed=14.00
    set udg_JDA_SmallFalse_BigTrue=true
    call ConditionalTriggerExecute(gg_trg_skf)
    call RemoveLocation(udg_SF_TempPoint[1])
    call RemoveLocation(udg_SF_TempPoint[2])
endfunction

//===========================================================================
function InitTrig_SKF takes nothing returns nothing
    set gg_trg_SKF=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_SKF, EVENT_PLAYER_UNIT_SPELL_EFFECT)
    call TriggerAddCondition(gg_trg_SKF, Condition(function Trig_SKF_Conditions))
    call TriggerAddAction(gg_trg_SKF, function Trig_SKF_Actions)
endfunction

//===========================================================================
// Trigger: skf
//===========================================================================
function Trig_skf_Func001C takes nothing returns boolean
    if ( not ( udg_JD_Integers[1] == 0 ) ) then
        return false
    endif
    return true
endfunction

function Trig_skf_Func016C takes nothing returns boolean
    if ( not ( udg_JD_SmallFalse_BigTrue[udg_JD_Integers[2]] == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_skf_Actions takes nothing returns nothing
    if ( Trig_skf_Func001C() ) then
        call EnableTrigger(gg_trg_SKF3)
    else
    endif
    set udg_JD_Integers[1]=( udg_JD_Integers[1] + 1 )
    set udg_JD_Integers[2]=( udg_JD_Integers[2] + 1 )
    set udg_JD_SmallPoint=GetUnitLoc(udg_JDA_Unit)
    set udg_JD_Distances[udg_JD_Integers[2]]=DistanceBetweenPoints(udg_JD_SmallPoint, udg_JDA_TargetPoint)
    set udg_JD_ReachedDistance[udg_JD_Integers[2]]=0.00
    set udg_JD_SpeedUnits[udg_JD_Integers[2]]=udg_JDA_Speed
    set udg_JD_Unit[udg_JD_Integers[2]]=udg_JDA_Unit
    set udg_JD_Angle[udg_JD_Integers[2]]=AngleBetweenPoints(udg_JD_SmallPoint, udg_JDA_TargetPoint)
    set udg_JD_TreesDestroy[udg_JD_Integers[2]]=udg_JDA_DestroyTrees_Dash
    set udg_JD_HighSettings[udg_JD_Integers[2]]=( udg_JDA_JumpHigh_Distance * udg_JD_Distances[udg_JD_Integers[2]] )
    set udg_JD_SmallFalse_BigTrue[udg_JD_Integers[2]]=udg_JDA_SmallFalse_BigTrue
    set udg_JD_Owner[udg_JD_Integers[2]]=udg_JDA_Caster
    set udg_JD_DamageBig[udg_JD_Integers[2]]=udg_SF_DamageBigMissiles
    set udg_JD_DamageSmall[udg_JD_Integers[2]]=udg_SF_DamageSmallMissiles
    if ( Trig_skf_Func016C() ) then
        set udg_JD_BouncesMax[udg_JD_Integers[2]]=udg_SF_BouncesNumber
        set udg_JD_BouncesCur[udg_JD_Integers[2]]=0
    else
    endif
    call GroupAddUnitSimple(udg_JDA_Unit, udg_JD_Group)
    call SetUnitPathing(udg_JDA_Unit, false)
    call UnitAddAbilityBJ('Arav', udg_JDA_Unit)
    call UnitRemoveAbilityBJ('Arav', udg_JDA_Unit)
    call RemoveLocation(udg_JD_SmallPoint)
    call RemoveLocation(udg_JDA_TargetPoint)
endfunction

//===========================================================================
function InitTrig_skf takes nothing returns nothing
    set gg_trg_skf=CreateTrigger()
    call TriggerAddAction(gg_trg_skf, function Trig_skf_Actions)
endfunction

//===========================================================================
// Trigger: SKF3
//===========================================================================
function Trig_SKF3_Func001Func001Func001Func001Func005002003001 takes nothing returns boolean
    return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false )
endfunction

function Trig_SKF3_Func001Func001Func001Func001Func005002003002001 takes nothing returns boolean
    return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_SKF3_Func001Func001Func001Func001Func005002003002002 takes nothing returns boolean
    return ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(udg_JD_Owner[udg_JD_Integers[3]])) == true )
endfunction

function Trig_SKF3_Func001Func001Func001Func001Func005002003002 takes nothing returns boolean
    return GetBooleanAnd(Trig_SKF3_Func001Func001Func001Func001Func005002003002001(), Trig_SKF3_Func001Func001Func001Func001Func005002003002002())
endfunction

function Trig_SKF3_Func001Func001Func001Func001Func005002003 takes nothing returns boolean
    return GetBooleanAnd(Trig_SKF3_Func001Func001Func001Func001Func005002003001(), Trig_SKF3_Func001Func001Func001Func001Func005002003002())
endfunction

function Trig_SKF3_Func001Func001Func001Func001Func006A takes nothing returns nothing
    call AddSpecialEffectTargetUnitBJ("chest", GetEnumUnit(), "Abilities\\Weapons\\LavaSpawnMissile\\LavaSpawnBirthMissile.mdl")
    call DestroyEffectBJ(GetLastCreatedEffectBJ())
    call UnitDamageTargetBJ(udg_JD_Owner[udg_JD_Integers[3]], GetEnumUnit(), udg_JD_DamageSmall[udg_JD_Integers[3]], ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNIVERSAL)
endfunction

function Trig_SKF3_Func001Func001Func001Func001Func012C takes nothing returns boolean
    if ( not ( udg_JD_Integers[1] == 0 ) ) then
        return false
    endif
    return true
endfunction

function Trig_SKF3_Func001Func001Func001Func001Func014Func007002003001 takes nothing returns boolean
    return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false )
endfunction

function Trig_SKF3_Func001Func001Func001Func001Func014Func007002003002001 takes nothing returns boolean
    return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_SKF3_Func001Func001Func001Func001Func014Func007002003002002 takes nothing returns boolean
    return ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(udg_JD_Owner[udg_JD_Integers[3]])) == true )
endfunction

function Trig_SKF3_Func001Func001Func001Func001Func014Func007002003002 takes nothing returns boolean
    return GetBooleanAnd(Trig_SKF3_Func001Func001Func001Func001Func014Func007002003002001(), Trig_SKF3_Func001Func001Func001Func001Func014Func007002003002002())
endfunction

function Trig_SKF3_Func001Func001Func001Func001Func014Func007002003 takes nothing returns boolean
    return GetBooleanAnd(Trig_SKF3_Func001Func001Func001Func001Func014Func007002003001(), Trig_SKF3_Func001Func001Func001Func001Func014Func007002003002())
endfunction

function Trig_SKF3_Func001Func001Func001Func001Func014Func008A takes nothing returns nothing
    call AddSpecialEffectTargetUnitBJ("chest", GetEnumUnit(), "Abilities\\Weapons\\LavaSpawnMissile\\LavaSpawnBirthMissile.mdl")
    call DestroyEffectBJ(GetLastCreatedEffectBJ())
    call UnitDamageTargetBJ(udg_JD_Owner[udg_JD_Integers[3]], GetEnumUnit(), udg_JD_DamageBig[udg_JD_Integers[3]], ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNIVERSAL)
endfunction

function Trig_SKF3_Func001Func001Func001Func001Func014Func017002003001 takes nothing returns boolean
    return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false )
endfunction

function Trig_SKF3_Func001Func001Func001Func001Func014Func017002003002001 takes nothing returns boolean
    return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_SKF3_Func001Func001Func001Func001Func014Func017002003002002 takes nothing returns boolean
    return ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(udg_JD_Owner[udg_JD_Integers[3]])) == true )
endfunction

function Trig_SKF3_Func001Func001Func001Func001Func014Func017002003002 takes nothing returns boolean
    return GetBooleanAnd(Trig_SKF3_Func001Func001Func001Func001Func014Func017002003002001(), Trig_SKF3_Func001Func001Func001Func001Func014Func017002003002002())
endfunction

function Trig_SKF3_Func001Func001Func001Func001Func014Func017002003 takes nothing returns boolean
    return GetBooleanAnd(Trig_SKF3_Func001Func001Func001Func001Func014Func017002003001(), Trig_SKF3_Func001Func001Func001Func001Func014Func017002003002())
endfunction

function Trig_SKF3_Func001Func001Func001Func001Func014Func018A takes nothing returns nothing
    call AddSpecialEffectTargetUnitBJ("chest", GetEnumUnit(), "Abilities\\Weapons\\LavaSpawnMissile\\LavaSpawnBirthMissile.mdl")
    call DestroyEffectBJ(GetLastCreatedEffectBJ())
    call UnitDamageTargetBJ(udg_JD_Owner[udg_JD_Integers[3]], GetEnumUnit(), udg_JD_DamageBig[udg_JD_Integers[3]], ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNIVERSAL)
endfunction

function Trig_SKF3_Func001Func001Func001Func001Func014Func025C takes nothing returns boolean
    if ( not ( udg_JD_Integers[1] == 0 ) ) then
        return false
    endif
    return true
endfunction

function Trig_SKF3_Func001Func001Func001Func001Func014C takes nothing returns boolean
    if ( not ( udg_JD_BouncesCur[udg_JD_Integers[3]] != udg_JD_BouncesMax[udg_JD_Integers[3]] ) ) then
        return false
    endif
    return true
endfunction

function Trig_SKF3_Func001Func001Func001Func001C takes nothing returns boolean
    if ( not ( udg_JD_SmallFalse_BigTrue[udg_JD_Integers[3]] == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_SKF3_Func001Func001Func001Func004Func001003 takes nothing returns nothing
    call KillDestructable(GetEnumDestructable())
endfunction

function Trig_SKF3_Func001Func001Func001Func004C takes nothing returns boolean
    if ( not ( udg_JD_TreesDestroy[udg_JD_Integers[3]] == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_SKF3_Func001Func001Func001C takes nothing returns boolean
    if ( not ( udg_JD_ReachedDistance[udg_JD_Integers[3]] < udg_JD_Distances[udg_JD_Integers[3]] ) ) then
        return false
    endif
    return true
endfunction

function Trig_SKF3_Func001Func001C takes nothing returns boolean
    if ( not ( IsUnitInGroup(udg_JD_Unit[udg_JD_Integers[3]], udg_JD_Group) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_SKF3_Actions takes nothing returns nothing
    set udg_JD_Integers[3]=1
    loop
        exitwhen udg_JD_Integers[3] > udg_JD_Integers[2]
        if ( Trig_SKF3_Func001Func001C() ) then
            if ( Trig_SKF3_Func001Func001Func001C() ) then
                set udg_JD_TempPoint[1]=GetUnitLoc(udg_JD_Unit[udg_JD_Integers[3]])
                set udg_JD_TempPoint[2]=PolarProjectionBJ(udg_JD_TempPoint[1], udg_JD_SpeedUnits[udg_JD_Integers[3]], udg_JD_Angle[udg_JD_Integers[3]])
                if ( Trig_SKF3_Func001Func001Func001Func004C() ) then
                    call EnumDestructablesInCircleBJ(150.00, udg_JD_TempPoint[2], function Trig_SKF3_Func001Func001Func001Func004Func001003)
                else
                endif
                call SetUnitPositionLoc(udg_JD_Unit[udg_JD_Integers[3]], udg_JD_TempPoint[2])
                set udg_JD_ReachedDistance[udg_JD_Integers[3]]=( udg_JD_ReachedDistance[udg_JD_Integers[3]] + udg_JD_SpeedUnits[udg_JD_Integers[3]] )
                set udg_JD_RealTimer[udg_JD_Integers[3]]=( udg_JD_RealTimer[udg_JD_Integers[3]] + ( 180.00 / ( udg_JD_Distances[udg_JD_Integers[3]] / udg_JD_SpeedUnits[udg_JD_Integers[3]] ) ) )
                set udg_JD_JumpHigh[udg_JD_Integers[3]]=( SinBJ(udg_JD_RealTimer[udg_JD_Integers[3]]) * udg_JD_HighSettings[udg_JD_Integers[3]] )
                call SetUnitFlyHeightBJ(udg_JD_Unit[udg_JD_Integers[3]], udg_JD_JumpHigh[udg_JD_Integers[3]], 1000000000.00)
                call RemoveLocation(udg_JD_TempPoint[1])
                call RemoveLocation(udg_JD_TempPoint[2])
            else
                if ( Trig_SKF3_Func001Func001Func001Func001C() ) then
                    if ( Trig_SKF3_Func001Func001Func001Func001Func014C() ) then
                        set udg_JD_BouncesCur[udg_JD_Integers[3]]=( udg_JD_BouncesCur[udg_JD_Integers[3]] + 1 )
                        set udg_JD_RealTimer[udg_JD_Integers[3]]=0.00
                        set udg_JD_ReachedDistance[udg_JD_Integers[3]]=0.00
                        set udg_JD_TempPoint[1]=GetUnitLoc(udg_JD_Unit[udg_JD_Integers[3]])
                        call AddSpecialEffectLocBJ(udg_JD_TempPoint[1], "Abilities\\Spells\\Other\\Volcano\\VolcanoMissile.mdl")
                        call DestroyEffectBJ(GetLastCreatedEffectBJ())
                        set udg_JD_TempGroup=GetUnitsInRangeOfLocMatching(150.00, udg_JD_TempPoint[1], Condition(function Trig_SKF3_Func001Func001Func001Func001Func014Func007002003))
                        call ForGroupBJ(udg_JD_TempGroup, function Trig_SKF3_Func001Func001Func001Func001Func014Func008A)
                        call DestroyGroup(udg_JD_TempGroup)
                        set udg_JD_IntegerAVar=1
                        loop
                            exitwhen udg_JD_IntegerAVar > udg_SF_NumberOfSmallMissiles
                            set udg_JD_TempPoint[2]=PolarProjectionBJ(udg_JD_TempPoint[1], udg_SF_RangeOfSmallMissiles, ( ( 360.00 / I2R(udg_SF_NumberOfSmallMissiles) ) * I2R(udg_JD_IntegerAVar) ))
                            call CreateNUnitsAtLoc(1, 'n00I', GetOwningPlayer(udg_JD_Unit[udg_JD_Integers[3]]), udg_JD_TempPoint[1], bj_UNIT_FACING)
                            call SetUnitScalePercent(GetLastCreatedUnit(), 85.00, 85.00, 85.00)
                            call AddSpecialEffectTargetUnitBJ("chest", GetLastCreatedUnit(), "Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl")
                            set udg_JDA_JumpHigh_Distance=0.45
                            set udg_JDA_DestroyTrees_Dash=udg_SF_DestroyTrees
                            set udg_JDA_TargetPoint=udg_JD_TempPoint[2]
                            set udg_JDA_Unit=GetLastCreatedUnit()
                            set udg_JDA_Speed=4.00
                            set udg_JDA_SmallFalse_BigTrue=false
                            call ConditionalTriggerExecute(gg_trg_skf)
                            call RemoveLocation(udg_JD_TempPoint[2])
                            set udg_JD_IntegerAVar=udg_JD_IntegerAVar + 1
                        endloop
                        call RemoveLocation(udg_JD_TempPoint[1])
                    else
                        call GroupRemoveUnitSimple(udg_JD_Unit[udg_JD_Integers[3]], udg_JD_Group)
                        set udg_JD_TempPoint[1]=GetUnitLoc(udg_JD_Unit[udg_JD_Integers[3]])
                        call AddSpecialEffectLocBJ(udg_JD_TempPoint[1], "Abilities\\Spells\\Other\\Volcano\\VolcanoMissile.mdl")
                        call DestroyEffectBJ(GetLastCreatedEffectBJ())
                        set udg_JD_TempGroup=GetUnitsInRangeOfLocMatching(150.00, udg_JD_TempPoint[1], Condition(function Trig_SKF3_Func001Func001Func001Func001Func014Func017002003))
                        call ForGroupBJ(udg_JD_TempGroup, function Trig_SKF3_Func001Func001Func001Func001Func014Func018A)
                        call DestroyGroup(udg_JD_TempGroup)
                        set udg_JD_IntegerAVar=1
                        loop
                            exitwhen udg_JD_IntegerAVar > udg_SF_NumberOfSmallMissiles
                            set udg_JD_TempPoint[2]=PolarProjectionBJ(udg_JD_TempPoint[1], udg_SF_RangeOfSmallMissiles, ( ( 360.00 / I2R(udg_SF_NumberOfSmallMissiles) ) * I2R(udg_JD_IntegerAVar) ))
                            call CreateNUnitsAtLoc(1, 'n00I', GetOwningPlayer(udg_JD_Unit[udg_JD_Integers[3]]), udg_JD_TempPoint[1], bj_UNIT_FACING)
                            call SetUnitScalePercent(GetLastCreatedUnit(), 85.00, 85.00, 85.00)
                            call AddSpecialEffectTargetUnitBJ("chest", GetLastCreatedUnit(), "Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl")
                            set udg_JDA_JumpHigh_Distance=0.45
                            set udg_JDA_DestroyTrees_Dash=udg_SF_DestroyTrees
                            set udg_JDA_TargetPoint=udg_JD_TempPoint[2]
                            set udg_JDA_Unit=GetLastCreatedUnit()
                            set udg_JDA_Speed=4.00
                            set udg_JDA_SmallFalse_BigTrue=false
                            call ConditionalTriggerExecute(gg_trg_skf)
                            call RemoveLocation(udg_JD_TempPoint[2])
                            set udg_JD_IntegerAVar=udg_JD_IntegerAVar + 1
                        endloop
                        call RemoveLocation(udg_JD_TempPoint[1])
                        call KillUnit(udg_JD_Unit[udg_JD_Integers[3]])
                        set udg_JD_RealTimer[udg_JD_Integers[3]]=0.00
                        set udg_JD_Integers[1]=( udg_JD_Integers[1] - 1 )
                        if ( Trig_SKF3_Func001Func001Func001Func001Func014Func025C() ) then
                            set udg_JD_Integers[2]=0
                            call DisableTrigger(GetTriggeringTrigger())
                        else
                        endif
                    endif
                else
                    call GroupRemoveUnitSimple(udg_JD_Unit[udg_JD_Integers[3]], udg_JD_Group)
                    set udg_JD_TempPoint[1]=GetUnitLoc(udg_JD_Unit[udg_JD_Integers[3]])
                    call AddSpecialEffectLocBJ(udg_JD_TempPoint[1], "Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl")
                    call DestroyEffectBJ(GetLastCreatedEffectBJ())
                    set udg_JD_TempGroup=GetUnitsInRangeOfLocMatching(75.00, udg_JD_TempPoint[1], Condition(function Trig_SKF3_Func001Func001Func001Func001Func005002003))
                    call ForGroupBJ(udg_JD_TempGroup, function Trig_SKF3_Func001Func001Func001Func001Func006A)
                    call DestroyGroup(udg_JD_TempGroup)
                    call RemoveLocation(udg_JD_TempPoint[1])
                    call KillUnit(udg_JD_Unit[udg_JD_Integers[3]])
                    set udg_JD_RealTimer[udg_JD_Integers[3]]=0.00
                    set udg_JD_Integers[1]=( udg_JD_Integers[1] - 1 )
                    if ( Trig_SKF3_Func001Func001Func001Func001Func012C() ) then
                        set udg_JD_Integers[2]=0
                        call DisableTrigger(GetTriggeringTrigger())
                    else
                    endif
                endif
            endif
        else
        endif
        set udg_JD_Integers[3]=udg_JD_Integers[3] + 1
    endloop
endfunction

//===========================================================================
function InitTrig_SKF3 takes nothing returns nothing
    set gg_trg_SKF3=CreateTrigger()
    call DisableTrigger(gg_trg_SKF3)
    call TriggerRegisterTimerEventPeriodic(gg_trg_SKF3, 0.02)
    call TriggerAddAction(gg_trg_SKF3, function Trig_SKF3_Actions)
endfunction

//===========================================================================
// Trigger: Initialize
//===========================================================================
function Trig_Initialize_Actions takes nothing returns nothing
    set udg_Skill_FeralImpact='A00Q'
    set udg_Skill_Bonebreaker='A00R'
    set udg_Skill_BattleFury='A00S'
    set udg_Skill_BattleFurrySpeed='A00T'
    set udg_Skill_Tornado='AOww'
    set udg_g=- 10000.00
    set udg_FI_DefaultHeight=750.00
    set udg_FI_EffectA="Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl"
    set udg_FI_EffectB="Abilities\\Spells\\Human\\Feedback\\SpellBreakerAttack.mdl"
    set udg_FI_Sound="units\\orc\\hellscream\\GromYesAttack2.wav"
    set udg_BF_DefautInterval=3
endfunction

//===========================================================================
function InitTrig_Initialize takes nothing returns nothing
    set gg_trg_Initialize=CreateTrigger()
    call TriggerAddAction(gg_trg_Initialize, function Trig_Initialize_Actions)
endfunction

//===========================================================================
// Trigger: Shake Camera
//===========================================================================
function Trig_Shake_Camera_Func002Func001A takes nothing returns nothing
    call CameraClearNoiseForPlayer(GetEnumPlayer())
endfunction

function Trig_Shake_Camera_Func002Func003A takes nothing returns nothing
    call CameraSetEQNoiseForPlayer(GetEnumPlayer(), udg_Shake)
endfunction

function Trig_Shake_Camera_Func002C takes nothing returns boolean
    if ( not ( udg_Shake > 0.00 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Shake_Camera_Actions takes nothing returns nothing
    set udg_Shake=( udg_Shake - 5.00 )
    if ( Trig_Shake_Camera_Func002C() ) then
        call ForForce(GetPlayersAll(), function Trig_Shake_Camera_Func002Func003A)
    else
        call ForForce(GetPlayersAll(), function Trig_Shake_Camera_Func002Func001A)
    endif
endfunction

//===========================================================================
function InitTrig_Shake_Camera takes nothing returns nothing
    set gg_trg_Shake_Camera=CreateTrigger()
    call DisableTrigger(gg_trg_Shake_Camera)
    call TriggerRegisterTimerEventPeriodic(gg_trg_Shake_Camera, 0.10)
    call TriggerAddAction(gg_trg_Shake_Camera, function Trig_Shake_Camera_Actions)
endfunction

//===========================================================================
// Trigger: Knockback Index
//===========================================================================
function Trig_Knockback_Index_Actions takes nothing returns nothing
    set udg_KB_Max=( udg_KB_Max + 1 )
    set udg_kb=udg_KB_Max
endfunction

//===========================================================================
function InitTrig_Knockback_Index takes nothing returns nothing
    set gg_trg_Knockback_Index=CreateTrigger()
    call TriggerAddAction(gg_trg_Knockback_Index, function Trig_Knockback_Index_Actions)
endfunction

//===========================================================================
// Trigger: Knockback Move
//===========================================================================
function Trig_Knockback_Move_Func002Func003Func001C takes nothing returns boolean
    if ( ( IsTerrainPathableBJ(udg_point2, PATHING_TYPE_WALKABILITY) == true ) ) then
        return true
    endif
    if ( ( udg_KB_Dist[udg_kb] >= udg_KB_MaxDist[udg_kb] ) ) then
        return true
    endif
    return false
endfunction

function Trig_Knockback_Move_Func002Func003Func002C takes nothing returns boolean
    if ( not ( udg_KB_Max == 1 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Knockback_Move_Func002Func003C takes nothing returns boolean
    if ( not Trig_Knockback_Move_Func002Func003Func001C() ) then
        return false
    endif
    return true
endfunction

function Trig_Knockback_Move_Actions takes nothing returns nothing
    set udg_kb=1
    loop
        exitwhen udg_kb > udg_KB_Max
        set udg_point=GetUnitLoc(udg_KB_Unit[udg_kb])
        set udg_point2=PolarProjectionBJ(udg_point, udg_KB_Speed[udg_kb], udg_KB_Angle[udg_kb])
        if ( Trig_Knockback_Move_Func002Func003C() ) then
            if ( Trig_Knockback_Move_Func002Func003Func002C() ) then
                call DisableTrigger(GetTriggeringTrigger())
            else
                set udg_KB_Angle[udg_kb]=udg_KB_Angle[udg_KB_Max]
                set udg_KB_Dist[udg_kb]=udg_KB_Dist[udg_KB_Max]
                set udg_KB_MaxDist[udg_kb]=udg_KB_MaxDist[udg_KB_Max]
                set udg_KB_Speed[udg_kb]=udg_KB_Speed[udg_KB_Max]
                set udg_KB_Unit[udg_kb]=udg_KB_Unit[udg_KB_Max]
                set udg_kb=( udg_kb - 1 )
            endif
            set udg_KB_Max=( udg_KB_Max - 1 )
        else
            call SetUnitPositionLoc(udg_KB_Unit[udg_kb], udg_point2)
            call AddSpecialEffectLocBJ(udg_point2, "Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl")
            call DestroyEffectBJ(GetLastCreatedEffectBJ())
            set udg_KB_Dist[udg_kb]=( udg_KB_Dist[udg_kb] + udg_KB_Speed[udg_kb] )
        endif
        call RemoveLocation(udg_point)
        call RemoveLocation(udg_point2)
        set udg_kb=udg_kb + 1
    endloop
endfunction

//===========================================================================
function InitTrig_Knockback_Move takes nothing returns nothing
    set gg_trg_Knockback_Move=CreateTrigger()
    call DisableTrigger(gg_trg_Knockback_Move)
    call TriggerRegisterTimerEventPeriodic(gg_trg_Knockback_Move, 0.02)
    call TriggerAddAction(gg_trg_Knockback_Move, function Trig_Knockback_Move_Actions)
endfunction

//===========================================================================
// Trigger: Feral Impact Index
//===========================================================================
function Trig_Feral_Impact_Index_Actions takes nothing returns nothing
    set udg_FI_Max=( udg_FI_Max + 1 )
    set udg_fi=udg_FI_Max
endfunction

//===========================================================================
function InitTrig_Feral_Impact_Index takes nothing returns nothing
    set gg_trg_Feral_Impact_Index=CreateTrigger()
    call TriggerAddAction(gg_trg_Feral_Impact_Index, function Trig_Feral_Impact_Index_Actions)
endfunction

//===========================================================================
// Trigger: Feral Impact
//
// 
//     call DestroyEffect( AddSpecialEffectLoc( udg_FI_EffectA, Caster ) )
//     call DestroyEffect( AddSpecialEffectTarget( udg_FI_EffectB, udg_FI_Hero[i], "chest") )
//     call EnableTrigger( gg_trg_Feral_
//===========================================================================
function Trig_Feral_Impact_Conditions takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A00Q' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Feral_Impact_Func026C takes nothing returns boolean
    if ( not ( udg_FI_Sound != "" ) ) then
        return false
    endif
    return true
endfunction

function Trig_Feral_Impact_Actions takes nothing returns nothing
    call TriggerExecute(gg_trg_Feral_Impact_Index)
    set udg_point=GetUnitLoc(GetTriggerUnit())
    set udg_point2=GetSpellTargetLoc()
    set udg_tmpCasterZ=GetLocationZ(udg_point)
    set udg_tmpTargetZ=GetLocationZ(udg_point2)
    set udg_tmpDiffHeight=( udg_tmpTargetZ - udg_tmpCasterZ )
    set udg_tmpHeight=( RMaxBJ(0.00, udg_tmpDiffHeight) + udg_FI_DefaultHeight )
    set udg_tmpDistance=DistanceBetweenPoints(udg_point, udg_point2)
    set udg_FI_Hero[udg_fi]=GetTriggerUnit()
    set udg_FI_z[udg_fi]=udg_tmpCasterZ
    set udg_FI_Angle[udg_fi]=AngleBetweenPoints(udg_point, udg_point2)
    set udg_FI_Vz[udg_fi]=SquareRoot(( - 2.00 * ( udg_g * udg_tmpHeight ) ))
    set udg_FI_Height[udg_fi]=udg_tmpCasterZ
    set udg_tmpTime=( ( ( - 1.00 * udg_FI_Vz[udg_fi] ) / udg_g ) - ( SquareRoot(( ( - 2.00 * udg_g ) * ( udg_tmpHeight - udg_tmpDiffHeight ) )) / udg_g ) )
    set udg_FI_Vp[udg_fi]=( udg_tmpDistance / udg_tmpTime )
    set udg_FI_AnimSpeed[udg_fi]=( 0.50 / udg_tmpTime )
    call SetUnitTimeScalePercent(udg_FI_Hero[udg_fi], ( udg_FI_AnimSpeed[udg_fi] * 100.00 ))
    call SetUnitPathing(udg_FI_Hero[udg_fi], false)
    call UnitAddAbilityBJ('Arav', udg_FI_Hero[udg_fi])
    call UnitRemoveAbilityBJ('Arav', udg_FI_Hero[udg_fi])
    call SetUnitInvulnerable(udg_FI_Hero[udg_fi], true)
    call AddSpecialEffectLocBJ(udg_point, udg_FI_EffectA)
    call DestroyEffectBJ(GetLastCreatedEffectBJ())
    call AddSpecialEffectTargetUnitBJ("chest", udg_FI_Hero[udg_fi], udg_FI_EffectB)
    call DestroyEffectBJ(GetLastCreatedEffectBJ())
    if ( Trig_Feral_Impact_Func026C() ) then
        set udg_tmpSound=CreateSound(udg_FI_Sound, false, true, false, 12700, 12700, "")
        call PlaySoundOnUnitBJ(udg_tmpSound, 100, udg_FI_Hero[udg_fi])
        call KillSoundWhenDone(udg_tmpSound)
    else
    endif
    call EnableTrigger(gg_trg_Feral_Impact_Move)
    call RemoveLocation(udg_point)
    call RemoveLocation(udg_point2)
endfunction

//===========================================================================
function InitTrig_Feral_Impact takes nothing returns nothing
    set gg_trg_Feral_Impact=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Feral_Impact, EVENT_PLAYER_UNIT_SPELL_EFFECT)
    call TriggerAddCondition(gg_trg_Feral_Impact, Condition(function Trig_Feral_Impact_Conditions))
    call TriggerAddAction(gg_trg_Feral_Impact, function Trig_Feral_Impact_Actions)
endfunction

//===========================================================================
// Trigger: Feral Impact Move
//===========================================================================
function Trig_Feral_Impact_Move_Func001Func008Func018002003 takes nothing returns boolean
    return ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(udg_FI_Hero[udg_fi])) == true )
endfunction

function Trig_Feral_Impact_Move_Func001Func008Func020Func002C takes nothing returns boolean
    if ( not ( IsUnitType(GetEnumUnit(), UNIT_TYPE_STRUCTURE) == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Feral_Impact_Move_Func001Func008Func020A takes nothing returns nothing
    call UnitDamageTargetBJ(udg_FI_Hero[udg_fi], GetEnumUnit(), udg_real2, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_NORMAL)
    if ( Trig_Feral_Impact_Move_Func001Func008Func020Func002C() ) then
        call TriggerExecute(gg_trg_Knockback_Index)
        set udg_KB_Unit[udg_kb]=GetEnumUnit()
        set udg_point2=GetUnitLoc(udg_KB_Unit[udg_kb])
        set udg_KB_Angle[udg_kb]=AngleBetweenPoints(udg_point, udg_point2)
        set udg_KB_MaxDist[udg_kb]=300.00
        set udg_KB_Speed[udg_kb]=50.00
        set udg_KB_Dist[udg_kb]=0.00
        call EnableTrigger(gg_trg_Knockback_Move)
        call RemoveLocation(udg_point2)
    else
    endif
endfunction

function Trig_Feral_Impact_Move_Func001Func008Func021C takes nothing returns boolean
    if ( not ( udg_FI_Max == 1 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Feral_Impact_Move_Func001Func008C takes nothing returns boolean
    if ( not ( udg_real2 > 0.00 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Feral_Impact_Move_Actions takes nothing returns nothing
    set udg_fi=1
    loop
        exitwhen udg_fi > udg_FI_Max
        set udg_point=GetUnitLoc(udg_FI_Hero[udg_fi])
        set udg_point2=PolarProjectionBJ(udg_point, ( udg_FI_Vp[udg_fi] * 0.02 ), udg_FI_Angle[udg_fi])
        call SetUnitPositionLoc(udg_FI_Hero[udg_fi], udg_point2)
        set udg_real=GetLocationZ(udg_point2)
        set udg_FI_z[udg_fi]=( udg_FI_z[udg_fi] + ( udg_FI_Vz[udg_fi] * 0.02 ) )
        set udg_FI_Vz[udg_fi]=( udg_FI_Vz[udg_fi] + ( udg_g * 0.02 ) )
        set udg_real2=( udg_FI_z[udg_fi] - udg_real )
        if ( Trig_Feral_Impact_Move_Func001Func008C() ) then
            call SetUnitFlyHeightBJ(udg_FI_Hero[udg_fi], udg_real2, 0.00)
            call RemoveLocation(udg_point2)
        else
            call SetUnitFlyHeightBJ(udg_FI_Hero[udg_fi], 0.00, 0.00)
            call SetUnitPathing(udg_FI_Hero[udg_fi], true)
            call SetUnitTimeScalePercent(udg_FI_Hero[udg_fi], 100.00)
            call AddSpecialEffectLocBJ(udg_point2, "Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
            set udg_FI_AnimSpeed[udg_fi]=1.00
            call SetUnitInvulnerable(udg_FI_Hero[udg_fi], false)
            set udg_Shake=60.00
            call EnableTrigger(gg_trg_Shake_Camera)
            // Damage and Knockback
            set udg_FI_FallHeight=( ( RMaxBJ(udg_FI_Height[udg_fi], udg_real) + udg_FI_DefaultHeight ) - udg_real )
            set udg_real=( ( I2R(GetUnitAbilityLevelSwapped('A00Q', udg_FI_Hero[udg_fi])) * 75.00 ) + 225.00 )
            set udg_real2=( ( ( I2R(GetUnitAbilityLevelSwapped('A00Q', udg_FI_Hero[udg_fi])) * 50.00 ) + 50.00 ) * ( udg_FI_FallHeight / udg_FI_DefaultHeight ) )
            call CreateTextTagUnitBJ(( I2S(R2I(( udg_FI_FallHeight / ( udg_FI_DefaultHeight / 100.00 ) ))) + "%!" ), udg_FI_Hero[udg_fi], 0, 13.00, 100, 0.00, 0.00, 0)
            call SetTextTagVelocityBJ(GetLastCreatedTextTag(), 64, 90)
            call SetTextTagPermanentBJ(GetLastCreatedTextTag(), false)
            call SetTextTagLifespanBJ(GetLastCreatedTextTag(), 1.50)
            call SetTextTagFadepointBJ(GetLastCreatedTextTag(), 1.00)
            set udg_group=GetUnitsInRangeOfLocMatching(udg_real, udg_point2, Condition(function Trig_Feral_Impact_Move_Func001Func008Func018002003))
            call RemoveLocation(udg_point2)
            call ForGroupBJ(udg_group, function Trig_Feral_Impact_Move_Func001Func008Func020A)
            if ( Trig_Feral_Impact_Move_Func001Func008Func021C() ) then
                call DisableTrigger(GetTriggeringTrigger())
            else
                set udg_FI_Angle[udg_fi]=udg_FI_Angle[udg_FI_Max]
                set udg_FI_AnimSpeed[udg_fi]=udg_FI_AnimSpeed[udg_FI_Max]
                set udg_FI_Height[udg_fi]=udg_FI_Height[udg_FI_Max]
                set udg_FI_Hero[udg_fi]=udg_FI_Hero[udg_FI_Max]
                set udg_FI_Vp[udg_fi]=udg_FI_Vp[udg_FI_Max]
                set udg_FI_Vz[udg_fi]=udg_FI_Vz[udg_FI_Max]
                set udg_FI_z[udg_fi]=udg_FI_z[udg_FI_Max]
                set udg_fi=( udg_fi - 1 )
            endif
            set udg_FI_Max=( udg_FI_Max - 1 )
            call DestroyGroup(udg_group)
        endif
        call RemoveLocation(udg_point)
        set udg_fi=udg_fi + 1
    endloop
endfunction

//===========================================================================
function InitTrig_Feral_Impact_Move takes nothing returns nothing
    set gg_trg_Feral_Impact_Move=CreateTrigger()
    call DisableTrigger(gg_trg_Feral_Impact_Move)
    call TriggerRegisterTimerEventPeriodic(gg_trg_Feral_Impact_Move, 0.02)
    call TriggerAddAction(gg_trg_Feral_Impact_Move, function Trig_Feral_Impact_Move_Actions)
endfunction

//===========================================================================
// Trigger: Bonebreaker
//===========================================================================
function Trig_Bonebreaker_Conditions takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A00R' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Bonebreaker_Actions takes nothing returns nothing
    call TriggerExecute(gg_trg_Knockback_Index)
    set udg_KB_Unit[udg_kb]=GetSpellTargetUnit()
    set udg_point=GetUnitLoc(GetTriggerUnit())
    set udg_point2=GetUnitLoc(udg_KB_Unit[udg_kb])
    call AddSpecialEffectLocBJ(udg_point2, "Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl")
    call DestroyEffectBJ(GetLastCreatedEffectBJ())
    set udg_KB_Angle[udg_kb]=AngleBetweenPoints(udg_point, udg_point2)
    set udg_KB_MaxDist[udg_kb]=600.00
    set udg_KB_Speed[udg_kb]=55.00
    set udg_KB_Dist[udg_kb]=0.00
    call EnableTrigger(gg_trg_Knockback_Move)
    call RemoveLocation(udg_point)
    call RemoveLocation(udg_point2)
endfunction

//===========================================================================
function InitTrig_Bonebreaker takes nothing returns nothing
    set gg_trg_Bonebreaker=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Bonebreaker, EVENT_PLAYER_UNIT_SPELL_EFFECT)
    call TriggerAddCondition(gg_trg_Bonebreaker, Condition(function Trig_Bonebreaker_Conditions))
    call TriggerAddAction(gg_trg_Bonebreaker, function Trig_Bonebreaker_Actions)
endfunction

//===========================================================================
// Trigger: Battle Fury Index
//===========================================================================
function Trig_Battle_Fury_Index_Actions takes nothing returns nothing
    set udg_BF_Max=( udg_BF_Max + 1 )
    set udg_bf=udg_BF_Max
endfunction

//===========================================================================
function InitTrig_Battle_Fury_Index takes nothing returns nothing
    set gg_trg_Battle_Fury_Index=CreateTrigger()
    call TriggerAddAction(gg_trg_Battle_Fury_Index, function Trig_Battle_Fury_Index_Actions)
endfunction

//===========================================================================
// Trigger: Battle Fury
//===========================================================================
function Trig_Battle_Fury_Conditions takes nothing returns boolean
    if ( not ( GetUnitAbilityLevelSwapped('A00S', GetTriggerUnit()) > 0 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Battle_Fury_Func001C takes nothing returns boolean
    if ( not ( GetUnitAbilityLevelSwapped('A00T', GetTriggerUnit()) == 0 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Battle_Fury_Actions takes nothing returns nothing
    if ( Trig_Battle_Fury_Func001C() ) then
        call TriggerExecute(gg_trg_Battle_Fury_Index)
        set udg_BF_Hero[udg_bf]=GetTriggerUnit()
        call AddSpecialEffectTargetUnitBJ("hand left", udg_BF_Hero[udg_bf], "Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl")
        set udg_BF_SpecEffect1[udg_bf]=GetLastCreatedEffectBJ()
        set udg_BF_Time[udg_bf]=udg_BF_DefautInterval
        call UnitAddAbilityBJ('A00T', udg_BF_Hero[udg_bf])
        call SetUnitAbilityLevelSwapped('A00S', udg_BF_Hero[udg_bf], ( ( GetUnitAbilityLevelSwapped('A00S', udg_BF_Hero[udg_bf]) * 3 ) + 2 ))
        call EnableTrigger(gg_trg_Battle_Fury_Downgrade)
    else
        call SetUnitAbilityLevelSwapped('A00T', GetTriggerUnit(), ( ( GetUnitAbilityLevelSwapped('A00S', GetTriggerUnit()) * 3 ) + 2 ))
    endif
endfunction

//===========================================================================
function InitTrig_Battle_Fury takes nothing returns nothing
    set gg_trg_Battle_Fury=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Battle_Fury, EVENT_PLAYER_UNIT_SPELL_EFFECT)
    call TriggerAddCondition(gg_trg_Battle_Fury, Condition(function Trig_Battle_Fury_Conditions))
    call TriggerAddAction(gg_trg_Battle_Fury, function Trig_Battle_Fury_Actions)
endfunction

//===========================================================================
// Trigger: Battle Fury Downgrade
//===========================================================================
function Trig_Battle_Fury_Downgrade_Func001Func002Func002C takes nothing returns boolean
    if ( not ( udg_integer == 1 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Battle_Fury_Downgrade_Func001Func002C takes nothing returns boolean
    if ( not ( udg_BF_Time[udg_bf] == 0 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Battle_Fury_Downgrade_Actions takes nothing returns nothing
    set udg_bf=1
    loop
        exitwhen udg_bf > udg_BF_Max
        set udg_BF_Time[udg_bf]=( udg_BF_Time[udg_bf] - 1 )
        if ( Trig_Battle_Fury_Downgrade_Func001Func002C() ) then
            set udg_integer=GetUnitAbilityLevelSwapped('A00T', udg_BF_Hero[udg_bf])
            if ( Trig_Battle_Fury_Downgrade_Func001Func002Func002C() ) then
                call UnitRemoveAbilityBJ('A00T', udg_BF_Hero[udg_bf])
                call DestroyEffectBJ(udg_BF_SpecEffect1[udg_bf])
                set udg_BF_Hero[udg_bf]=udg_BF_Hero[udg_BF_Max]
                set udg_BF_SpecEffect1[udg_bf]=udg_BF_SpecEffect1[udg_BF_Max]
                set udg_BF_SpecEffect2[udg_bf]=udg_BF_SpecEffect2[udg_BF_Max]
                set udg_BF_Time[udg_bf]=udg_BF_Time[udg_BF_Max]
                set udg_BF_Max=( udg_BF_Max - 1 )
                set udg_bf=( udg_bf - 1 )
            else
                call SetUnitAbilityLevelSwapped('A00T', udg_BF_Hero[udg_bf], ( udg_integer - 1 ))
                set udg_BF_Time[udg_bf]=udg_BF_DefautInterval
            endif
        else
        endif
        set udg_bf=udg_bf + 1
    endloop
endfunction

//===========================================================================
function InitTrig_Battle_Fury_Downgrade takes nothing returns nothing
    set gg_trg_Battle_Fury_Downgrade=CreateTrigger()
    call DisableTrigger(gg_trg_Battle_Fury_Downgrade)
    call TriggerRegisterTimerEventPeriodic(gg_trg_Battle_Fury_Downgrade, 1.00)
    call TriggerAddAction(gg_trg_Battle_Fury_Downgrade, function Trig_Battle_Fury_Downgrade_Actions)
endfunction

//===========================================================================
// Trigger: Tornado
//===========================================================================
function Trig_Tornado_Conditions takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'AOww' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Tornado_Actions takes nothing returns nothing
    // Here, I'm merging the index finding with the cast trigger
    // It's simple enough to do so
    set udg_TO_Max=( udg_TO_Max + 1 )
    set udg_TO_Hero[udg_TO_Max]=GetTriggerUnit()
    // lZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZl
    // CUSTOMIZE: update following line to the duration of the skill
    set udg_TO_Duration[udg_TO_Max]=7.00
    // lZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZl
    call EnableTrigger(gg_trg_Tornado_Damage)
endfunction

//===========================================================================
function InitTrig_Tornado takes nothing returns nothing
    set gg_trg_Tornado=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Tornado, EVENT_PLAYER_UNIT_SPELL_EFFECT)
    call TriggerAddCondition(gg_trg_Tornado, Condition(function Trig_Tornado_Conditions))
    call TriggerAddAction(gg_trg_Tornado, function Trig_Tornado_Actions)
endfunction

//===========================================================================
// Trigger: Tornado Damage
//===========================================================================
function Trig_Tornado_Damage_Func001Func001Func001C takes nothing returns boolean
    if ( not ( udg_TO_Max == 1 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Tornado_Damage_Func001Func001Func005002003001 takes nothing returns boolean
    return ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(udg_TO_Hero[udg_to])) == true )
endfunction

function Trig_Tornado_Damage_Func001Func001Func005002003002 takes nothing returns boolean
    return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Tornado_Damage_Func001Func001Func005002003 takes nothing returns boolean
    return GetBooleanAnd(Trig_Tornado_Damage_Func001Func001Func005002003001(), Trig_Tornado_Damage_Func001Func001Func005002003002())
endfunction

function Trig_Tornado_Damage_Func001Func001Func006Func005C takes nothing returns boolean
    if ( not ( IsUnitType(GetEnumUnit(), UNIT_TYPE_STRUCTURE) == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Tornado_Damage_Func001Func001Func006A takes nothing returns nothing
    // lZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZl
    // #2 CUSTOMIZE: change here to set damage
    call UnitDamageTargetBJ(udg_TO_Hero[udg_to], GetEnumUnit(), 90.00, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_NORMAL)
    // lZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZl
    if ( Trig_Tornado_Damage_Func001Func001Func006Func005C() ) then
        call TriggerExecute(gg_trg_Knockback_Index)
        set udg_KB_Unit[udg_kb]=GetEnumUnit()
        set udg_point2=GetUnitLoc(udg_KB_Unit[udg_kb])
        set udg_KB_Angle[udg_kb]=AngleBetweenPoints(udg_point, udg_point2)
        // lZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZl
        // #3 CUSTOMIZE: change here to set knockback range/speed
        set udg_KB_MaxDist[udg_kb]=200.00
        set udg_KB_Speed[udg_kb]=50.00
        // lZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZl
        set udg_KB_Dist[udg_kb]=0.00
        call EnableTrigger(gg_trg_Knockback_Move)
        call RemoveLocation(udg_point2)
    else
    endif
endfunction

function Trig_Tornado_Damage_Func001Func001C takes nothing returns boolean
    if ( not ( udg_TO_Duration[udg_to] > 0.00 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Tornado_Damage_Actions takes nothing returns nothing
    set udg_to=1
    loop
        exitwhen udg_to > udg_TO_Max
        if ( Trig_Tornado_Damage_Func001Func001C() ) then
            set udg_TO_Duration[udg_to]=( udg_TO_Duration[udg_to] - 0.10 )
            set udg_point=GetUnitLoc(udg_TO_Hero[udg_to])
            set udg_group=GetUnitsInRangeOfLocMatching(220.00, udg_point, Condition(function Trig_Tornado_Damage_Func001Func001Func005002003))
            call ForGroupBJ(udg_group, function Trig_Tornado_Damage_Func001Func001Func006A)
            call DestroyGroup(udg_group)
            call RemoveLocation(udg_point)
        else
            if ( Trig_Tornado_Damage_Func001Func001Func001C() ) then
                call DisableTrigger(GetTriggeringTrigger())
            else
                // Recycle Index
                set udg_TO_Duration[udg_to]=udg_TO_Duration[udg_TO_Max]
                set udg_TO_Hero[udg_to]=udg_TO_Hero[udg_TO_Max]
                set udg_to=( udg_to - 1 )
            endif
            set udg_TO_Max=( udg_TO_Max - 1 )
        endif
        set udg_to=udg_to + 1
    endloop
endfunction

//===========================================================================
function InitTrig_Tornado_Damage takes nothing returns nothing
    set gg_trg_Tornado_Damage=CreateTrigger()
    call DisableTrigger(gg_trg_Tornado_Damage)
    call TriggerRegisterTimerEventPeriodic(gg_trg_Tornado_Damage, 0.10)
    call TriggerAddAction(gg_trg_Tornado_Damage, function Trig_Tornado_Damage_Actions)
endfunction

//===========================================================================
// Trigger: Maelstrom Config
//===========================================================================
function Trig_Maelstrom_Config_Actions takes nothing returns nothing
    set udg_M_Hash=InitHashtable()
    set udg_M_Radius=500.00
    set udg_M_Damage[1]=50.00
    set udg_M_Damage[2]=100.00
    set udg_M_Damage[3]=150.00
    set udg_M_Denominator=0.01
    set udg_M_Numerator=1.00
    set udg_M_Loops=0.04
    set udg_M_SpeedBase=400.00
    set udg_M_Speed=( udg_M_SpeedBase * udg_M_Loops )
    set udg_M_AnglePlus=67.50
    set udg_M_SuckSFX="Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl"
    set udg_M_Duration[1]=5.00
    set udg_M_Duration[2]=6.00
    set udg_M_Duration[3]=7.00
    set udg_M_TornadoSFX="Abilities\\Spells\\Other\\Tornado\\TornadoElemental"
endfunction

//===========================================================================
function InitTrig_Maelstrom_Config takes nothing returns nothing
    set gg_trg_Maelstrom_Config=CreateTrigger()
    call TriggerAddAction(gg_trg_Maelstrom_Config, function Trig_Maelstrom_Config_Actions)
endfunction

//===========================================================================
// Trigger: Maelstrom Cast
//===========================================================================
function Trig_Maelstrom_Cast_Conditions takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A00Y' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Maelstrom_Cast_Actions takes nothing returns nothing
    // Variables
    set udg_M_Caster=GetTriggerUnit()
    set udg_M_TargetLoc=GetSpellTargetLoc()
    set udg_M_Levels=GetUnitAbilityLevelSwapped('A00Y', udg_M_Caster)
    // Creates Tornado
    call CreateNUnitsAtLoc(1, 'h001', GetOwningPlayer(udg_M_Caster), udg_M_TargetLoc, bj_UNIT_FACING)
    set udg_M_Tornado=GetLastCreatedUnit()
    set udg_M_THandle=GetHandleId(udg_M_Tornado)
    // Adding Duration
    call UnitApplyTimedLifeBJ(udg_M_Duration[udg_M_Levels], 'BTLF', udg_M_Tornado)
    // Creating SFX
    set bj_forLoopAIndex=1
    set bj_forLoopAIndexEnd=8
    loop
        exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
        set udg_M_SFXOffset=PolarProjectionBJ(udg_M_TargetLoc, 250.00, ( I2R(GetForLoopIndexA()) * 45.00 ))
        call AddSpecialEffectLocBJ(udg_M_SFXOffset, udg_M_TornadoSFX)
        // Saving SFX
        call SaveEffectHandleBJ(GetLastCreatedEffectBJ(), GetForLoopIndexA(), udg_M_THandle, udg_M_Hash)
        // Cleaning Leak
        call RemoveLocation(udg_M_SFXOffset)
        set bj_forLoopAIndex=bj_forLoopAIndex + 1
    endloop
    // Saving Variable
    call SaveIntegerBJ(udg_M_Levels, 0, udg_M_THandle, udg_M_Hash)
    // Adding Tornado to TornadoGroup
    call GroupAddUnitSimple(udg_M_Tornado, udg_M_TornadoGroup)
    // Cleaning Leak
    call RemoveLocation(udg_M_TargetLoc)
    // Turning ON
    call EnableTrigger(gg_trg_Maelstrom_Loop)
endfunction

//===========================================================================
function InitTrig_Maelstrom_Cast takes nothing returns nothing
    set gg_trg_Maelstrom_Cast=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Maelstrom_Cast, EVENT_PLAYER_UNIT_SPELL_EFFECT)
    call TriggerAddCondition(gg_trg_Maelstrom_Cast, Condition(function Trig_Maelstrom_Cast_Conditions))
    call TriggerAddAction(gg_trg_Maelstrom_Cast, function Trig_Maelstrom_Cast_Actions)
endfunction

//===========================================================================
// Trigger: Maelstrom Loop
//===========================================================================
function Trig_Maelstrom_Loop_Func001Func006Func007002003001 takes nothing returns boolean
    return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Maelstrom_Loop_Func001Func006Func007002003002 takes nothing returns boolean
    return ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(udg_M_Picked)) == true )
endfunction

function Trig_Maelstrom_Loop_Func001Func006Func007002003 takes nothing returns boolean
    return GetBooleanAnd(Trig_Maelstrom_Loop_Func001Func006Func007002003001(), Trig_Maelstrom_Loop_Func001Func006Func007002003002())
endfunction

function Trig_Maelstrom_Loop_Func001Func006Func008Func007Func003C takes nothing returns boolean
    if ( not ( IsUnitType(GetEnumUnit(), UNIT_TYPE_MAGIC_IMMUNE) != true ) ) then
        return false
    endif
    if ( not ( IsUnitType(GetEnumUnit(), UNIT_TYPE_STRUCTURE) != true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Maelstrom_Loop_Func001Func006Func008Func007C takes nothing returns boolean
    if ( not Trig_Maelstrom_Loop_Func001Func006Func008Func007Func003C() ) then
        return false
    endif
    return true
endfunction

function Trig_Maelstrom_Loop_Func001Func006Func008A takes nothing returns nothing
    // Variables
    set udg_M_PickedV=GetEnumUnit()
    set udg_M_PickedVLoc=GetUnitLoc(udg_M_PickedV)
    // Determines the Damage
    set udg_M_DistanceBase=DistanceBetweenPoints(udg_M_PickedLoc, udg_M_PickedVLoc)
    set udg_M_DamageLoop=( ( udg_M_Numerator / ( udg_M_DistanceBase * udg_M_Denominator ) ) * udg_M_Damage[udg_M_Levels] )
    if ( Trig_Maelstrom_Loop_Func001Func006Func008Func007C() ) then
        // Sets all Variables for the Suck
        set udg_M_Angle=( AngleBetweenPoints(udg_M_PickedVLoc, udg_M_PickedLoc) + udg_M_AnglePlus )
        set udg_M_SuckOffset=PolarProjectionBJ(udg_M_PickedVLoc, udg_M_Speed, udg_M_Angle)
        // Starts Sucking
        call AddSpecialEffectLocBJ(udg_M_PickedVLoc, udg_M_SuckSFX)
        call DestroyEffectBJ(GetLastCreatedEffectBJ())
        // Collision
        call SetUnitPathing(udg_M_PickedV, false)
        call SetUnitPositionLoc(udg_M_PickedV, udg_M_SuckOffset)
        // Damages unit
        call UnitDamageTargetBJ(udg_M_Picked, udg_M_PickedV, ( udg_M_DamageLoop * udg_M_Loops ), ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC)
        call SetUnitPathing(udg_M_PickedV, true)
        // Cleaning Leak
        call RemoveLocation(udg_M_PickedVLoc)
        call RemoveLocation(udg_M_SuckOffset)
    else
        // Damages Structures
        call UnitDamageTargetBJ(udg_M_Picked, udg_M_PickedV, ( udg_M_DamageLoop * udg_M_Loops ), ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC)
    endif
    call RemoveLocation(udg_M_PickedVLoc)
endfunction

function Trig_Maelstrom_Loop_Func001Func006C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(udg_M_Picked) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Maelstrom_Loop_Func001A takes nothing returns nothing
    set udg_M_Picked=GetEnumUnit()
    set udg_M_PickedHandle=GetHandleId(udg_M_Picked)
    // Loading Levels
    set udg_M_Levels=LoadIntegerBJ(0, udg_M_PickedHandle, udg_M_Hash)
    // Checking
    if ( Trig_Maelstrom_Loop_Func001Func006C() ) then
        set udg_M_PickedLoc=GetUnitLoc(udg_M_Picked)
        // Starts Sucking
        set udg_M_VictimGroup=GetUnitsInRangeOfLocMatching(udg_M_Radius, udg_M_PickedLoc, Condition(function Trig_Maelstrom_Loop_Func001Func006Func007002003))
        call ForGroupBJ(udg_M_VictimGroup, function Trig_Maelstrom_Loop_Func001Func006Func008A)
        // Cleaning Leaks
        call RemoveLocation(udg_M_PickedLoc)
        call DestroyGroup(udg_M_VictimGroup)
    else
        // Clean UP
        set bj_forLoopAIndex=1
        set bj_forLoopAIndexEnd=8
        loop
            exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
            call DestroyEffectBJ(LoadEffectHandleBJ(GetForLoopIndexA(), udg_M_PickedHandle, udg_M_Hash))
            set bj_forLoopAIndex=bj_forLoopAIndex + 1
        endloop
        call FlushChildHashtableBJ(udg_M_PickedHandle, udg_M_Hash)
        call GroupRemoveUnitSimple(udg_M_Picked, udg_M_TornadoGroup)
    endif
endfunction

function Trig_Maelstrom_Loop_Func002C takes nothing returns boolean
    if ( not ( IsUnitGroupEmptyBJ(udg_M_TornadoGroup) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Maelstrom_Loop_Actions takes nothing returns nothing
    call ForGroupBJ(udg_M_TornadoGroup, function Trig_Maelstrom_Loop_Func001A)
    if ( Trig_Maelstrom_Loop_Func002C() ) then
        call DisableTrigger(GetTriggeringTrigger())
    else
    endif
endfunction

//===========================================================================
function InitTrig_Maelstrom_Loop takes nothing returns nothing
    set gg_trg_Maelstrom_Loop=CreateTrigger()
    call DisableTrigger(gg_trg_Maelstrom_Loop)
    call TriggerRegisterTimerEventPeriodic(gg_trg_Maelstrom_Loop, 0.04)
    call TriggerAddAction(gg_trg_Maelstrom_Loop, function Trig_Maelstrom_Loop_Actions)
endfunction

//===========================================================================
// Trigger: Безымянный триггер 004
//===========================================================================
function Trig_____________________________________004_Actions takes nothing returns nothing
    call CreateTimerDialogBJ(udg_Timer, "TRIGSTR_039")
    set udg_TimeWindow=GetLastCreatedTimerDialogBJ()
endfunction

//===========================================================================
function InitTrig_____________________________________004 takes nothing returns nothing
    set gg_trg_____________________________________004=CreateTrigger()
    call TriggerRegisterTimerEventSingle(gg_trg_____________________________________004, 1.00)
    call TriggerAddAction(gg_trg_____________________________________004, function Trig_____________________________________004_Actions)
endfunction

//===========================================================================
// Trigger: Безымянный триггер 005
//===========================================================================
function Trig_____________________________________005_Actions takes nothing returns nothing
    set udg_Seconds=( udg_Seconds + 1 )
    call StartTimerBJ(udg_Timer, false, udg_Seconds)
    call PauseTimerBJ(true, udg_Timer)
endfunction

//===========================================================================
function InitTrig_____________________________________005 takes nothing returns nothing
    set gg_trg_____________________________________005=CreateTrigger()
    call TriggerRegisterTimerEventPeriodic(gg_trg_____________________________________005, 1.00)
    call TriggerAddAction(gg_trg_____________________________________005, function Trig_____________________________________005_Actions)
endfunction

//===========================================================================
function InitCustomTriggers takes nothing returns nothing
    call InitTrig_Settings()
    call InitTrig_Random_Weather()
    call InitTrig_____________________________________002_____________________u()
    call InitTrig_____________________________________002()
    call InitTrig_False_Promise_Config()
    call InitTrig_False_Promise_Cast()
    call InitTrig_False_Promise_Loop()
    call InitTrig_False_Promise_Damage()
    call InitTrig_RecruitGroup()
    call InitTrig_____________________________________001()
    call InitTrig_Ult2()
    call InitTrig_Elf_upgrade()
    call InitTrig_Ritual()
    call InitTrig_PierceIf()
    call InitTrig_PierceUp()
    call InitTrig_Pierce()
    call InitTrig_FEL_ORC()
    call InitTrig_VengeanceAura()
    call InitTrig_Tranquility_Arson()
    call InitTrig_Arson()
    call InitTrig_Warden()
    call InitTrig_Watchers()
    call InitTrig_Evasion_Aura()
    call InitTrig_Evasion_Aura_Level()
    call InitTrig_Infernal_Rain_on_the_map()
    call InitTrig_Infernal_Rain()
    call InitTrig_Yeger()
    call InitTrig_Yeger2()
    call InitTrig_Shaman()
    call InitTrig_Shaman_copy()
    call InitTrig_CCairne_copy()
    call InitTrig_Thrall_Copy()
    call InitTrig_BM_copy()
    call InitTrig_Kael_____________________u()
    call InitTrig_Cairne()
    call InitTrig_Thrall()
    call InitTrig_Grom()
    call InitTrig_Kael()
    call InitTrig_Muradin()
    call InitTrig_Muradin_____________________u()
    call InitTrig_Archmage()
    call InitTrig_Archmage_____________________u()
    call InitTrig_Paladin()
    call InitTrig_Paladin_____________________u()
    call InitTrig_Sylvanas_quote()
    call InitTrig_Muradin_quote()
    call InitTrig_Archmage_quote()
    call InitTrig_Paladin_quote()
    call InitTrig_Cairne_quote()
    call InitTrig_Thrall_quote()
    call InitTrig_Grom_quote()
    call InitTrig_Tyrande_quote()
    call InitTrig_Maeve_quote()
    call InitTrig_Maeve_quote_____________________u()
    call InitTrig_illidan()
    call InitTrig_illidan_____________________u()
    call InitTrig_Tyrande()
    call InitTrig_Tyrande_____________________u()
    call InitTrig_Furion()
    call InitTrig_Furion_____________________u()
    call InitTrig_KelThuzad()
    call InitTrig_KelThuzad_____________________u()
    call InitTrig_Arthas()
    call InitTrig_Arthas_____________________u()
    call InitTrig_Furion_quote()
    call InitTrig_KelThuzad_quote()
    call InitTrig_Arthas_quote()
    call InitTrig_HuAl()
    call InitTrig_HUAL()
    call InitTrig_OrcAl()
    call InitTrig_ORCAL()
    call InitTrig_Neal()
    call InitTrig_NEAL()
    call InitTrig_Udal()
    call InitTrig_UDAL()
    call InitTrig_MTWBE()
    call InitTrig_Demon_gate()
    call InitTrig_Damage_Tag()
    call InitTrig_On_Death()
    call InitTrig_Life_Drain_Fix()
    call InitTrig_Finger_of_Death_Fix()
    call InitTrig_Anti_Magic_Shield_Fix()
    call InitTrig_Mana_Shield_Fix()
    call InitTrig_Unit_Indexer()
    call InitTrig_Damage_Engine_Config()
    call InitTrig_Damage_Engine()
    call InitTrig_Cast()
    call InitTrig_Melee_Initialization()
    call InitTrig_____________________________________006()
    call InitTrig_Speed_Aura()
    call InitTrig_Hashtable()
    call InitTrig_Elune_Wrath()
    call InitTrig_Elune_Wrath_loop()
    call InitTrig_Kraken_Learn()
    call InitTrig_Kraken()
    call InitTrig_Kraken_Time()
    call InitTrig_SKF()
    call InitTrig_skf()
    call InitTrig_SKF3()
    call InitTrig_Initialize()
    call InitTrig_Shake_Camera()
    call InitTrig_Knockback_Index()
    call InitTrig_Knockback_Move()
    call InitTrig_Feral_Impact_Index()
    call InitTrig_Feral_Impact()
    call InitTrig_Feral_Impact_Move()
    call InitTrig_Bonebreaker()
    call InitTrig_Battle_Fury_Index()
    call InitTrig_Battle_Fury()
    call InitTrig_Battle_Fury_Downgrade()
    call InitTrig_Tornado()
    call InitTrig_Tornado_Damage()
    call InitTrig_Maelstrom_Config()
    call InitTrig_Maelstrom_Cast()
    call InitTrig_Maelstrom_Loop()
    call InitTrig_____________________________________004()
    call InitTrig_____________________________________005()
endfunction

//===========================================================================
function RunInitializationTriggers takes nothing returns nothing
    call ConditionalTriggerExecute(gg_trg_Settings)
    call ConditionalTriggerExecute(gg_trg_False_Promise_Config)
    call ConditionalTriggerExecute(gg_trg_Unit_Indexer)
    call ConditionalTriggerExecute(gg_trg_Melee_Initialization)
    call ConditionalTriggerExecute(gg_trg_Hashtable)
    call ConditionalTriggerExecute(gg_trg_Initialize)
    call ConditionalTriggerExecute(gg_trg_Maelstrom_Config)
endfunction

//***************************************************************************
//*
//*  Upgrades
//*
//***************************************************************************

function InitUpgrades_Player0 takes nothing returns nothing
    call SetPlayerTechMaxAllowed(Player(0), 'R008', 0)
endfunction

function InitUpgrades_Player1 takes nothing returns nothing
    call SetPlayerTechMaxAllowed(Player(1), 'R008', 0)
endfunction

function InitUpgrades_Player2 takes nothing returns nothing
    call SetPlayerTechMaxAllowed(Player(2), 'R008', 0)
endfunction

function InitUpgrades_Player3 takes nothing returns nothing
    call SetPlayerTechMaxAllowed(Player(3), 'R008', 0)
endfunction

function InitUpgrades_Player4 takes nothing returns nothing
    call SetPlayerTechMaxAllowed(Player(4), 'R008', 0)
endfunction

function InitUpgrades_Player5 takes nothing returns nothing
    call SetPlayerTechMaxAllowed(Player(5), 'R008', 0)
endfunction

function InitUpgrades takes nothing returns nothing
    call InitUpgrades_Player0()
    call InitUpgrades_Player1()
    call InitUpgrades_Player2()
    call InitUpgrades_Player3()
    call InitUpgrades_Player4()
    call InitUpgrades_Player5()
endfunction

//***************************************************************************
//*
//*  TechTree
//*
//***************************************************************************

function InitTechTree_Player0 takes nothing returns nothing
    call SetPlayerTechMaxAllowed(Player(0), 'h00G', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'nbt1', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'ndt1', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'net1', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'nft1', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'nbt2', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'ndt2', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'net2', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'nft2', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'ntx2', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'nchw', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'nchg', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'nchr', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'nckb', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'ncpn', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'o007', 0)
endfunction

function InitTechTree_Player1 takes nothing returns nothing
    call SetPlayerTechMaxAllowed(Player(1), 'h00G', 0)
    call SetPlayerTechMaxAllowed(Player(1), 'nbt1', 0)
    call SetPlayerTechMaxAllowed(Player(1), 'ndt1', 0)
    call SetPlayerTechMaxAllowed(Player(1), 'net1', 0)
    call SetPlayerTechMaxAllowed(Player(1), 'nft1', 0)
    call SetPlayerTechMaxAllowed(Player(1), 'nbt2', 0)
    call SetPlayerTechMaxAllowed(Player(1), 'ndt2', 0)
    call SetPlayerTechMaxAllowed(Player(1), 'net2', 0)
    call SetPlayerTechMaxAllowed(Player(1), 'nft2', 0)
    call SetPlayerTechMaxAllowed(Player(1), 'ntx2', 0)
    call SetPlayerTechMaxAllowed(Player(1), 'nchw', 0)
    call SetPlayerTechMaxAllowed(Player(1), 'nchg', 0)
    call SetPlayerTechMaxAllowed(Player(1), 'nchr', 0)
    call SetPlayerTechMaxAllowed(Player(1), 'nckb', 0)
    call SetPlayerTechMaxAllowed(Player(1), 'ncpn', 0)
    call SetPlayerTechMaxAllowed(Player(1), 'o007', 0)
endfunction

function InitTechTree_Player2 takes nothing returns nothing
    call SetPlayerTechMaxAllowed(Player(2), 'h00G', 0)
    call SetPlayerTechMaxAllowed(Player(2), 'nbt1', 0)
    call SetPlayerTechMaxAllowed(Player(2), 'ndt1', 0)
    call SetPlayerTechMaxAllowed(Player(2), 'net1', 0)
    call SetPlayerTechMaxAllowed(Player(2), 'nft1', 0)
    call SetPlayerTechMaxAllowed(Player(2), 'nbt2', 0)
    call SetPlayerTechMaxAllowed(Player(2), 'ndt2', 0)
    call SetPlayerTechMaxAllowed(Player(2), 'net2', 0)
    call SetPlayerTechMaxAllowed(Player(2), 'nft2', 0)
    call SetPlayerTechMaxAllowed(Player(2), 'ntx2', 0)
    call SetPlayerTechMaxAllowed(Player(2), 'nchw', 0)
    call SetPlayerTechMaxAllowed(Player(2), 'nchg', 0)
    call SetPlayerTechMaxAllowed(Player(2), 'nchr', 0)
    call SetPlayerTechMaxAllowed(Player(2), 'nckb', 0)
    call SetPlayerTechMaxAllowed(Player(2), 'ncpn', 0)
    call SetPlayerTechMaxAllowed(Player(2), 'o007', 0)
endfunction

function InitTechTree_Player3 takes nothing returns nothing
    call SetPlayerTechMaxAllowed(Player(3), 'h00G', 0)
    call SetPlayerTechMaxAllowed(Player(3), 'nbt1', 0)
    call SetPlayerTechMaxAllowed(Player(3), 'ndt1', 0)
    call SetPlayerTechMaxAllowed(Player(3), 'net1', 0)
    call SetPlayerTechMaxAllowed(Player(3), 'nft1', 0)
    call SetPlayerTechMaxAllowed(Player(3), 'nbt2', 0)
    call SetPlayerTechMaxAllowed(Player(3), 'ndt2', 0)
    call SetPlayerTechMaxAllowed(Player(3), 'net2', 0)
    call SetPlayerTechMaxAllowed(Player(3), 'nft2', 0)
    call SetPlayerTechMaxAllowed(Player(3), 'ntx2', 0)
    call SetPlayerTechMaxAllowed(Player(3), 'nchw', 0)
    call SetPlayerTechMaxAllowed(Player(3), 'nchg', 0)
    call SetPlayerTechMaxAllowed(Player(3), 'nchr', 0)
    call SetPlayerTechMaxAllowed(Player(3), 'nckb', 0)
    call SetPlayerTechMaxAllowed(Player(3), 'ncpn', 0)
    call SetPlayerTechMaxAllowed(Player(3), 'o007', 0)
endfunction

function InitTechTree_Player4 takes nothing returns nothing
    call SetPlayerTechMaxAllowed(Player(4), 'h00G', 0)
    call SetPlayerTechMaxAllowed(Player(4), 'nbt1', 0)
    call SetPlayerTechMaxAllowed(Player(4), 'ndt1', 0)
    call SetPlayerTechMaxAllowed(Player(4), 'net1', 0)
    call SetPlayerTechMaxAllowed(Player(4), 'nft1', 0)
    call SetPlayerTechMaxAllowed(Player(4), 'nbt2', 0)
    call SetPlayerTechMaxAllowed(Player(4), 'ndt2', 0)
    call SetPlayerTechMaxAllowed(Player(4), 'net2', 0)
    call SetPlayerTechMaxAllowed(Player(4), 'nft2', 0)
    call SetPlayerTechMaxAllowed(Player(4), 'ntx2', 0)
    call SetPlayerTechMaxAllowed(Player(4), 'nchw', 0)
    call SetPlayerTechMaxAllowed(Player(4), 'nchg', 0)
    call SetPlayerTechMaxAllowed(Player(4), 'nchr', 0)
    call SetPlayerTechMaxAllowed(Player(4), 'nckb', 0)
    call SetPlayerTechMaxAllowed(Player(4), 'ncpn', 0)
    call SetPlayerTechMaxAllowed(Player(4), 'o007', 0)
endfunction

function InitTechTree_Player5 takes nothing returns nothing
    call SetPlayerTechMaxAllowed(Player(5), 'h00G', 0)
    call SetPlayerTechMaxAllowed(Player(5), 'nbt1', 0)
    call SetPlayerTechMaxAllowed(Player(5), 'ndt1', 0)
    call SetPlayerTechMaxAllowed(Player(5), 'net1', 0)
    call SetPlayerTechMaxAllowed(Player(5), 'nft1', 0)
    call SetPlayerTechMaxAllowed(Player(5), 'nbt2', 0)
    call SetPlayerTechMaxAllowed(Player(5), 'ndt2', 0)
    call SetPlayerTechMaxAllowed(Player(5), 'net2', 0)
    call SetPlayerTechMaxAllowed(Player(5), 'nft2', 0)
    call SetPlayerTechMaxAllowed(Player(5), 'ntx2', 0)
    call SetPlayerTechMaxAllowed(Player(5), 'nchw', 0)
    call SetPlayerTechMaxAllowed(Player(5), 'nchg', 0)
    call SetPlayerTechMaxAllowed(Player(5), 'nchr', 0)
    call SetPlayerTechMaxAllowed(Player(5), 'nckb', 0)
    call SetPlayerTechMaxAllowed(Player(5), 'ncpn', 0)
    call SetPlayerTechMaxAllowed(Player(5), 'o007', 0)
endfunction

function InitTechTree takes nothing returns nothing
    call InitTechTree_Player0()
    call InitTechTree_Player1()
    call InitTechTree_Player2()
    call InitTechTree_Player3()
    call InitTechTree_Player4()
    call InitTechTree_Player5()
endfunction

//***************************************************************************
//*
//*  Players
//*
//***************************************************************************

function InitCustomPlayerSlots takes nothing returns nothing

    // Player 0
    call SetPlayerStartLocation(Player(0), 0)
    call SetPlayerColor(Player(0), ConvertPlayerColor(0))
    call SetPlayerRacePreference(Player(0), RACE_PREF_HUMAN)
    call SetPlayerRaceSelectable(Player(0), true)
    call SetPlayerController(Player(0), MAP_CONTROL_USER)

    // Player 1
    call SetPlayerStartLocation(Player(1), 1)
    call SetPlayerColor(Player(1), ConvertPlayerColor(1))
    call SetPlayerRacePreference(Player(1), RACE_PREF_ORC)
    call SetPlayerRaceSelectable(Player(1), true)
    call SetPlayerController(Player(1), MAP_CONTROL_USER)

    // Player 2
    call SetPlayerStartLocation(Player(2), 2)
    call SetPlayerColor(Player(2), ConvertPlayerColor(2))
    call SetPlayerRacePreference(Player(2), RACE_PREF_UNDEAD)
    call SetPlayerRaceSelectable(Player(2), true)
    call SetPlayerController(Player(2), MAP_CONTROL_USER)

    // Player 3
    call SetPlayerStartLocation(Player(3), 3)
    call SetPlayerColor(Player(3), ConvertPlayerColor(3))
    call SetPlayerRacePreference(Player(3), RACE_PREF_NIGHTELF)
    call SetPlayerRaceSelectable(Player(3), true)
    call SetPlayerController(Player(3), MAP_CONTROL_USER)

    // Player 4
    call SetPlayerStartLocation(Player(4), 4)
    call SetPlayerColor(Player(4), ConvertPlayerColor(4))
    call SetPlayerRacePreference(Player(4), RACE_PREF_HUMAN)
    call SetPlayerRaceSelectable(Player(4), true)
    call SetPlayerController(Player(4), MAP_CONTROL_USER)

    // Player 5
    call SetPlayerStartLocation(Player(5), 5)
    call SetPlayerColor(Player(5), ConvertPlayerColor(5))
    call SetPlayerRacePreference(Player(5), RACE_PREF_ORC)
    call SetPlayerRaceSelectable(Player(5), true)
    call SetPlayerController(Player(5), MAP_CONTROL_USER)

endfunction

function InitCustomTeams takes nothing returns nothing
    // Force: TRIGSTR_011
    call SetPlayerTeam(Player(0), 0)
    call SetPlayerTeam(Player(1), 0)
    call SetPlayerTeam(Player(2), 0)
    call SetPlayerTeam(Player(3), 0)
    call SetPlayerTeam(Player(4), 0)
    call SetPlayerTeam(Player(5), 0)

endfunction

function InitAllyPriorities takes nothing returns nothing

    call SetStartLocPrioCount(0, 1)
    call SetStartLocPrio(0, 0, 2, MAP_LOC_PRIO_HIGH)

    call SetStartLocPrioCount(1, 2)
    call SetStartLocPrio(1, 0, 0, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(1, 1, 2, MAP_LOC_PRIO_HIGH)

    call SetStartLocPrioCount(2, 1)
    call SetStartLocPrio(2, 0, 0, MAP_LOC_PRIO_HIGH)

    call SetStartLocPrioCount(3, 1)
    call SetStartLocPrio(3, 0, 5, MAP_LOC_PRIO_HIGH)

    call SetStartLocPrioCount(4, 2)
    call SetStartLocPrio(4, 0, 3, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(4, 1, 5, MAP_LOC_PRIO_HIGH)

    call SetStartLocPrioCount(5, 1)
    call SetStartLocPrio(5, 0, 3, MAP_LOC_PRIO_HIGH)
endfunction

//***************************************************************************
//*
//*  Main Initialization
//*
//***************************************************************************

//===========================================================================
function main takes nothing returns nothing
    call SetCameraBounds(- 8704.0 + GetCameraMargin(CAMERA_MARGIN_LEFT), - 7680.0 + GetCameraMargin(CAMERA_MARGIN_BOTTOM), 8960.0 - GetCameraMargin(CAMERA_MARGIN_RIGHT), 7168.0 - GetCameraMargin(CAMERA_MARGIN_TOP), - 8704.0 + GetCameraMargin(CAMERA_MARGIN_LEFT), 7168.0 - GetCameraMargin(CAMERA_MARGIN_TOP), 8960.0 - GetCameraMargin(CAMERA_MARGIN_RIGHT), - 7680.0 + GetCameraMargin(CAMERA_MARGIN_BOTTOM))
    call SetDayNightModels("Environment\\DNC\\DNCLordaeron\\DNCLordaeronTerrain\\DNCLordaeronTerrain.mdl", "Environment\\DNC\\DNCLordaeron\\DNCLordaeronUnit\\DNCLordaeronUnit.mdl")
    call SetTerrainFogEx(0, 2500.0, 5000.0, 0.500, 0.502, 1.000, 0.502)
    call SetWaterBaseColor(128, 255, 128, 255)
    call NewSoundEnvironment("lake")
    call SetAmbientDaySound("SunkenRuinsDay")
    call SetAmbientNightSound("SunkenRuinsNight")
    call SetMapMusic("Music", true, 0)
    call InitSounds()
    call InitUpgrades()
    call InitTechTree()
    call CreateAllUnits()
    call InitBlizzard()


    call InitGlobals()
    call InitCustomTriggers()
    call RunInitializationTriggers()

endfunction

//***************************************************************************
//*
//*  Map Configuration
//*
//***************************************************************************

function config takes nothing returns nothing
    call SetMapName("TRIGSTR_001")
    call SetMapDescription("TRIGSTR_003")
    call SetPlayers(6)
    call SetTeams(6)
    call SetGamePlacement(MAP_PLACEMENT_TEAMS_TOGETHER)

    call DefineStartLocation(0, - 5760.0, 4736.0)
    call DefineStartLocation(1, - 5888.0, - 512.0)
    call DefineStartLocation(2, - 5632.0, - 5312.0)
    call DefineStartLocation(3, 5376.0, 5056.0)
    call DefineStartLocation(4, 6080.0, - 832.0)
    call DefineStartLocation(5, 5696.0, - 5440.0)

    // Player setup
    call InitCustomPlayerSlots()
    call SetPlayerSlotAvailable(Player(0), MAP_CONTROL_USER)
    call SetPlayerSlotAvailable(Player(1), MAP_CONTROL_USER)
    call SetPlayerSlotAvailable(Player(2), MAP_CONTROL_USER)
    call SetPlayerSlotAvailable(Player(3), MAP_CONTROL_USER)
    call SetPlayerSlotAvailable(Player(4), MAP_CONTROL_USER)
    call SetPlayerSlotAvailable(Player(5), MAP_CONTROL_USER)
    call InitGenericPlayerSlots()
    call InitAllyPriorities()
endfunction




//Struct method generated initializers/callers:

